function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}(function(e,i){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?i(e,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return i(s)}:i(e)})("undefined"!=typeof window?window:this,function(e,i){"use strict";var s=[],h=Object.getPrototypeOf,d=s.slice,r=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},o=s.push,a=s.indexOf,p={},w=p.toString,x=p.hasOwnProperty,A=x.toString,P=A.call(Object),O={},b=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},R=function(t){return null!=t&&t===t.window},_=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function X(t,n,u){var c,m,y=(u=u||_).createElement("script");if(y.text=t,n)for(c in I)(m=n[c]||n.getAttribute&&n.getAttribute(c))&&y.setAttribute(c,m);u.head.appendChild(y).parentNode.removeChild(y)}function Y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[w.call(t)]||"object":typeof t}var ue=/HTML$/i,l=function(t,n){return new l.fn.init(t,n)};function Te(t){var n=!!t&&"length"in t&&t.length,u=Y(t);return!b(t)&&!R(t)&&("array"===u||0===n||"number"==typeof n&&0<n&&n-1 in t)}function ge(t,n){return t.nodeName&&t.nodeName.toLowerCase()===n.toLowerCase()}l.fn=l.prototype={jquery:"3.7.1",constructor:l,length:0,toArray:function(){return d.call(this)},get:function(t){return null==t?d.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var n=l.merge(this.constructor(),t);return n.prevObject=this,n},each:function(t){return l.each(this,t)},map:function(t){return this.pushStack(l.map(this,function(n,u){return t.call(n,u,n)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(t,n){return(n+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(t,n){return n%2}))},eq:function(t){var n=this.length,u=+t+(t<0?n:0);return this.pushStack(0<=u&&u<n?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:s.sort,splice:s.splice},l.extend=l.fn.extend=function(){var t,n,u,c,m,y,T=arguments[0]||{},L=1,F=arguments.length,B=!1;for("boolean"==typeof T&&(B=T,T=arguments[L]||{},L++),"object"==typeof T||b(T)||(T={}),L===F&&(T=this,L--);L<F;L++)if(null!=(t=arguments[L]))for(n in t)c=t[n],"__proto__"!==n&&T!==c&&(B&&c&&(l.isPlainObject(c)||(m=Array.isArray(c)))?(u=T[n],y=m&&!Array.isArray(u)?[]:m||l.isPlainObject(u)?u:{},m=!1,T[n]=l.extend(B,y,c)):void 0!==c&&(T[n]=c));return T},l.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var n,u;return!(!t||"[object Object]"!==w.call(t)||(n=h(t))&&("function"!=typeof(u=x.call(n,"constructor")&&n.constructor)||A.call(u)!==P))},isEmptyObject:function(t){var n;for(n in t)return!1;return!0},globalEval:function(t,n,u){X(t,{nonce:n&&n.nonce},u)},each:function(t,n){var u,c=0;if(Te(t))for(u=t.length;c<u&&!1!==n.call(t[c],c,t[c]);c++);else for(c in t)if(!1===n.call(t[c],c,t[c]))break;return t},text:function(t){var n,u="",c=0,m=t.nodeType;if(!m)for(;n=t[c++];)u+=l.text(n);return 1===m||11===m?t.textContent:9===m?t.documentElement.textContent:3===m||4===m?t.nodeValue:u},makeArray:function(t,n){var u=n||[];return null!=t&&(Te(Object(t))?l.merge(u,"string"==typeof t?[t]:t):o.call(u,t)),u},inArray:function(t,n,u){return null==n?-1:a.call(n,t,u)},isXMLDoc:function(t){var u=t&&(t.ownerDocument||t).documentElement;return!ue.test(t&&t.namespaceURI||u&&u.nodeName||"HTML")},merge:function(t,n){for(var u=+n.length,c=0,m=t.length;c<u;c++)t[m++]=n[c];return t.length=m,t},grep:function(t,n,u){for(var c=[],m=0,y=t.length,T=!u;m<y;m++)!n(t[m],m)!==T&&c.push(t[m]);return c},map:function(t,n,u){var c,m,y=0,T=[];if(Te(t))for(c=t.length;y<c;y++)null!=(m=n(t[y],y,u))&&T.push(m);else for(y in t)null!=(m=n(t[y],y,u))&&T.push(m);return r(T)},guid:1,support:O}),"function"==typeof Symbol&&(l.fn[Symbol.iterator]=s[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,n){p["[object "+n+"]"]=n.toLowerCase()});var Fe=s.pop,Ue=s.sort,at=s.splice,be="[\\x20\\t\\r\\n\\f]",Pt=new RegExp("^"+be+"+|((?:^|[^\\\\])(?:\\\\.)*)"+be+"+$","g");l.contains=function(t,n){var u=n&&n.parentNode;return t===u||!(!u||1!==u.nodeType||!(t.contains?t.contains(u):t.compareDocumentPosition&&16&t.compareDocumentPosition(u)))};var ft=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Ve(t,n){return n?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}l.escapeSelector=function(t){return(t+"").replace(ft,Ve)};var Xe=_,Et=o;!function(){var t,n,u,c,m,y,T,L,F,B,W=Et,Z=l.expando,z=0,J=0,Se=xt(),Re=xt(),_e=xt(),wt=xt(),_t=function(C,M){return C===M&&(m=!0),0},ai="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",li="(?:\\\\[\\da-fA-F]{1,6}"+be+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",qe="\\["+be+"*("+li+")(?:"+be+"*([*^$|!~]?=)"+be+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+li+"))|)"+be+"*\\]",Si=":("+li+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+qe+")*)|.*)\\)|)",Qe=new RegExp(be+"+","g"),gt=new RegExp("^"+be+"*,"+be+"*"),Ni=new RegExp("^"+be+"*([>+~]|"+be+")"+be+"*"),ln=new RegExp(be+"|>"),ui=new RegExp(Si),zi=new RegExp("^"+li+"$"),pi={ID:new RegExp("^#("+li+")"),CLASS:new RegExp("^\\.("+li+")"),TAG:new RegExp("^("+li+"|[*])"),ATTR:new RegExp("^"+qe),PSEUDO:new RegExp("^"+Si),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+be+"*(even|odd|(([+-]|)(\\d*)n|)"+be+"*(?:([+-]|)"+be+"*(\\d+)|))"+be+"*\\)|)","i"),bool:new RegExp("^(?:"+ai+")$","i"),needsContext:new RegExp("^"+be+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+be+"*((?:-\\d)?\\d*)"+be+"*\\)|)(?=[^-]|$)","i")},wi=/^(?:input|select|textarea|button)$/i,Ai=/^h\d$/i,Jt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Dt=/[+~]/,St=new RegExp("\\\\[\\da-fA-F]{1,6}"+be+"?|\\\\([^\\r\\n\\f])","g"),Nt=function(C,M){var j="0x"+C.slice(1)-65536;return M||(j<0?String.fromCharCode(j+65536):String.fromCharCode(j>>10|55296,1023&j|56320))},xi=function(){Ti()},zt=Qi(function(C){return!0===C.disabled&&ge(C,"fieldset")},{dir:"parentNode",next:"legend"});try{W.apply(s=d.call(Xe.childNodes),Xe.childNodes)}catch(C){W={apply:function(M,j){Et.apply(M,d.call(j))},call:function(M){Et.apply(M,d.call(arguments,1))}}}function Pe(C,M,j,G){var K,fe,pe,xe,de,et,Ae,He=M&&M.ownerDocument,Ke=M?M.nodeType:9;if(j=j||[],"string"!=typeof C||!C||1!==Ke&&9!==Ke&&11!==Ke)return j;if(!G&&(Ti(M),M=M||y,L)){if(11!==Ke&&(de=Jt.exec(C)))if(K=de[1]){if(9===Ke){if(!(pe=M.getElementById(K)))return j;if(pe.id===K)return W.call(j,pe),j}else if(He&&(pe=He.getElementById(K))&&Pe.contains(M,pe)&&pe.id===K)return W.call(j,pe),j}else{if(de[2])return W.apply(j,M.getElementsByTagName(C)),j;if((K=de[3])&&M.getElementsByClassName)return W.apply(j,M.getElementsByClassName(K)),j}if(!(wt[C+" "]||F&&F.test(C))){if(Ae=C,He=M,1===Ke&&(ln.test(C)||Ni.test(C))){for((He=Dt.test(C)&&un(M.parentNode)||M)==M&&O.scope||((xe=M.getAttribute("id"))?xe=l.escapeSelector(xe):M.setAttribute("id",xe=Z)),fe=(et=ji(C)).length;fe--;)et[fe]=(xe?"#"+xe:":scope")+" "+Ji(et[fe]);Ae=et.join(",")}try{return W.apply(j,He.querySelectorAll(Ae)),j}catch(Ce){wt(C,!0)}finally{xe===Z&&M.removeAttribute("id")}}}return Tn(C.replace(Pt,"$1"),M,j,G)}function xt(){var C=[];return function M(j,G){return C.push(j+" ")>n.cacheLength&&delete M[C.shift()],M[j+" "]=G}}function Tt(C){return C[Z]=!0,C}function ut(C){var M=y.createElement("fieldset");try{return!!C(M)}catch(j){return!1}finally{M.parentNode&&M.parentNode.removeChild(M),M=null}}function hi(C){return function(M){return ge(M,"input")&&M.type===C}}function Fi(C){return function(M){return(ge(M,"input")||ge(M,"button"))&&M.type===C}}function Ki(C){return function(M){return"form"in M?M.parentNode&&!1===M.disabled?"label"in M?"label"in M.parentNode?M.parentNode.disabled===C:M.disabled===C:M.isDisabled===C||M.isDisabled!==!C&&zt(M)===C:M.disabled===C:"label"in M&&M.disabled===C}}function bi(C){return Tt(function(M){return M=+M,Tt(function(j,G){for(var K,fe=C([],j.length,M),pe=fe.length;pe--;)j[K=fe[pe]]&&(j[K]=!(G[K]=j[K]))})})}function un(C){return C&&void 0!==C.getElementsByTagName&&C}function Ti(C){var M,j=C?C.ownerDocument||C:Xe;return j!=y&&9===j.nodeType&&j.documentElement&&(T=(y=j).documentElement,L=!l.isXMLDoc(y),B=T.matches||T.webkitMatchesSelector||T.msMatchesSelector,T.msMatchesSelector&&Xe!=y&&(M=y.defaultView)&&M.top!==M&&M.addEventListener("unload",xi),O.getById=ut(function(G){return T.appendChild(G).id=l.expando,!y.getElementsByName||!y.getElementsByName(l.expando).length}),O.disconnectedMatch=ut(function(G){return B.call(G,"*")}),O.scope=ut(function(){return y.querySelectorAll(":scope")}),O.cssHas=ut(function(){try{return y.querySelector(":has(*,:jqfake)"),!1}catch(G){return!0}}),O.getById?(n.filter.ID=function(G){var K=G.replace(St,Nt);return function(fe){return fe.getAttribute("id")===K}},n.find.ID=function(G,K){if(void 0!==K.getElementById&&L){var fe=K.getElementById(G);return fe?[fe]:[]}}):(n.filter.ID=function(G){var K=G.replace(St,Nt);return function(fe){var pe=void 0!==fe.getAttributeNode&&fe.getAttributeNode("id");return pe&&pe.value===K}},n.find.ID=function(G,K){if(void 0!==K.getElementById&&L){var fe,pe,xe,de=K.getElementById(G);if(de){if((fe=de.getAttributeNode("id"))&&fe.value===G)return[de];for(xe=K.getElementsByName(G),pe=0;de=xe[pe++];)if((fe=de.getAttributeNode("id"))&&fe.value===G)return[de]}return[]}}),n.find.TAG=function(G,K){return void 0!==K.getElementsByTagName?K.getElementsByTagName(G):K.querySelectorAll(G)},n.find.CLASS=function(G,K){if(void 0!==K.getElementsByClassName&&L)return K.getElementsByClassName(G)},F=[],ut(function(G){var K;T.appendChild(G).innerHTML="<a id='"+Z+"' href='' disabled='disabled'></a><select id='"+Z+"-\r\\' disabled='disabled'><option selected=''></option></select>",G.querySelectorAll("[selected]").length||F.push("\\["+be+"*(?:value|"+ai+")"),G.querySelectorAll("[id~="+Z+"-]").length||F.push("~="),G.querySelectorAll("a#"+Z+"+*").length||F.push(".#.+[+~]"),G.querySelectorAll(":checked").length||F.push(":checked"),(K=y.createElement("input")).setAttribute("type","hidden"),G.appendChild(K).setAttribute("name","D"),T.appendChild(G).disabled=!0,2!==G.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),(K=y.createElement("input")).setAttribute("name",""),G.appendChild(K),G.querySelectorAll("[name='']").length||F.push("\\["+be+"*name"+be+"*="+be+"*(?:''|\"\")")}),O.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),_t=function(G,K){if(G===K)return m=!0,0;var fe=!G.compareDocumentPosition-!K.compareDocumentPosition;return fe||(1&(fe=(G.ownerDocument||G)==(K.ownerDocument||K)?G.compareDocumentPosition(K):1)||!O.sortDetached&&K.compareDocumentPosition(G)===fe?G===y||G.ownerDocument==Xe&&Pe.contains(Xe,G)?-1:K===y||K.ownerDocument==Xe&&Pe.contains(Xe,K)?1:c?a.call(c,G)-a.call(c,K):0:4&fe?-1:1)}),y}for(t in Pe.matches=function(C,M){return Pe(C,null,null,M)},Pe.matchesSelector=function(C,M){if(Ti(C),L&&!wt[M+" "]&&(!F||!F.test(M)))try{var j=B.call(C,M);if(j||O.disconnectedMatch||C.document&&11!==C.document.nodeType)return j}catch(G){wt(M,!0)}return 0<Pe(M,y,null,[C]).length},Pe.contains=function(C,M){return(C.ownerDocument||C)!=y&&Ti(C),l.contains(C,M)},Pe.attr=function(C,M){(C.ownerDocument||C)!=y&&Ti(C);var j=n.attrHandle[M.toLowerCase()],G=j&&x.call(n.attrHandle,M.toLowerCase())?j(C,M,!L):void 0;return void 0!==G?G:C.getAttribute(M)},Pe.error=function(C){throw new Error("Syntax error, unrecognized expression: "+C)},l.uniqueSort=function(C){var M,j=[],G=0,K=0;if(m=!O.sortStable,c=!O.sortStable&&d.call(C,0),Ue.call(C,_t),m){for(;M=C[K++];)M===C[K]&&(G=j.push(K));for(;G--;)at.call(C,j[G],1)}return c=null,C},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(d.apply(this)))},(n=l.expr={cacheLength:50,createPseudo:Tt,match:pi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(C){return C[1]=C[1].replace(St,Nt),C[3]=(C[3]||C[4]||C[5]||"").replace(St,Nt),"~="===C[2]&&(C[3]=" "+C[3]+" "),C.slice(0,4)},CHILD:function(C){return C[1]=C[1].toLowerCase(),"nth"===C[1].slice(0,3)?(C[3]||Pe.error(C[0]),C[4]=+(C[4]?C[5]+(C[6]||1):2*("even"===C[3]||"odd"===C[3])),C[5]=+(C[7]+C[8]||"odd"===C[3])):C[3]&&Pe.error(C[0]),C},PSEUDO:function(C){var M,j=!C[6]&&C[2];return pi.CHILD.test(C[0])?null:(C[3]?C[2]=C[4]||C[5]||"":j&&ui.test(j)&&(M=ji(j,!0))&&(M=j.indexOf(")",j.length-M)-j.length)&&(C[0]=C[0].slice(0,M),C[2]=j.slice(0,M)),C.slice(0,3))}},filter:{TAG:function(C){var M=C.replace(St,Nt).toLowerCase();return"*"===C?function(){return!0}:function(j){return ge(j,M)}},CLASS:function(C){var M=Se[C+" "];return M||(M=new RegExp("(^|"+be+")"+C+"("+be+"|$)"))&&Se(C,function(j){return M.test("string"==typeof j.className&&j.className||void 0!==j.getAttribute&&j.getAttribute("class")||"")})},ATTR:function(C,M,j){return function(G){var K=Pe.attr(G,C);return null==K?"!="===M:!M||(K+="","="===M?K===j:"!="===M?K!==j:"^="===M?j&&0===K.indexOf(j):"*="===M?j&&-1<K.indexOf(j):"$="===M?j&&K.slice(-j.length)===j:"~="===M?-1<(" "+K.replace(Qe," ")+" ").indexOf(j):"|="===M&&(K===j||K.slice(0,j.length+1)===j+"-"))}},CHILD:function(C,M,j,G,K){var fe="nth"!==C.slice(0,3),pe="last"!==C.slice(-4),xe="of-type"===M;return 1===G&&0===K?function(de){return!!de.parentNode}:function(de,et,Ae){var He,Ke,Ce,bt,kt,Ot=fe!==pe?"nextSibling":"previousSibling",Zt=de.parentNode,Yt=xe&&de.nodeName.toLowerCase(),ii=!Ae&&!xe,ht=!1;if(Zt){if(fe){for(;Ot;){for(Ce=de;Ce=Ce[Ot];)if(xe?ge(Ce,Yt):1===Ce.nodeType)return!1;kt=Ot="only"===C&&!kt&&"nextSibling"}return!0}if(kt=[pe?Zt.firstChild:Zt.lastChild],pe&&ii){for(ht=(bt=(He=(Ke=Zt[Z]||(Zt[Z]={}))[C]||[])[0]===z&&He[1])&&He[2],Ce=bt&&Zt.childNodes[bt];Ce=++bt&&Ce&&Ce[Ot]||(ht=bt=0)||kt.pop();)if(1===Ce.nodeType&&++ht&&Ce===de){Ke[C]=[z,bt,ht];break}}else if(ii&&(ht=bt=(He=(Ke=de[Z]||(de[Z]={}))[C]||[])[0]===z&&He[1]),!1===ht)for(;(Ce=++bt&&Ce&&Ce[Ot]||(ht=bt=0)||kt.pop())&&(!(xe?ge(Ce,Yt):1===Ce.nodeType)||!++ht||(ii&&((Ke=Ce[Z]||(Ce[Z]={}))[C]=[z,ht]),Ce!==de)););return(ht-=K)===G||ht%G==0&&0<=ht/G}}},PSEUDO:function(C,M){var j,G=n.pseudos[C]||n.setFilters[C.toLowerCase()]||Pe.error("unsupported pseudo: "+C);return G[Z]?G(M):1<G.length?(j=[C,C,"",M],n.setFilters.hasOwnProperty(C.toLowerCase())?Tt(function(K,fe){for(var pe,xe=G(K,M),de=xe.length;de--;)K[pe=a.call(K,xe[de])]=!(fe[pe]=xe[de])}):function(K){return G(K,0,j)}):G}},pseudos:{not:Tt(function(C){var M=[],j=[],G=fn(C.replace(Pt,"$1"));return G[Z]?Tt(function(K,fe,pe,xe){for(var de,et=G(K,null,xe,[]),Ae=K.length;Ae--;)(de=et[Ae])&&(K[Ae]=!(fe[Ae]=de))}):function(K,fe,pe){return M[0]=K,G(M,null,pe,j),M[0]=null,!j.pop()}}),has:Tt(function(C){return function(M){return 0<Pe(C,M).length}}),contains:Tt(function(C){return C=C.replace(St,Nt),function(M){return-1<(M.textContent||l.text(M)).indexOf(C)}}),lang:Tt(function(C){return zi.test(C||"")||Pe.error("unsupported lang: "+C),C=C.replace(St,Nt).toLowerCase(),function(M){var j;do{if(j=L?M.lang:M.getAttribute("xml:lang")||M.getAttribute("lang"))return(j=j.toLowerCase())===C||0===j.indexOf(C+"-")}while((M=M.parentNode)&&1===M.nodeType);return!1}}),target:function(C){var M=e.location&&e.location.hash;return M&&M.slice(1)===C.id},root:function(C){return C===T},focus:function(C){return C===function(){try{return y.activeElement}catch(M){}}()&&y.hasFocus()&&!!(C.type||C.href||~C.tabIndex)},enabled:Ki(!1),disabled:Ki(!0),checked:function(C){return ge(C,"input")&&!!C.checked||ge(C,"option")&&!!C.selected},selected:function(C){return!0===C.selected},empty:function(C){for(C=C.firstChild;C;C=C.nextSibling)if(C.nodeType<6)return!1;return!0},parent:function(C){return!n.pseudos.empty(C)},header:function(C){return Ai.test(C.nodeName)},input:function(C){return wi.test(C.nodeName)},button:function(C){return ge(C,"input")&&"button"===C.type||ge(C,"button")},text:function(C){var M;return ge(C,"input")&&"text"===C.type&&(null==(M=C.getAttribute("type"))||"text"===M.toLowerCase())},first:bi(function(){return[0]}),last:bi(function(C,M){return[M-1]}),eq:bi(function(C,M,j){return[j<0?j+M:j]}),even:bi(function(C,M){for(var j=0;j<M;j+=2)C.push(j);return C}),odd:bi(function(C,M){for(var j=1;j<M;j+=2)C.push(j);return C}),lt:bi(function(C,M,j){var G;for(G=j<0?j+M:M<j?M:j;0<=--G;)C.push(G);return C}),gt:bi(function(C,M,j){for(var G=j<0?j+M:j;++G<M;)C.push(G);return C})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=hi(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=Fi(t);function xn(){}function ji(C,M){var j,G,K,fe,pe,xe,de,et=Re[C+" "];if(et)return M?0:et.slice(0);for(pe=C,xe=[],de=n.preFilter;pe;){for(fe in j&&!(G=gt.exec(pe))||(G&&(pe=pe.slice(G[0].length)||pe),xe.push(K=[])),j=!1,(G=Ni.exec(pe))&&(j=G.shift(),K.push({value:j,type:G[0].replace(Pt," ")}),pe=pe.slice(j.length)),n.filter)!(G=pi[fe].exec(pe))||de[fe]&&!(G=de[fe](G))||(j=G.shift(),K.push({value:j,type:fe,matches:G}),pe=pe.slice(j.length));if(!j)break}return M?pe.length:pe?Pe.error(C):Re(C,xe).slice(0)}function Ji(C){for(var M=0,j=C.length,G="";M<j;M++)G+=C[M].value;return G}function Qi(C,M,j){var G=M.dir,K=M.next,fe=K||G,pe=j&&"parentNode"===fe,xe=J++;return M.first?function(de,et,Ae){for(;de=de[G];)if(1===de.nodeType||pe)return C(de,et,Ae);return!1}:function(de,et,Ae){var He,Ke,Ce=[z,xe];if(Ae){for(;de=de[G];)if((1===de.nodeType||pe)&&C(de,et,Ae))return!0}else for(;de=de[G];)if(1===de.nodeType||pe)if(Ke=de[Z]||(de[Z]={}),K&&ge(de,K))de=de[G]||de;else{if((He=Ke[fe])&&He[0]===z&&He[1]===xe)return Ce[2]=He[2];if((Ke[fe]=Ce)[2]=C(de,et,Ae))return!0}return!1}}function hn(C){return 1<C.length?function(M,j,G){for(var K=C.length;K--;)if(!C[K](M,j,G))return!1;return!0}:C[0]}function $i(C,M,j,G,K){for(var fe,pe=[],xe=0,de=C.length,et=null!=M;xe<de;xe++)(fe=C[xe])&&(j&&!j(fe,G,K)||(pe.push(fe),et&&M.push(xe)));return pe}function cn(C,M,j,G,K,fe){return G&&!G[Z]&&(G=cn(G)),K&&!K[Z]&&(K=cn(K,fe)),Tt(function(pe,xe,de,et){var Ae,He,Ke,Ce,bt=[],kt=[],Ot=xe.length,Zt=pe||function(ii,ht,Pi){for(var ni=0,en=ht.length;ni<en;ni++)Pe(ii,ht[ni],Pi);return Pi}(M||"*",de.nodeType?[de]:de,[]),Yt=!C||!pe&&M?Zt:$i(Zt,bt,C,de,et);if(j?j(Yt,Ce=K||(pe?C:Ot||G)?[]:xe,de,et):Ce=Yt,G)for(Ae=$i(Ce,kt),G(Ae,[],de,et),He=Ae.length;He--;)(Ke=Ae[He])&&(Ce[kt[He]]=!(Yt[kt[He]]=Ke));if(pe){if(K||C){if(K){for(Ae=[],He=Ce.length;He--;)(Ke=Ce[He])&&Ae.push(Yt[He]=Ke);K(null,Ce=[],Ae,et)}for(He=Ce.length;He--;)(Ke=Ce[He])&&-1<(Ae=K?a.call(pe,Ke):bt[He])&&(pe[Ae]=!(xe[Ae]=Ke))}}else Ce=$i(Ce===xe?Ce.splice(Ot,Ce.length):Ce),K?K(null,xe,Ce,et):W.apply(xe,Ce)})}function dn(C){for(var M,j,G,K=C.length,fe=n.relative[C[0].type],pe=fe||n.relative[" "],xe=fe?1:0,de=Qi(function(He){return He===M},pe,!0),et=Qi(function(He){return-1<a.call(M,He)},pe,!0),Ae=[function(He,Ke,Ce){var bt=!fe&&(Ce||Ke!=u)||((M=Ke).nodeType?de(He,Ke,Ce):et(He,Ke,Ce));return M=null,bt}];xe<K;xe++)if(j=n.relative[C[xe].type])Ae=[Qi(hn(Ae),j)];else{if((j=n.filter[C[xe].type].apply(null,C[xe].matches))[Z]){for(G=++xe;G<K&&!n.relative[C[G].type];G++);return cn(1<xe&&hn(Ae),1<xe&&Ji(C.slice(0,xe-1).concat({value:" "===C[xe-2].type?"*":""})).replace(Pt,"$1"),j,xe<G&&dn(C.slice(xe,G)),G<K&&dn(C=C.slice(G)),G<K&&Ji(C))}Ae.push(j)}return hn(Ae)}function fn(C,M){var j,G,K,fe,pe,xe,de=[],et=[],Ae=_e[C+" "];if(!Ae){for(M||(M=ji(C)),j=M.length;j--;)(Ae=dn(M[j]))[Z]?de.push(Ae):et.push(Ae);(Ae=_e(C,(G=et,fe=0<(K=de).length,pe=0<G.length,xe=function(He,Ke,Ce,bt,kt){var Ot,Zt,Yt,ii=0,ht="0",Pi=He&&[],ni=[],en=u,En=He||pe&&n.find.TAG("*",kt),Sn=z+=null==en?1:Math.random()||.1,Hn=En.length;for(kt&&(u=Ke==y||Ke||kt);ht!==Hn&&null!=(Ot=En[ht]);ht++){if(pe&&Ot){for(Zt=0,Ke||Ot.ownerDocument==y||(Ti(Ot),Ce=!L);Yt=G[Zt++];)if(Yt(Ot,Ke||y,Ce)){W.call(bt,Ot);break}kt&&(z=Sn)}fe&&((Ot=!Yt&&Ot)&&ii--,He&&Pi.push(Ot))}if(ii+=ht,fe&&ht!==ii){for(Zt=0;Yt=K[Zt++];)Yt(Pi,ni,Ke,Ce);if(He){if(0<ii)for(;ht--;)Pi[ht]||ni[ht]||(ni[ht]=Fe.call(bt));ni=$i(ni)}W.apply(bt,ni),kt&&!He&&0<ni.length&&1<ii+K.length&&l.uniqueSort(bt)}return kt&&(z=Sn,u=en),Pi},fe?Tt(xe):xe))).selector=C}return Ae}function Tn(C,M,j,G){var K,fe,pe,xe,de,et="function"==typeof C&&C,Ae=!G&&ji(C=et.selector||C);if(j=j||[],1===Ae.length){if(2<(fe=Ae[0]=Ae[0].slice(0)).length&&"ID"===(pe=fe[0]).type&&9===M.nodeType&&L&&n.relative[fe[1].type]){if(!(M=(n.find.ID(pe.matches[0].replace(St,Nt),M)||[])[0]))return j;et&&(M=M.parentNode),C=C.slice(fe.shift().value.length)}for(K=pi.needsContext.test(C)?0:fe.length;K--&&!n.relative[xe=(pe=fe[K]).type];)if((de=n.find[xe])&&(G=de(pe.matches[0].replace(St,Nt),Dt.test(fe[0].type)&&un(M.parentNode)||M))){if(fe.splice(K,1),!(C=G.length&&Ji(fe)))return W.apply(j,G),j;break}}return(et||fn(C,Ae))(G,M,!L,j,!M||Dt.test(C)&&un(M.parentNode)||M),j}xn.prototype=n.filters=n.pseudos,n.setFilters=new xn,O.sortStable=Z.split("").sort(_t).join("")===Z,Ti(),O.sortDetached=ut(function(C){return 1&C.compareDocumentPosition(y.createElement("fieldset"))}),l.find=Pe,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,Pe.compile=fn,Pe.select=Tn,Pe.setDocument=Ti,Pe.tokenize=ji,Pe.escape=l.escapeSelector,Pe.getText=l.text,Pe.isXML=l.isXMLDoc,Pe.selectors=l.expr,Pe.support=l.support,Pe.uniqueSort=l.uniqueSort}();var ye=function(t,n,u){for(var c=[],m=void 0!==u;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(m&&l(t).is(u))break;c.push(t)}return c},mt=function(t,n){for(var u=[];t;t=t.nextSibling)1===t.nodeType&&t!==n&&u.push(t);return u},Qt=l.expr.match.needsContext,At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ct(t,n,u){return b(n)?l.grep(t,function(c,m){return!!n.call(c,m,c)!==u}):n.nodeType?l.grep(t,function(c){return c===n!==u}):"string"!=typeof n?l.grep(t,function(c){return-1<a.call(n,c)!==u}):l.filter(n,t,u)}l.filter=function(t,n,u){var c=n[0];return u&&(t=":not("+t+")"),1===n.length&&1===c.nodeType?l.find.matchesSelector(c,t)?[c]:[]:l.find.matches(t,l.grep(n,function(m){return 1===m.nodeType}))},l.fn.extend({find:function(t){var n,u,c=this.length,m=this;if("string"!=typeof t)return this.pushStack(l(t).filter(function(){for(n=0;n<c;n++)if(l.contains(m[n],this))return!0}));for(u=this.pushStack([]),n=0;n<c;n++)l.find(t,m[n],u);return 1<c?l.uniqueSort(u):u},filter:function(t){return this.pushStack(Ct(this,t||[],!1))},not:function(t){return this.pushStack(Ct(this,t||[],!0))},is:function(t){return!!Ct(this,"string"==typeof t&&Qt.test(t)?l(t):t||[],!1).length}});var Mt,Bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(l.fn.init=function(t,n,u){var c,m;if(!t)return this;if(u=u||Mt,"string"==typeof t){if(!(c="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:Bt.exec(t))||!c[1]&&n)return!n||n.jquery?(n||u).find(t):this.constructor(n).find(t);if(c[1]){if(l.merge(this,l.parseHTML(c[1],(n=n instanceof l?n[0]:n)&&n.nodeType?n.ownerDocument||n:_,!0)),At.test(c[1])&&l.isPlainObject(n))for(c in n)b(this[c])?this[c](n[c]):this.attr(c,n[c]);return this}return(m=_.getElementById(c[2]))&&(this[0]=m,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):b(t)?void 0!==u.ready?u.ready(t):t(l):l.makeArray(t,this)}).prototype=l.fn,Mt=l(_);var Xt=/^(?:parents|prev(?:Until|All))/,$t={children:!0,contents:!0,next:!0,prev:!0};function pt(t,n){for(;(t=t[n])&&1!==t.nodeType;);return t}l.fn.extend({has:function(t){var n=l(t,this),u=n.length;return this.filter(function(){for(var c=0;c<u;c++)if(l.contains(this,n[c]))return!0})},closest:function(t,n){var u,c=0,m=this.length,y=[],T="string"!=typeof t&&l(t);if(!Qt.test(t))for(;c<m;c++)for(u=this[c];u&&u!==n;u=u.parentNode)if(u.nodeType<11&&(T?-1<T.index(u):1===u.nodeType&&l.find.matchesSelector(u,t))){y.push(u);break}return this.pushStack(1<y.length?l.uniqueSort(y):y)},index:function(t){return t?"string"==typeof t?a.call(l(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,n){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(t,n))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),l.each({parent:function(t){var n=t.parentNode;return n&&11!==n.nodeType?n:null},parents:function(t){return ye(t,"parentNode")},parentsUntil:function(t,n,u){return ye(t,"parentNode",u)},next:function(t){return pt(t,"nextSibling")},prev:function(t){return pt(t,"previousSibling")},nextAll:function(t){return ye(t,"nextSibling")},prevAll:function(t){return ye(t,"previousSibling")},nextUntil:function(t,n,u){return ye(t,"nextSibling",u)},prevUntil:function(t,n,u){return ye(t,"previousSibling",u)},siblings:function(t){return mt((t.parentNode||{}).firstChild,t)},children:function(t){return mt(t.firstChild)},contents:function(t){return null!=t.contentDocument&&h(t.contentDocument)?t.contentDocument:(ge(t,"template")&&(t=t.content||t),l.merge([],t.childNodes))}},function(t,n){l.fn[t]=function(u,c){var m=l.map(this,n,u);return"Until"!==t.slice(-5)&&(c=u),c&&"string"==typeof c&&(m=l.filter(c,m)),1<this.length&&($t[t]||l.uniqueSort(m),Xt.test(t)&&m.reverse()),this.pushStack(m)}});var ot=/[^\x20\t\r\n\f]+/g;function Ft(t){return t}function Ht(t){throw t}function ci(t,n,u,c){var m;try{t&&b(m=t.promise)?m.call(t).done(n).fail(u):t&&b(m=t.then)?m.call(t,n,u):n.apply(void 0,[t].slice(c))}catch(y){u.apply(void 0,[y])}}l.Callbacks=function(t){var u;t="string"==typeof t?(u={},l.each(t.match(ot)||[],function(z,J){u[J]=!0}),u):l.extend({},t);var c,m,y,T,L=[],F=[],B=-1,W=function(){for(T=T||t.once,y=c=!0;F.length;B=-1)for(m=F.shift();++B<L.length;)!1===L[B].apply(m[0],m[1])&&t.stopOnFalse&&(B=L.length,m=!1);t.memory||(m=!1),c=!1,T&&(L=m?[]:"")},Z={add:function(){return L&&(m&&!c&&(B=L.length-1,F.push(m)),function z(J){l.each(J,function(Se,Re){b(Re)?t.unique&&Z.has(Re)||L.push(Re):Re&&Re.length&&"string"!==Y(Re)&&z(Re)})}(arguments),m&&!c&&W()),this},remove:function(){return l.each(arguments,function(z,J){for(var Se;-1<(Se=l.inArray(J,L,Se));)L.splice(Se,1),Se<=B&&B--}),this},has:function(z){return z?-1<l.inArray(z,L):0<L.length},empty:function(){return L&&(L=[]),this},disable:function(){return T=F=[],L=m="",this},disabled:function(){return!L},lock:function(){return T=F=[],m||c||(L=m=""),this},locked:function(){return!!T},fireWith:function(z,J){return T||(J=[z,(J=J||[]).slice?J.slice():J],F.push(J),c||W()),this},fire:function(){return Z.fireWith(this,arguments),this},fired:function(){return!!y}};return Z},l.extend({Deferred:function(t){var n=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],u="pending",c={state:function(){return u},always:function(){return m.done(arguments).fail(arguments),this},catch:function(y){return c.then(null,y)},pipe:function(){var y=arguments;return l.Deferred(function(T){l.each(n,function(L,F){var B=b(y[F[4]])&&y[F[4]];m[F[1]](function(){var W=B&&B.apply(this,arguments);W&&b(W.promise)?W.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[F[0]+"With"](this,B?[W]:arguments)})}),y=null}).promise()},then:function(y,T,L){var F=0;function B(W,Z,z,J){return function(){var Se=this,Re=arguments,_e=function(){var _t,ai;if(!(W<F)){if((_t=z.apply(Se,Re))===Z.promise())throw new TypeError("Thenable self-resolution");b(ai=_t&&("object"==typeof _t||"function"==typeof _t)&&_t.then)?J?ai.call(_t,B(F,Z,Ft,J),B(F,Z,Ht,J)):(F++,ai.call(_t,B(F,Z,Ft,J),B(F,Z,Ht,J),B(F,Z,Ft,Z.notifyWith))):(z!==Ft&&(Se=void 0,Re=[_t]),(J||Z.resolveWith)(Se,Re))}},wt=J?_e:function(){try{_e()}catch(_t){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(_t,wt.error),F<=W+1&&(z!==Ht&&(Se=void 0,Re=[_t]),Z.rejectWith(Se,Re))}};W?wt():(l.Deferred.getErrorHook?wt.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(wt.error=l.Deferred.getStackHook()),e.setTimeout(wt))}}return l.Deferred(function(W){n[0][3].add(B(0,W,b(L)?L:Ft,W.notifyWith)),n[1][3].add(B(0,W,b(y)?y:Ft)),n[2][3].add(B(0,W,b(T)?T:Ht))}).promise()},promise:function(y){return null!=y?l.extend(y,c):c}},m={};return l.each(n,function(y,T){var L=T[2],F=T[5];c[T[1]]=L.add,F&&L.add(function(){u=F},n[3-y][2].disable,n[3-y][3].disable,n[0][2].lock,n[0][3].lock),L.add(T[3].fire),m[T[0]]=function(){return m[T[0]+"With"](this===m?void 0:this,arguments),this},m[T[0]+"With"]=L.fireWith}),c.promise(m),t&&t.call(m,m),m},when:function(t){var n=arguments.length,u=n,c=Array(u),m=d.call(arguments),y=l.Deferred(),T=function(L){return function(F){c[L]=this,m[L]=1<arguments.length?d.call(arguments):F,--n||y.resolveWith(c,m)}};if(n<=1&&(ci(t,y.done(T(u)).resolve,y.reject,!n),"pending"===y.state()||b(m[u]&&m[u].then)))return y.then();for(;u--;)ci(m[u],T(u),y.reject);return y.promise()}});var f=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&f.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},l.readyException=function(t){e.setTimeout(function(){throw t})};var D=l.Deferred();function U(){_.removeEventListener("DOMContentLoaded",U),e.removeEventListener("load",U),l.ready()}l.fn.ready=function(t){return D.then(t).catch(function(n){l.readyException(n)}),this},l.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--l.readyWait:l.isReady)||(l.isReady=!0)!==t&&0<--l.readyWait||D.resolveWith(_,[l])}}),l.ready.then=D.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?e.setTimeout(l.ready):(_.addEventListener("DOMContentLoaded",U),e.addEventListener("load",U));var $=function(t,n,u,c,m,y,T){var L=0,F=t.length,B=null==u;if("object"===Y(u))for(L in m=!0,u)$(t,n,L,u[L],!0,y,T);else if(void 0!==c&&(m=!0,b(c)||(T=!0),B&&(T?(n.call(t,c),n=null):(B=n,n=function(W,Z,z){return B.call(l(W),z)})),n))for(;L<F;L++)n(t[L],u,T?c:c.call(t[L],L,n(t[L],u)));return m?t:B?n.call(t):F?n(t[0],u):y},ne=/^-ms-/,ae=/-([a-z])/g;function oe(t,n){return n.toUpperCase()}function De(t){return t.replace(ne,"ms-").replace(ae,oe)}var Ge=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function ke(){this.expando=l.expando+ke.uid++}ke.uid=1,ke.prototype={cache:function(t){var n=t[this.expando];return n||(n={},Ge(t)&&(t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,configurable:!0}))),n},set:function(t,n,u){var c,m=this.cache(t);if("string"==typeof n)m[De(n)]=u;else for(c in n)m[De(c)]=n[c];return m},get:function(t,n){return void 0===n?this.cache(t):t[this.expando]&&t[this.expando][De(n)]},access:function(t,n,u){return void 0===n||n&&"string"==typeof n&&void 0===u?this.get(t,n):(this.set(t,n,u),void 0!==u?u:n)},remove:function(t,n){var u,c=t[this.expando];if(void 0!==c){if(void 0!==n)for((u=(n=Array.isArray(n)?n.map(De):(n=De(n))in c?[n]:n.match(ot)||[]).length);u--;)delete c[n[u]];(void 0===n||l.isEmptyObject(c))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var n=t[this.expando];return void 0!==n&&!l.isEmptyObject(n)}};var Q=new ke,Oe=new ke,Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vt=/[A-Z]/g;function Lt(t,n,u){var c,m;if(void 0===u&&1===t.nodeType)if(c="data-"+n.replace(vt,"-$&").toLowerCase(),"string"==typeof(u=t.getAttribute(c))){try{u="true"===(m=u)||"false"!==m&&("null"===m?null:m===+m+""?+m:Ne.test(m)?JSON.parse(m):m)}catch(y){}Oe.set(t,n,u)}else u=void 0;return u}l.extend({hasData:function(t){return Oe.hasData(t)||Q.hasData(t)},data:function(t,n,u){return Oe.access(t,n,u)},removeData:function(t,n){Oe.remove(t,n)},_data:function(t,n,u){return Q.access(t,n,u)},_removeData:function(t,n){Q.remove(t,n)}}),l.fn.extend({data:function(t,n){var u,c,m,y=this[0],T=y&&y.attributes;if(void 0===t){if(this.length&&(m=Oe.get(y),1===y.nodeType&&!Q.get(y,"hasDataAttrs"))){for(u=T.length;u--;)T[u]&&0===(c=T[u].name).indexOf("data-")&&(c=De(c.slice(5)),Lt(y,c,m[c]));Q.set(y,"hasDataAttrs",!0)}return m}return"object"==typeof t?this.each(function(){Oe.set(this,t)}):$(this,function(L){var F;if(y&&void 0===L)return void 0!==(F=Oe.get(y,t))||void 0!==(F=Lt(y,t))?F:void 0;this.each(function(){Oe.set(this,t,L)})},null,n,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Oe.remove(this,t)})}}),l.extend({queue:function(t,n,u){var c;if(t)return c=Q.get(t,n=(n||"fx")+"queue"),u&&(!c||Array.isArray(u)?c=Q.access(t,n,l.makeArray(u)):c.push(u)),c||[]},dequeue:function(t,n){var u=l.queue(t,n=n||"fx"),c=u.length,m=u.shift(),y=l._queueHooks(t,n);"inprogress"===m&&(m=u.shift(),c--),m&&("fx"===n&&u.unshift("inprogress"),delete y.stop,m.call(t,function(){l.dequeue(t,n)},y)),!c&&y&&y.empty.fire()},_queueHooks:function(t,n){var u=n+"queueHooks";return Q.get(t,u)||Q.access(t,u,{empty:l.Callbacks("once memory").add(function(){Q.remove(t,[n+"queue",u])})})}}),l.fn.extend({queue:function(t,n){var u=2;return"string"!=typeof t&&(n=t,t="fx",u--),arguments.length<u?l.queue(this[0],t):void 0===n?this:this.each(function(){var c=l.queue(this,t,n);l._queueHooks(this,t),"fx"===t&&"inprogress"!==c[0]&&l.dequeue(this,t)})},dequeue:function(t){return this.each(function(){l.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var u,c=1,m=l.Deferred(),y=this,T=this.length,L=function(){--c||m.resolveWith(y,[y])};for("string"!=typeof t&&(n=t,t=void 0),t=t||"fx";T--;)(u=Q.get(y[T],t+"queueHooks"))&&u.empty&&(c++,u.empty.add(L));return L(),m.promise(n)}});var Ci=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,v=new RegExp("^(?:([+-])=|)("+Ci+")([a-z%]*)$","i"),g=["Top","Right","Bottom","Left"],E=_.documentElement,S=function(t){return l.contains(t.ownerDocument,t)},q={composed:!0};E.getRootNode&&(S=function(t){return l.contains(t.ownerDocument,t)||t.getRootNode(q)===t.ownerDocument});var te=function(t,n){return"none"===(t=n||t).style.display||""===t.style.display&&S(t)&&"none"===l.css(t,"display")};function Ee(t,n,u,c){var m,y,T=20,L=c?function(){return c.cur()}:function(){return l.css(t,n,"")},F=L(),B=u&&u[3]||(l.cssNumber[n]?"":"px"),W=t.nodeType&&(l.cssNumber[n]||"px"!==B&&+F)&&v.exec(l.css(t,n));if(W&&W[3]!==B){for(B=B||W[3],W=+(F/=2)||1;T--;)l.style(t,n,W+B),(1-y)*(1-(y=L()/F||.5))<=0&&(T=0),W/=y;l.style(t,n,(W*=2)+B),u=u||[]}return u&&(W=+W||+F||0,m=u[1]?W+(u[1]+1)*u[2]:+u[2],c&&(c.unit=B,c.start=W,c.end=m)),m}var Ze={};function we(t,n){for(var u,c,m,y,T,L,F,B=[],W=0,Z=t.length;W<Z;W++)(c=t[W]).style&&(u=c.style.display,n?("none"===u&&(B[W]=Q.get(c,"display")||null,B[W]||(c.style.display="")),""===c.style.display&&te(c)&&(B[W]=(F=T=y=void 0,T=(m=c).ownerDocument,(F=Ze[L=m.nodeName])||(y=T.body.appendChild(T.createElement(L)),F=l.css(y,"display"),y.parentNode.removeChild(y),"none"===F&&(F="block"),Ze[L]=F)))):"none"!==u&&(B[W]="none",Q.set(c,"display",u)));for(W=0;W<Z;W++)null!=B[W]&&(t[W].style.display=B[W]);return t}l.fn.extend({show:function(){return we(this,!0)},hide:function(){return we(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){te(this)?l(this).show():l(this).hide()})}});var ct,st,jt=/^(?:checkbox|radio)$/i,k=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,H=/^$|^module$|\/(?:java|ecma)script/i;ct=_.createDocumentFragment().appendChild(_.createElement("div")),(st=_.createElement("input")).setAttribute("type","radio"),st.setAttribute("checked","checked"),st.setAttribute("name","t"),ct.appendChild(st),O.checkClone=ct.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.innerHTML="<textarea>x</textarea>",O.noCloneChecked=!!ct.cloneNode(!0).lastChild.defaultValue,ct.innerHTML="<option></option>",O.option=!!ct.lastChild;var N={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function V(t,n){var u;return u=void 0!==t.getElementsByTagName?t.getElementsByTagName(n||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(n||"*"):[],void 0===n||n&&ge(t,n)?l.merge([t],u):u}function le(t,n){for(var u=0,c=t.length;u<c;u++)Q.set(t[u],"globalEval",!n||Q.get(n[u],"globalEval"))}N.tbody=N.tfoot=N.colgroup=N.caption=N.thead,N.th=N.td,O.option||(N.optgroup=N.option=[1,"<select multiple='multiple'>","</select>"]);var ee=/<|&#?\w+;/;function he(t,n,u,c,m){for(var y,T,L,F,B,W,Z=n.createDocumentFragment(),z=[],J=0,Se=t.length;J<Se;J++)if((y=t[J])||0===y)if("object"===Y(y))l.merge(z,y.nodeType?[y]:y);else if(ee.test(y)){for(T=T||Z.appendChild(n.createElement("div")),L=(k.exec(y)||["",""])[1].toLowerCase(),T.innerHTML=(F=N[L]||N._default)[1]+l.htmlPrefilter(y)+F[2],W=F[0];W--;)T=T.lastChild;l.merge(z,T.childNodes),(T=Z.firstChild).textContent=""}else z.push(n.createTextNode(y));for(Z.textContent="",J=0;y=z[J++];)if(c&&-1<l.inArray(y,c))m&&m.push(y);else if(B=S(y),T=V(Z.appendChild(y),"script"),B&&le(T),u)for(W=0;y=T[W++];)H.test(y.type||"")&&u.push(y);return Z}var re=/^([^.]*)(?:\.(.+)|)/;function se(){return!0}function ve(){return!1}function me(t,n,u,c,m,y){var T,L;if("object"==typeof n){for(L in"string"!=typeof u&&(c=c||u,u=void 0),n)me(t,L,u,c,n[L],y);return t}if(null==c&&null==m?(m=u,c=u=void 0):null==m&&("string"==typeof u?(m=c,c=void 0):(m=c,c=u,u=void 0)),!1===m)m=ve;else if(!m)return t;return 1===y&&(T=m,(m=function(F){return l().off(F),T.apply(this,arguments)}).guid=T.guid||(T.guid=l.guid++)),t.each(function(){l.event.add(this,n,m,c,u)})}function ce(t,n,u){u?(Q.set(t,n,!1),l.event.add(t,n,{namespace:!1,handler:function(c){var m,y=Q.get(this,n);if(1&c.isTrigger&&this[n]){if(y)(l.event.special[n]||{}).delegateType&&c.stopPropagation();else if(y=d.call(arguments),Q.set(this,n,y),this[n](),m=Q.get(this,n),Q.set(this,n,!1),y!==m)return c.stopImmediatePropagation(),c.preventDefault(),m}else y&&(Q.set(this,n,l.event.trigger(y[0],y.slice(1),this)),c.stopPropagation(),c.isImmediatePropagationStopped=se)}})):void 0===Q.get(t,n)&&l.event.add(t,n,se)}l.event={global:{},add:function(t,n,u,c,m){var y,T,L,F,B,W,Z,z,J,Se,Re,_e=Q.get(t);if(Ge(t))for(u.handler&&(u=(y=u).handler,m=y.selector),m&&l.find.matchesSelector(E,m),u.guid||(u.guid=l.guid++),(F=_e.events)||(F=_e.events=Object.create(null)),(T=_e.handle)||(T=_e.handle=function(wt){return void 0!==l&&l.event.triggered!==wt.type?l.event.dispatch.apply(t,arguments):void 0}),B=(n=(n||"").match(ot)||[""]).length;B--;)J=Re=(L=re.exec(n[B])||[])[1],Se=(L[2]||"").split(".").sort(),J&&(Z=l.event.special[J]||{},Z=l.event.special[J=(m?Z.delegateType:Z.bindType)||J]||{},W=l.extend({type:J,origType:Re,data:c,handler:u,guid:u.guid,selector:m,needsContext:m&&l.expr.match.needsContext.test(m),namespace:Se.join(".")},y),(z=F[J])||((z=F[J]=[]).delegateCount=0,Z.setup&&!1!==Z.setup.call(t,c,Se,T)||t.addEventListener&&t.addEventListener(J,T)),Z.add&&(Z.add.call(t,W),W.handler.guid||(W.handler.guid=u.guid)),m?z.splice(z.delegateCount++,0,W):z.push(W),l.event.global[J]=!0)},remove:function(t,n,u,c,m){var y,T,L,F,B,W,Z,z,J,Se,Re,_e=Q.hasData(t)&&Q.get(t);if(_e&&(F=_e.events)){for(B=(n=(n||"").match(ot)||[""]).length;B--;)if(J=Re=(L=re.exec(n[B])||[])[1],Se=(L[2]||"").split(".").sort(),J){for(Z=l.event.special[J]||{},z=F[J=(c?Z.delegateType:Z.bindType)||J]||[],L=L[2]&&new RegExp("(^|\\.)"+Se.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=y=z.length;y--;)W=z[y],!m&&Re!==W.origType||u&&u.guid!==W.guid||L&&!L.test(W.namespace)||c&&c!==W.selector&&("**"!==c||!W.selector)||(z.splice(y,1),W.selector&&z.delegateCount--,Z.remove&&Z.remove.call(t,W));T&&!z.length&&(Z.teardown&&!1!==Z.teardown.call(t,Se,_e.handle)||l.removeEvent(t,J,_e.handle),delete F[J])}else for(J in F)l.event.remove(t,J+n[B],u,c,!0);l.isEmptyObject(F)&&Q.remove(t,"handle events")}},dispatch:function(t){var n,u,c,m,y,T,L=new Array(arguments.length),F=l.event.fix(t),B=(Q.get(this,"events")||Object.create(null))[F.type]||[],W=l.event.special[F.type]||{};for(L[0]=F,n=1;n<arguments.length;n++)L[n]=arguments[n];if(F.delegateTarget=this,!W.preDispatch||!1!==W.preDispatch.call(this,F)){for(T=l.event.handlers.call(this,F,B),n=0;(m=T[n++])&&!F.isPropagationStopped();)for(F.currentTarget=m.elem,u=0;(y=m.handlers[u++])&&!F.isImmediatePropagationStopped();)F.rnamespace&&!1!==y.namespace&&!F.rnamespace.test(y.namespace)||(F.handleObj=y,F.data=y.data,void 0!==(c=((l.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,L))&&!1===(F.result=c)&&(F.preventDefault(),F.stopPropagation()));return W.postDispatch&&W.postDispatch.call(this,F),F.result}},handlers:function(t,n){var u,c,m,y,T,L=[],F=n.delegateCount,B=t.target;if(F&&B.nodeType&&!("click"===t.type&&1<=t.button))for(;B!==this;B=B.parentNode||this)if(1===B.nodeType&&("click"!==t.type||!0!==B.disabled)){for(y=[],T={},u=0;u<F;u++)void 0===T[m=(c=n[u]).selector+" "]&&(T[m]=c.needsContext?-1<l(m,this).index(B):l.find(m,this,null,[B]).length),T[m]&&y.push(c);y.length&&L.push({elem:B,handlers:y})}return B=this,F<n.length&&L.push({elem:B,handlers:n.slice(F)}),L},addProp:function(t,n){Object.defineProperty(l.Event.prototype,t,{enumerable:!0,configurable:!0,get:b(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(u){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(t){return t[l.expando]?t:new l.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var n=this||t;return jt.test(n.type)&&n.click&&ge(n,"input")&&ce(n,"click",!0),!1},trigger:function(t){var n=this||t;return jt.test(n.type)&&n.click&&ge(n,"input")&&ce(n,"click"),!0},_default:function(t){var n=t.target;return jt.test(n.type)&&n.click&&ge(n,"input")&&Q.get(n,"click")||ge(n,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},l.removeEvent=function(t,n,u){t.removeEventListener&&t.removeEventListener(n,u)},l.Event=function(t,n){if(!(this instanceof l.Event))return new l.Event(t,n);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?se:ve,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&l.extend(this,n),this.timeStamp=t&&t.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:ve,isPropagationStopped:ve,isImmediatePropagationStopped:ve,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=se,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=se,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=se,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(t,n){function u(c){if(_.documentMode){var m=Q.get(this,"handle"),y=l.event.fix(c);y.type="focusin"===c.type?"focus":"blur",y.isSimulated=!0,m(c),y.target===y.currentTarget&&m(y)}else l.event.simulate(n,c.target,l.event.fix(c))}l.event.special[t]={setup:function(){var c;if(ce(this,t,!0),!_.documentMode)return!1;(c=Q.get(this,n))||this.addEventListener(n,u),Q.set(this,n,(c||0)+1)},trigger:function(){return ce(this,t),!0},teardown:function(){var c;if(!_.documentMode)return!1;(c=Q.get(this,n)-1)?Q.set(this,n,c):(this.removeEventListener(n,u),Q.remove(this,n))},_default:function(c){return Q.get(c.target,t)},delegateType:n},l.event.special[n]={setup:function(){var c=this.ownerDocument||this.document||this,m=_.documentMode?this:c,y=Q.get(m,n);y||(_.documentMode?this.addEventListener(n,u):c.addEventListener(t,u,!0)),Q.set(m,n,(y||0)+1)},teardown:function(){var c=this.ownerDocument||this.document||this,m=_.documentMode?this:c,y=Q.get(m,n)-1;y?Q.set(m,n,y):(_.documentMode?this.removeEventListener(n,u):c.removeEventListener(t,u,!0),Q.remove(m,n))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){l.event.special[t]={delegateType:n,bindType:n,handle:function(u){var c,m=u.relatedTarget,y=u.handleObj;return m&&(m===this||l.contains(this,m))||(u.type=y.origType,c=y.handler.apply(this,arguments),u.type=n),c}}}),l.fn.extend({on:function(t,n,u,c){return me(this,t,n,u,c)},one:function(t,n,u,c){return me(this,t,n,u,c,1)},off:function(t,n,u){var c,m;if(t&&t.preventDefault&&t.handleObj)return c=t.handleObj,l(t.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),this;if("object"==typeof t){for(m in t)this.off(m,n,t[m]);return this}return!1!==n&&"function"!=typeof n||(u=n,n=void 0),!1===u&&(u=ve),this.each(function(){l.event.remove(this,t,u,n)})}});var Je=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function je(t,n){return ge(t,"table")&&ge(11!==n.nodeType?n:n.firstChild,"tr")&&l(t).children("tbody")[0]||t}function Ie(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function nt(t,n){var u,c,m,y,T,L;if(1===n.nodeType){if(Q.hasData(t)&&(L=Q.get(t).events))for(m in Q.remove(n,"handle events"),L)for(u=0,c=L[m].length;u<c;u++)l.event.add(n,m,L[m][u]);Oe.hasData(t)&&(y=Oe.access(t),T=l.extend({},y),Oe.set(n,T))}}function We(t,n,u,c){n=r(n);var m,y,T,L,F,B,W=0,Z=t.length,z=Z-1,J=n[0],Se=b(J);if(Se||1<Z&&"string"==typeof J&&!O.checkClone&&Me.test(J))return t.each(function(Re){var _e=t.eq(Re);Se&&(n[0]=J.call(this,Re,_e.html())),We(_e,n,u,c)});if(Z&&(y=(m=he(n,t[0].ownerDocument,!1,t,c)).firstChild,1===m.childNodes.length&&(m=y),y||c)){for(L=(T=l.map(V(m,"script"),Ie)).length;W<Z;W++)F=m,W!==z&&(F=l.clone(F,!0,!0),L&&l.merge(T,V(F,"script"))),u.call(t[W],F,W);if(L)for(B=T[T.length-1].ownerDocument,l.map(T,lt),W=0;W<L;W++)H.test((F=T[W]).type||"")&&!Q.access(F,"globalEval")&&l.contains(B,F)&&(F.src&&"module"!==(F.type||"").toLowerCase()?l._evalUrl&&!F.noModule&&l._evalUrl(F.src,{nonce:F.nonce||F.getAttribute("nonce")},B):X(F.textContent.replace(ze,""),F,B))}return t}function $e(t,n,u){for(var c,m=n?l.filter(n,t):t,y=0;null!=(c=m[y]);y++)u||1!==c.nodeType||l.cleanData(V(c)),c.parentNode&&(u&&S(c)&&le(V(c,"script")),c.parentNode.removeChild(c));return t}l.extend({htmlPrefilter:function(t){return t},clone:function(t,n,u){var c,m,y,T,L,F,B,W=t.cloneNode(!0),Z=S(t);if(!(O.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||l.isXMLDoc(t)))for(T=V(W),c=0,m=(y=V(t)).length;c<m;c++)L=y[c],"input"===(B=(F=T[c]).nodeName.toLowerCase())&&jt.test(L.type)?F.checked=L.checked:"input"!==B&&"textarea"!==B||(F.defaultValue=L.defaultValue);if(n)if(u)for(y=y||V(t),T=T||V(W),c=0,m=y.length;c<m;c++)nt(y[c],T[c]);else nt(t,W);return 0<(T=V(W,"script")).length&&le(T,!Z&&V(t,"script")),W},cleanData:function(t){for(var n,u,c,m=l.event.special,y=0;void 0!==(u=t[y]);y++)if(Ge(u)){if(n=u[Q.expando]){if(n.events)for(c in n.events)m[c]?l.event.remove(u,c):l.removeEvent(u,c,n.handle);u[Q.expando]=void 0}u[Oe.expando]&&(u[Oe.expando]=void 0)}}}),l.fn.extend({detach:function(t){return $e(this,t,!0)},remove:function(t){return $e(this,t)},text:function(t){return $(this,function(n){return void 0===n?l.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=n)})},null,t,arguments.length)},append:function(){return We(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,t).appendChild(t)})},prepend:function(){return We(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var n=je(this,t);n.insertBefore(t,n.firstChild)}})},before:function(){return We(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return We(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,n=0;null!=(t=this[n]);n++)1===t.nodeType&&(l.cleanData(V(t,!1)),t.textContent="");return this},clone:function(t,n){return t=null!=t&&t,n=null==n?t:n,this.map(function(){return l.clone(this,t,n)})},html:function(t){return $(this,function(n){var u=this[0]||{},c=0,m=this.length;if(void 0===n&&1===u.nodeType)return u.innerHTML;if("string"==typeof n&&!Je.test(n)&&!N[(k.exec(n)||["",""])[1].toLowerCase()]){n=l.htmlPrefilter(n);try{for(;c<m;c++)1===(u=this[c]||{}).nodeType&&(l.cleanData(V(u,!1)),u.innerHTML=n);u=0}catch(y){}}u&&this.empty().append(n)},null,t,arguments.length)},replaceWith:function(){var t=[];return We(this,arguments,function(n){var u=this.parentNode;l.inArray(this,t)<0&&(l.cleanData(V(this)),u&&u.replaceChild(n,this))},t)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){l.fn[t]=function(u){for(var c,m=[],y=l(u),T=y.length-1,L=0;L<=T;L++)c=L===T?this:this.clone(!0),l(y[L])[n](c),o.apply(m,c.get());return this.pushStack(m)}});var Le=new RegExp("^("+Ci+")(?!px)[a-z%]+$","i"),Be=/^--/,Ye=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},tt=function(t,n,u){var c,m,y={};for(m in n)y[m]=t.style[m],t.style[m]=n[m];for(m in c=u.call(t),n)t.style[m]=y[m];return c},it=new RegExp(g.join("|"),"i");function rt(t,n,u){var c,m,y,T,L=Be.test(n),F=t.style;return(u=u||Ye(t))&&(T=u.getPropertyValue(n)||u[n],L&&T&&(T=T.replace(Pt,"$1")||void 0),""!==T||S(t)||(T=l.style(t,n)),!O.pixelBoxStyles()&&Le.test(T)&&it.test(n)&&(c=F.width,m=F.minWidth,y=F.maxWidth,F.minWidth=F.maxWidth=F.width=T,T=u.width,F.width=c,F.minWidth=m,F.maxWidth=y)),void 0!==T?T+"":T}function Rt(t,n){return{get:function(){if(!t())return(this.get=n).apply(this,arguments);delete this.get}}}!function(){function t(){if(B){F.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",B.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",E.appendChild(F).appendChild(B);var W=e.getComputedStyle(B);u="1%"!==W.top,L=12===n(W.marginLeft),B.style.right="60%",y=36===n(W.right),c=36===n(W.width),B.style.position="absolute",m=12===n(B.offsetWidth/3),E.removeChild(F),B=null}}function n(W){return Math.round(parseFloat(W))}var u,c,m,y,T,L,F=_.createElement("div"),B=_.createElement("div");B.style&&(B.style.backgroundClip="content-box",B.cloneNode(!0).style.backgroundClip="",O.clearCloneStyle="content-box"===B.style.backgroundClip,l.extend(O,{boxSizingReliable:function(){return t(),c},pixelBoxStyles:function(){return t(),y},pixelPosition:function(){return t(),u},reliableMarginLeft:function(){return t(),L},scrollboxSize:function(){return t(),m},reliableTrDimensions:function(){var W,Z,z,J;return null==T&&(W=_.createElement("table"),Z=_.createElement("tr"),z=_.createElement("div"),W.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Z.style.cssText="box-sizing:content-box;border:1px solid",Z.style.height="1px",z.style.height="9px",z.style.display="block",E.appendChild(W).appendChild(Z).appendChild(z),J=e.getComputedStyle(Z),T=parseInt(J.height,10)+parseInt(J.borderTopWidth,10)+parseInt(J.borderBottomWidth,10)===Z.offsetHeight,E.removeChild(W)),T}}))}();var Wt=["Webkit","Moz","ms"],Ut=_.createElement("div").style,Kt={};function Gt(t){return l.cssProps[t]||Kt[t]||(t in Ut?t:Kt[t]=function(u){for(var c=u[0].toUpperCase()+u.slice(1),m=Wt.length;m--;)if((u=Wt[m]+c)in Ut)return u}(t)||t)}var yt=/^(none|table(?!-c[ea]).+)/,ri={position:"absolute",visibility:"hidden",display:"block"},oi={letterSpacing:"0",fontWeight:"400"};function Ei(t,n,u){var c=v.exec(n);return c?Math.max(0,c[2]-(u||0))+(c[3]||"px"):n}function si(t,n,u,c,m,y){var T="width"===n?1:0,L=0,F=0,B=0;if(u===(c?"border":"content"))return 0;for(;T<4;T+=2)"margin"===u&&(B+=l.css(t,u+g[T],!0,m)),c?("content"===u&&(F-=l.css(t,"padding"+g[T],!0,m)),"margin"!==u&&(F-=l.css(t,"border"+g[T]+"Width",!0,m))):(F+=l.css(t,"padding"+g[T],!0,m),"padding"!==u?F+=l.css(t,"border"+g[T]+"Width",!0,m):L+=l.css(t,"border"+g[T]+"Width",!0,m));return!c&&0<=y&&(F+=Math.max(0,Math.ceil(t["offset"+n[0].toUpperCase()+n.slice(1)]-y-F-L-.5))||0),F+B}function qt(t,n,u){var c=Ye(t),m=(!O.boxSizingReliable()||u)&&"border-box"===l.css(t,"boxSizing",!1,c),y=m,T=rt(t,n,c),L="offset"+n[0].toUpperCase()+n.slice(1);if(Le.test(T)){if(!u)return T;T="auto"}return(!O.boxSizingReliable()&&m||!O.reliableTrDimensions()&&ge(t,"tr")||"auto"===T||!parseFloat(T)&&"inline"===l.css(t,"display",!1,c))&&t.getClientRects().length&&(m="border-box"===l.css(t,"boxSizing",!1,c),(y=L in t)&&(T=t[L])),(T=parseFloat(T)||0)+si(t,n,u||(m?"border":"content"),y,c,T)+"px"}function dt(t,n,u,c,m){return new dt.prototype.init(t,n,u,c,m)}l.extend({cssHooks:{opacity:{get:function(t,n){if(n){var u=rt(t,"opacity");return""===u?"1":u}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,n,u,c){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var m,y,T,L=De(n),F=Be.test(n),B=t.style;if(F||(n=Gt(L)),T=l.cssHooks[n]||l.cssHooks[L],void 0===u)return T&&"get"in T&&void 0!==(m=T.get(t,!1,c))?m:B[n];"string"==(y=typeof u)&&(m=v.exec(u))&&m[1]&&(u=Ee(t,n,m),y="number"),null!=u&&u==u&&("number"!==y||F||(u+=m&&m[3]||(l.cssNumber[L]?"":"px")),O.clearCloneStyle||""!==u||0!==n.indexOf("background")||(B[n]="inherit"),T&&"set"in T&&void 0===(u=T.set(t,u,c))||(F?B.setProperty(n,u):B[n]=u))}},css:function(t,n,u,c){var m,y,T,L=De(n);return Be.test(n)||(n=Gt(L)),(T=l.cssHooks[n]||l.cssHooks[L])&&"get"in T&&(m=T.get(t,!0,u)),void 0===m&&(m=rt(t,n,c)),"normal"===m&&n in oi&&(m=oi[n]),""===u||u?(y=parseFloat(m),!0===u||isFinite(y)?y||0:m):m}}),l.each(["height","width"],function(t,n){l.cssHooks[n]={get:function(u,c,m){if(c)return!yt.test(l.css(u,"display"))||u.getClientRects().length&&u.getBoundingClientRect().width?qt(u,n,m):tt(u,ri,function(){return qt(u,n,m)})},set:function(u,c,m){var y,T=Ye(u),L=!O.scrollboxSize()&&"absolute"===T.position,F=(L||m)&&"border-box"===l.css(u,"boxSizing",!1,T),B=m?si(u,n,m,F,T):0;return F&&L&&(B-=Math.ceil(u["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(T[n])-si(u,n,"border",!1,T)-.5)),B&&(y=v.exec(c))&&"px"!==(y[3]||"px")&&(u.style[n]=c,c=l.css(u,n)),Ei(0,c,B)}}}),l.cssHooks.marginLeft=Rt(O.reliableMarginLeft,function(t,n){if(n)return(parseFloat(rt(t,"marginLeft"))||t.getBoundingClientRect().left-tt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(t,n){l.cssHooks[t+n]={expand:function(u){for(var c=0,m={},y="string"==typeof u?u.split(" "):[u];c<4;c++)m[t+g[c]+n]=y[c]||y[c-2]||y[0];return m}},"margin"!==t&&(l.cssHooks[t+n].set=Ei)}),l.fn.extend({css:function(t,n){return $(this,function(u,c,m){var y,T,L={},F=0;if(Array.isArray(c)){for(y=Ye(u),T=c.length;F<T;F++)L[c[F]]=l.css(u,c[F],!1,y);return L}return void 0!==m?l.style(u,c,m):l.css(u,c)},t,n,1<arguments.length)}}),((l.Tween=dt).prototype={constructor:dt,init:function(t,n,u,c,m,y){this.elem=t,this.prop=u,this.easing=m||l.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=c,this.unit=y||(l.cssNumber[u]?"":"px")},cur:function(){var t=dt.propHooks[this.prop];return t&&t.get?t.get(this):dt.propHooks._default.get(this)},run:function(t){var n,u=dt.propHooks[this.prop];return this.pos=n=this.options.duration?l.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):dt.propHooks._default.set(this),this}}).init.prototype=dt.prototype,(dt.propHooks={_default:{get:function(t){var n;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(n=l.css(t.elem,t.prop,""))&&"auto"!==n?n:0},set:function(t){l.fx.step[t.prop]?l.fx.step[t.prop](t):1!==t.elem.nodeType||!l.cssHooks[t.prop]&&null==t.elem.style[Gt(t.prop)]?t.elem[t.prop]=t.now:l.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=dt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},l.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},l.fx=dt.prototype.init,l.fx.step={};var ei,di,ti,Li,Wi=/^(?:toggle|show|hide)$/,Ri=/queueHooks$/;function Hi(){di&&(!1===_.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(Hi):e.setTimeout(Hi,l.fx.interval),l.fx.tick())}function Ui(){return e.setTimeout(function(){ei=void 0}),ei=Date.now()}function gi(t,n){var u,c=0,m={height:t};for(n=n?1:0;c<4;c+=2-n)m["margin"+(u=g[c])]=m["padding"+u]=t;return n&&(m.opacity=m.width=t),m}function Gi(t,n,u){for(var c,m=(Vt.tweeners[n]||[]).concat(Vt.tweeners["*"]),y=0,T=m.length;y<T;y++)if(c=m[y].call(u,n,t))return c}function Vt(t,n,u){var c,m,y=0,T=Vt.prefilters.length,L=l.Deferred().always(function(){delete F.elem}),F=function(){if(m)return!1;for(var Z=ei||Ui(),z=Math.max(0,B.startTime+B.duration-Z),J=1-(z/B.duration||0),Se=0,Re=B.tweens.length;Se<Re;Se++)B.tweens[Se].run(J);return L.notifyWith(t,[B,J,z]),J<1&&Re?z:(Re||L.notifyWith(t,[B,1,0]),L.resolveWith(t,[B]),!1)},B=L.promise({elem:t,props:l.extend({},n),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},u),originalProperties:n,originalOptions:u,startTime:ei||Ui(),duration:u.duration,tweens:[],createTween:function(Z,z){var J=l.Tween(t,B.opts,Z,z,B.opts.specialEasing[Z]||B.opts.easing);return B.tweens.push(J),J},stop:function(Z){var z=0,J=Z?B.tweens.length:0;if(m)return this;for(m=!0;z<J;z++)B.tweens[z].run(1);return Z?(L.notifyWith(t,[B,1,0]),L.resolveWith(t,[B,Z])):L.rejectWith(t,[B,Z]),this}}),W=B.props;for(function(Z,z){var J,Se,Re,_e,wt;for(J in Z)if(Re=z[Se=De(J)],_e=Z[J],Array.isArray(_e)&&(Re=_e[1],_e=Z[J]=_e[0]),J!==Se&&(Z[Se]=_e,delete Z[J]),(wt=l.cssHooks[Se])&&"expand"in wt)for(J in _e=wt.expand(_e),delete Z[Se],_e)J in Z||(Z[J]=_e[J],z[J]=Re);else z[Se]=Re}(W,B.opts.specialEasing);y<T;y++)if(c=Vt.prefilters[y].call(B,t,W,B.opts))return b(c.stop)&&(l._queueHooks(B.elem,B.opts.queue).stop=c.stop.bind(c)),c;return l.map(W,Gi,B),b(B.opts.start)&&B.opts.start.call(t,B),B.progress(B.opts.progress).done(B.opts.done,B.opts.complete).fail(B.opts.fail).always(B.opts.always),l.fx.timer(l.extend(F,{elem:t,anim:B,queue:B.opts.queue})),B}l.Animation=l.extend(Vt,{tweeners:{"*":[function(t,n){var u=this.createTween(t,n);return Ee(u.elem,t,v.exec(n),u),u}]},tweener:function(t,n){b(t)?(n=t,t=["*"]):t=t.match(ot);for(var u,c=0,m=t.length;c<m;c++)(Vt.tweeners[u=t[c]]=Vt.tweeners[u]||[]).unshift(n)},prefilters:[function(t,n,u){var c,m,y,T,L,F,B,W,Z="width"in n||"height"in n,z=this,J={},Se=t.style,Re=t.nodeType&&te(t),_e=Q.get(t,"fxshow");for(c in u.queue||(null==(T=l._queueHooks(t,"fx")).unqueued&&(T.unqueued=0,L=T.empty.fire,T.empty.fire=function(){T.unqueued||L()}),T.unqueued++,z.always(function(){z.always(function(){T.unqueued--,l.queue(t,"fx").length||T.empty.fire()})})),n)if(Wi.test(m=n[c])){if(delete n[c],y=y||"toggle"===m,m===(Re?"hide":"show")){if("show"!==m||!_e||void 0===_e[c])continue;Re=!0}J[c]=_e&&_e[c]||l.style(t,c)}if((F=!l.isEmptyObject(n))||!l.isEmptyObject(J))for(c in Z&&1===t.nodeType&&(u.overflow=[Se.overflow,Se.overflowX,Se.overflowY],null==(B=_e&&_e.display)&&(B=Q.get(t,"display")),"none"===(W=l.css(t,"display"))&&(B?W=B:(we([t],!0),B=t.style.display||B,W=l.css(t,"display"),we([t]))),("inline"===W||"inline-block"===W&&null!=B)&&"none"===l.css(t,"float")&&(F||(z.done(function(){Se.display=B}),null==B&&(B="none"===(W=Se.display)?"":W)),Se.display="inline-block")),u.overflow&&(Se.overflow="hidden",z.always(function(){Se.overflow=u.overflow[0],Se.overflowX=u.overflow[1],Se.overflowY=u.overflow[2]})),F=!1,J)F||(_e?"hidden"in _e&&(Re=_e.hidden):_e=Q.access(t,"fxshow",{display:B}),y&&(_e.hidden=!Re),Re&&we([t],!0),z.done(function(){for(c in Re||we([t]),Q.remove(t,"fxshow"),J)l.style(t,c,J[c])})),F=Gi(Re?_e[c]:0,c,z),c in _e||(_e[c]=F.start,Re&&(F.end=F.start,F.start=0))}],prefilter:function(t,n){n?Vt.prefilters.unshift(t):Vt.prefilters.push(t)}}),l.speed=function(t,n,u){var c=t&&"object"==typeof t?l.extend({},t):{complete:u||!u&&n||b(t)&&t,duration:t,easing:u&&n||n&&!b(n)&&n};return l.fx.off?c.duration=0:"number"!=typeof c.duration&&(c.duration=c.duration in l.fx.speeds?l.fx.speeds[c.duration]:l.fx.speeds._default),null!=c.queue&&!0!==c.queue||(c.queue="fx"),c.old=c.complete,c.complete=function(){b(c.old)&&c.old.call(this),c.queue&&l.dequeue(this,c.queue)},c},l.fn.extend({fadeTo:function(t,n,u,c){return this.filter(te).css("opacity",0).show().end().animate({opacity:n},t,u,c)},animate:function(t,n,u,c){var m=l.isEmptyObject(t),y=l.speed(n,u,c),T=function(){var L=Vt(this,l.extend({},t),y);(m||Q.get(this,"finish"))&&L.stop(!0)};return T.finish=T,m||!1===y.queue?this.each(T):this.queue(y.queue,T)},stop:function(t,n,u){var c=function(m){var y=m.stop;delete m.stop,y(u)};return"string"!=typeof t&&(u=n,n=t,t=void 0),n&&this.queue(t||"fx",[]),this.each(function(){var m=!0,y=null!=t&&t+"queueHooks",T=l.timers,L=Q.get(this);if(y)L[y]&&L[y].stop&&c(L[y]);else for(y in L)L[y]&&L[y].stop&&Ri.test(y)&&c(L[y]);for(y=T.length;y--;)T[y].elem!==this||null!=t&&T[y].queue!==t||(T[y].anim.stop(u),m=!1,T.splice(y,1));!m&&u||l.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var n,u=Q.get(this),c=u[t+"queue"],m=u[t+"queueHooks"],y=l.timers,T=c?c.length:0;for(u.finish=!0,l.queue(this,t,[]),m&&m.stop&&m.stop.call(this,!0),n=y.length;n--;)y[n].elem===this&&y[n].queue===t&&(y[n].anim.stop(!0),y.splice(n,1));for(n=0;n<T;n++)c[n]&&c[n].finish&&c[n].finish.call(this);delete u.finish})}}),l.each(["toggle","show","hide"],function(t,n){var u=l.fn[n];l.fn[n]=function(c,m,y){return null==c||"boolean"==typeof c?u.apply(this,arguments):this.animate(gi(n,!0),c,m,y)}}),l.each({slideDown:gi("show"),slideUp:gi("hide"),slideToggle:gi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){l.fn[t]=function(u,c,m){return this.animate(n,u,c,m)}}),l.timers=[],l.fx.tick=function(){var t,n=0,u=l.timers;for(ei=Date.now();n<u.length;n++)(t=u[n])()||u[n]!==t||u.splice(n--,1);u.length||l.fx.stop(),ei=void 0},l.fx.timer=function(t){l.timers.push(t),l.fx.start()},l.fx.interval=13,l.fx.start=function(){di||(di=!0,Hi())},l.fx.stop=function(){di=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(t,n){return t=l.fx&&l.fx.speeds[t]||t,this.queue(n=n||"fx",function(u,c){var m=e.setTimeout(u,t);c.stop=function(){e.clearTimeout(m)}})},ti=_.createElement("input"),Li=_.createElement("select").appendChild(_.createElement("option")),ti.type="checkbox",O.checkOn=""!==ti.value,O.optSelected=Li.selected,(ti=_.createElement("input")).value="t",ti.type="radio",O.radioValue="t"===ti.value;var qi,mi=l.expr.attrHandle;l.fn.extend({attr:function(t,n){return $(this,l.attr,t,n,1<arguments.length)},removeAttr:function(t){return this.each(function(){l.removeAttr(this,t)})}}),l.extend({attr:function(t,n,u){var c,m,y=t.nodeType;if(3!==y&&8!==y&&2!==y)return void 0===t.getAttribute?l.prop(t,n,u):(1===y&&l.isXMLDoc(t)||(m=l.attrHooks[n.toLowerCase()]||(l.expr.match.bool.test(n)?qi:void 0)),void 0!==u?null===u?void l.removeAttr(t,n):m&&"set"in m&&void 0!==(c=m.set(t,u,n))?c:(t.setAttribute(n,u+""),u):m&&"get"in m&&null!==(c=m.get(t,n))?c:null==(c=l.find.attr(t,n))?void 0:c)},attrHooks:{type:{set:function(t,n){if(!O.radioValue&&"radio"===n&&ge(t,"input")){var u=t.value;return t.setAttribute("type",n),u&&(t.value=u),n}}}},removeAttr:function(t,n){var u,c=0,m=n&&n.match(ot);if(m&&1===t.nodeType)for(;u=m[c++];)t.removeAttribute(u)}}),qi={set:function(t,n,u){return!1===n?l.removeAttr(t,u):t.setAttribute(u,u),u}},l.each(l.expr.match.bool.source.match(/\w+/g),function(t,n){var u=mi[n]||l.find.attr;mi[n]=function(c,m,y){var T,L,F=m.toLowerCase();return y||(L=mi[F],mi[F]=T,T=null!=u(c,m,y)?F:null,mi[F]=L),T}});var Vi=/^(?:input|select|textarea|button)$/i,tn=/^(?:a|area)$/i;function fi(t){return(t.match(ot)||[]).join(" ")}function It(t){return t.getAttribute&&t.getAttribute("class")||""}function vi(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(ot)||[]}l.fn.extend({prop:function(t,n){return $(this,l.prop,t,n,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[l.propFix[t]||t]})}}),l.extend({prop:function(t,n,u){var c,m,y=t.nodeType;if(3!==y&&8!==y&&2!==y)return 1===y&&l.isXMLDoc(t)||(m=l.propHooks[n=l.propFix[n]||n]),void 0!==u?m&&"set"in m&&void 0!==(c=m.set(t,u,n))?c:t[n]=u:m&&"get"in m&&null!==(c=m.get(t,n))?c:t[n]},propHooks:{tabIndex:{get:function(t){var n=l.find.attr(t,"tabindex");return n?parseInt(n,10):Vi.test(t.nodeName)||tn.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),O.optSelected||(l.propHooks.selected={get:function(t){return null},set:function(t){}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this}),l.fn.extend({addClass:function(t){var n,u,c,m,y,T;return b(t)?this.each(function(L){l(this).addClass(t.call(this,L,It(this)))}):(n=vi(t)).length?this.each(function(){if(c=It(this),u=1===this.nodeType&&" "+fi(c)+" "){for(y=0;y<n.length;y++)u.indexOf(" "+(m=n[y])+" ")<0&&(u+=m+" ");T=fi(u),c!==T&&this.setAttribute("class",T)}}):this},removeClass:function(t){var n,u,c,m,y,T;return b(t)?this.each(function(L){l(this).removeClass(t.call(this,L,It(this)))}):arguments.length?(n=vi(t)).length?this.each(function(){if(c=It(this),u=1===this.nodeType&&" "+fi(c)+" "){for(y=0;y<n.length;y++)for(m=n[y];-1<u.indexOf(" "+m+" ");)u=u.replace(" "+m+" "," ");T=fi(u),c!==T&&this.setAttribute("class",T)}}):this:this.attr("class","")},toggleClass:function(t,n){var u,c,m,y,T=typeof t,L="string"===T||Array.isArray(t);return b(t)?this.each(function(F){l(this).toggleClass(t.call(this,F,It(this),n),n)}):"boolean"==typeof n&&L?n?this.addClass(t):this.removeClass(t):(u=vi(t),this.each(function(){if(L)for(y=l(this),m=0;m<u.length;m++)y.hasClass(c=u[m])?y.removeClass(c):y.addClass(c);else void 0!==t&&"boolean"!==T||((c=It(this))&&Q.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===t?"":Q.get(this,"__className__")||""))}))},hasClass:function(t){var n,u,c=0;for(n=" "+t+" ";u=this[c++];)if(1===u.nodeType&&-1<(" "+fi(It(u))+" ").indexOf(n))return!0;return!1}});var Zi=/\r/g;l.fn.extend({val:function(t){var n,u,c,m=this[0];return arguments.length?(c=b(t),this.each(function(y){var T;1===this.nodeType&&(null==(T=c?t.call(this,y,l(this).val()):t)?T="":"number"==typeof T?T+="":Array.isArray(T)&&(T=l.map(T,function(L){return null==L?"":L+""})),(n=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,T,"value")||(this.value=T))})):m?(n=l.valHooks[m.type]||l.valHooks[m.nodeName.toLowerCase()])&&"get"in n&&void 0!==(u=n.get(m,"value"))?u:"string"==typeof(u=m.value)?u.replace(Zi,""):null==u?"":u:void 0}}),l.extend({valHooks:{option:{get:function(t){var n=l.find.attr(t,"value");return null!=n?n:fi(l.text(t))}},select:{get:function(t){var n,u,c,m=t.options,y=t.selectedIndex,T="select-one"===t.type,L=T?null:[],F=T?y+1:m.length;for(c=y<0?F:T?y:0;c<F;c++)if(((u=m[c]).selected||c===y)&&!u.disabled&&(!u.parentNode.disabled||!ge(u.parentNode,"optgroup"))){if(n=l(u).val(),T)return n;L.push(n)}return L},set:function(t,n){for(var u,c,m=t.options,y=l.makeArray(n),T=m.length;T--;)((c=m[T]).selected=-1<l.inArray(l.valHooks.option.get(c),y))&&(u=!0);return u||(t.selectedIndex=-1),y}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(t,n){if(Array.isArray(n))return t.checked=-1<l.inArray(l(t).val(),n)}},O.checkOn||(l.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var yi=e.location,_i={guid:Date.now()},Di=/\?/;l.parseXML=function(t){var n,u;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(c){}return u=n&&n.getElementsByTagName("parsererror")[0],n&&!u||l.error("Invalid XML: "+(u?l.map(u.childNodes,function(c){return c.textContent}).join("\n"):t)),n};var ki=/^(?:focusinfocus|focusoutblur)$/,Mi=function(t){t.stopPropagation()};l.extend(l.event,{trigger:function(t,n,u,c){var m,y,T,L,F,B,W,Z,z=[u||_],J=x.call(t,"type")?t.type:t,Se=x.call(t,"namespace")?t.namespace.split("."):[];if(y=Z=T=u=u||_,3!==u.nodeType&&8!==u.nodeType&&!ki.test(J+l.event.triggered)&&(-1<J.indexOf(".")&&(J=(Se=J.split(".")).shift(),Se.sort()),F=J.indexOf(":")<0&&"on"+J,(t=t[l.expando]?t:new l.Event(J,"object"==typeof t&&t)).isTrigger=c?2:3,t.namespace=Se.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+Se.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=u),n=null==n?[t]:l.makeArray(n,[t]),W=l.event.special[J]||{},c||!W.trigger||!1!==W.trigger.apply(u,n))){if(!c&&!W.noBubble&&!R(u)){for(ki.test((L=W.delegateType||J)+J)||(y=y.parentNode);y;y=y.parentNode)z.push(y),T=y;T===(u.ownerDocument||_)&&z.push(T.defaultView||T.parentWindow||e)}for(m=0;(y=z[m++])&&!t.isPropagationStopped();)Z=y,t.type=1<m?L:W.bindType||J,(B=(Q.get(y,"events")||Object.create(null))[t.type]&&Q.get(y,"handle"))&&B.apply(y,n),(B=F&&y[F])&&B.apply&&Ge(y)&&(t.result=B.apply(y,n),!1===t.result&&t.preventDefault());return t.type=J,c||t.isDefaultPrevented()||W._default&&!1!==W._default.apply(z.pop(),n)||!Ge(u)||F&&b(u[J])&&!R(u)&&((T=u[F])&&(u[F]=null),l.event.triggered=J,t.isPropagationStopped()&&Z.addEventListener(J,Mi),u[J](),t.isPropagationStopped()&&Z.removeEventListener(J,Mi),l.event.triggered=void 0,T&&(u[F]=T)),t.result}},simulate:function(t,n,u){var c=l.extend(new l.Event,u,{type:t,isSimulated:!0});l.event.trigger(c,null,n)}}),l.fn.extend({trigger:function(t,n){return this.each(function(){l.event.trigger(t,n,this)})},triggerHandler:function(t,n){var u=this[0];if(u)return l.event.trigger(t,n,u,!0)}});var Xi=/\[\]$/,Yi=/\r?\n/g,nn=/^(?:submit|button|image|reset|file)$/i,Bi=/^(?:input|select|textarea|keygen)/i;function Oi(t,n,u,c){var m;if(Array.isArray(n))l.each(n,function(y,T){u||Xi.test(t)?c(t,T):Oi(t+"["+("object"==typeof T&&null!=T?y:"")+"]",T,u,c)});else if(u||"object"!==Y(n))c(t,n);else for(m in n)Oi(t+"["+m+"]",n[m],u,c)}l.param=function(t,n){var u,c=[],m=function(y,T){var L=b(T)?T():T;c[c.length]=encodeURIComponent(y)+"="+encodeURIComponent(null==L?"":L)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!l.isPlainObject(t))l.each(t,function(){m(this.name,this.value)});else for(u in t)Oi(u,t[u],n,m);return c.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=l.prop(this,"elements");return t?l.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!l(this).is(":disabled")&&Bi.test(this.nodeName)&&!nn.test(t)&&(this.checked||!jt.test(t))}).map(function(t,n){var u=l(this).val();return null==u?null:Array.isArray(u)?l.map(u,function(c){return{name:n.name,value:c.replace(Yi,"\r\n")}}):{name:n.name,value:u.replace(Yi,"\r\n")}}).get()}});var bn=/%20/g,Pn=/#.*$/,Cn=/([?&])_=[^&]*/,Rn=/^(.*?):[ \t]*([^\r\n]*)$/gm,_n=/^(?:GET|HEAD)$/,Dn=/^\/\//,pn={},rn={},gn="*/".concat("*"),on=_.createElement("a");function mn(t){return function(n,u){"string"!=typeof n&&(u=n,n="*");var c,m=0,y=n.toLowerCase().match(ot)||[];if(b(u))for(;c=y[m++];)"+"===c[0]?(c=c.slice(1)||"*",(t[c]=t[c]||[]).unshift(u)):(t[c]=t[c]||[]).push(u)}}function vn(t,n,u,c){var m={},y=t===rn;function T(L){var F;return m[L]=!0,l.each(t[L]||[],function(B,W){var Z=W(n,u,c);return"string"!=typeof Z||y||m[Z]?y?!(F=Z):void 0:(n.dataTypes.unshift(Z),T(Z),!1)}),F}return T(n.dataTypes[0])||!m["*"]&&T("*")}function sn(t,n){var u,c,m=l.ajaxSettings.flatOptions||{};for(u in n)void 0!==n[u]&&((m[u]?t:c||(c={}))[u]=n[u]);return c&&l.extend(!0,t,c),t}on.href=yi.href,l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yi.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(yi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":gn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?sn(sn(t,l.ajaxSettings),n):sn(l.ajaxSettings,t)},ajaxPrefilter:mn(pn),ajaxTransport:mn(rn),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var u,c,m,y,T,L,F,B,W,Z,z=l.ajaxSetup({},n=n||{}),J=z.context||z,Se=z.context&&(J.nodeType||J.jquery)?l(J):l.event,Re=l.Deferred(),_e=l.Callbacks("once memory"),wt=z.statusCode||{},_t={},ai={},li="canceled",qe={readyState:0,getResponseHeader:function(Qe){var gt;if(F){if(!y)for(y={};gt=Rn.exec(m);)y[gt[1].toLowerCase()+" "]=(y[gt[1].toLowerCase()+" "]||[]).concat(gt[2]);gt=y[Qe.toLowerCase()+" "]}return null==gt?null:gt.join(", ")},getAllResponseHeaders:function(){return F?m:null},setRequestHeader:function(Qe,gt){return null==F&&(Qe=ai[Qe.toLowerCase()]=ai[Qe.toLowerCase()]||Qe,_t[Qe]=gt),this},overrideMimeType:function(Qe){return null==F&&(z.mimeType=Qe),this},statusCode:function(Qe){var gt;if(Qe)if(F)qe.always(Qe[qe.status]);else for(gt in Qe)wt[gt]=[wt[gt],Qe[gt]];return this},abort:function(Qe){var gt=Qe||li;return u&&u.abort(gt),Si(0,gt),this}};if(Re.promise(qe),z.url=((t||z.url||yi.href)+"").replace(Dn,yi.protocol+"//"),z.type=n.method||n.type||z.method||z.type,z.dataTypes=(z.dataType||"*").toLowerCase().match(ot)||[""],null==z.crossDomain){L=_.createElement("a");try{L.href=z.url,L.href=L.href,z.crossDomain=on.protocol+"//"+on.host!=L.protocol+"//"+L.host}catch(Qe){z.crossDomain=!0}}if(z.data&&z.processData&&"string"!=typeof z.data&&(z.data=l.param(z.data,z.traditional)),vn(pn,z,n,qe),F)return qe;for(W in(B=l.event&&z.global)&&0==l.active++&&l.event.trigger("ajaxStart"),z.type=z.type.toUpperCase(),z.hasContent=!_n.test(z.type),c=z.url.replace(Pn,""),z.hasContent?z.data&&z.processData&&0===(z.contentType||"").indexOf("application/x-www-form-urlencoded")&&(z.data=z.data.replace(bn,"+")):(Z=z.url.slice(c.length),z.data&&(z.processData||"string"==typeof z.data)&&(c+=(Di.test(c)?"&":"?")+z.data,delete z.data),!1===z.cache&&(c=c.replace(Cn,"$1"),Z=(Di.test(c)?"&":"?")+"_="+_i.guid+++Z),z.url=c+Z),z.ifModified&&(l.lastModified[c]&&qe.setRequestHeader("If-Modified-Since",l.lastModified[c]),l.etag[c]&&qe.setRequestHeader("If-None-Match",l.etag[c])),(z.data&&z.hasContent&&!1!==z.contentType||n.contentType)&&qe.setRequestHeader("Content-Type",z.contentType),qe.setRequestHeader("Accept",z.dataTypes[0]&&z.accepts[z.dataTypes[0]]?z.accepts[z.dataTypes[0]]+("*"!==z.dataTypes[0]?", "+gn+"; q=0.01":""):z.accepts["*"]),z.headers)qe.setRequestHeader(W,z.headers[W]);if(z.beforeSend&&(!1===z.beforeSend.call(J,qe,z)||F))return qe.abort();if(li="abort",_e.add(z.complete),qe.done(z.success),qe.fail(z.error),u=vn(rn,z,n,qe)){if(qe.readyState=1,B&&Se.trigger("ajaxSend",[qe,z]),F)return qe;z.async&&0<z.timeout&&(T=e.setTimeout(function(){qe.abort("timeout")},z.timeout));try{F=!1,u.send(_t,Si)}catch(Qe){if(F)throw Qe;Si(-1,Qe)}}else Si(-1,"No Transport");function Si(Qe,gt,Ni,ln){var ui,zi,pi,wi,Ai,Jt=gt;F||(F=!0,T&&e.clearTimeout(T),u=void 0,m=ln||"",qe.readyState=0<Qe?4:0,ui=200<=Qe&&Qe<300||304===Qe,Ni&&(wi=function(Dt,St,Nt){for(var xi,zt,Pe,xt,Tt=Dt.contents,ut=Dt.dataTypes;"*"===ut[0];)ut.shift(),void 0===xi&&(xi=Dt.mimeType||St.getResponseHeader("Content-Type"));if(xi)for(zt in Tt)if(Tt[zt]&&Tt[zt].test(xi)){ut.unshift(zt);break}if(ut[0]in Nt)Pe=ut[0];else{for(zt in Nt){if(!ut[0]||Dt.converters[zt+" "+ut[0]]){Pe=zt;break}xt||(xt=zt)}Pe=Pe||xt}if(Pe)return Pe!==ut[0]&&ut.unshift(Pe),Nt[Pe]}(z,qe,Ni)),!ui&&-1<l.inArray("script",z.dataTypes)&&l.inArray("json",z.dataTypes)<0&&(z.converters["text script"]=function(){}),wi=function(Dt,St,Nt,xi){var zt,Pe,xt,Tt,ut,hi={},Fi=Dt.dataTypes.slice();if(Fi[1])for(xt in Dt.converters)hi[xt.toLowerCase()]=Dt.converters[xt];for(Pe=Fi.shift();Pe;)if(Dt.responseFields[Pe]&&(Nt[Dt.responseFields[Pe]]=St),!ut&&xi&&Dt.dataFilter&&(St=Dt.dataFilter(St,Dt.dataType)),ut=Pe,Pe=Fi.shift())if("*"===Pe)Pe=ut;else if("*"!==ut&&ut!==Pe){if(!(xt=hi[ut+" "+Pe]||hi["* "+Pe]))for(zt in hi)if((Tt=zt.split(" "))[1]===Pe&&(xt=hi[ut+" "+Tt[0]]||hi["* "+Tt[0]])){!0===xt?xt=hi[zt]:!0!==hi[zt]&&(Pe=Tt[0],Fi.unshift(Tt[1]));break}if(!0!==xt)if(xt&&Dt.throws)St=xt(St);else try{St=xt(St)}catch(Ki){return{state:"parsererror",error:xt?Ki:"No conversion from "+ut+" to "+Pe}}}return{state:"success",data:St}}(z,wi,qe,ui),ui?(z.ifModified&&((Ai=qe.getResponseHeader("Last-Modified"))&&(l.lastModified[c]=Ai),(Ai=qe.getResponseHeader("etag"))&&(l.etag[c]=Ai)),204===Qe||"HEAD"===z.type?Jt="nocontent":304===Qe?Jt="notmodified":(Jt=wi.state,zi=wi.data,ui=!(pi=wi.error))):(pi=Jt,!Qe&&Jt||(Jt="error",Qe<0&&(Qe=0))),qe.status=Qe,qe.statusText=(gt||Jt)+"",ui?Re.resolveWith(J,[zi,Jt,qe]):Re.rejectWith(J,[qe,Jt,pi]),qe.statusCode(wt),wt=void 0,B&&Se.trigger(ui?"ajaxSuccess":"ajaxError",[qe,z,ui?zi:pi]),_e.fireWith(J,[qe,Jt]),B&&(Se.trigger("ajaxComplete",[qe,z]),--l.active||l.event.trigger("ajaxStop")))}return qe},getJSON:function(t,n,u){return l.get(t,n,u,"json")},getScript:function(t,n){return l.get(t,void 0,n,"script")}}),l.each(["get","post"],function(t,n){l[n]=function(u,c,m,y){return b(c)&&(y=y||m,m=c,c=void 0),l.ajax(l.extend({url:u,type:n,dataType:y,data:c,success:m},l.isPlainObject(u)&&u))}}),l.ajaxPrefilter(function(t){var n;for(n in t.headers)"content-type"===n.toLowerCase()&&(t.contentType=t.headers[n]||"")}),l._evalUrl=function(t,n,u){return l.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(c){l.globalEval(c,n,u)}})},l.fn.extend({wrapAll:function(t){var n;return this[0]&&(b(t)&&(t=t.call(this[0])),n=l(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(t){return b(t)?this.each(function(n){l(this).wrapInner(t.call(this,n))}):this.each(function(){var n=l(this),u=n.contents();u.length?u.wrapAll(t):n.append(t)})},wrap:function(t){var n=b(t);return this.each(function(u){l(this).wrapAll(n?t.call(this,u):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(t){return!l.expr.pseudos.visible(t)},l.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var On={0:200,1223:204},Ii=l.ajaxSettings.xhr();O.cors=!!Ii&&"withCredentials"in Ii,O.ajax=Ii=!!Ii,l.ajaxTransport(function(t){var n,u;if(O.cors||Ii&&!t.crossDomain)return{send:function(c,m){var y,T=t.xhr();if(T.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(y in t.xhrFields)T[y]=t.xhrFields[y];for(y in t.mimeType&&T.overrideMimeType&&T.overrideMimeType(t.mimeType),t.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),c)T.setRequestHeader(y,c[y]);n=function(L){return function(){n&&(n=u=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,"abort"===L?T.abort():"error"===L?"number"!=typeof T.status?m(0,"error"):m(T.status,T.statusText):m(On[T.status]||T.status,T.statusText,"text"!==(T.responseType||"text")||"string"!=typeof T.responseText?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=n(),u=T.onerror=T.ontimeout=n("error"),void 0!==T.onabort?T.onabort=u:T.onreadystatechange=function(){4===T.readyState&&e.setTimeout(function(){n&&u()})},n=n("abort");try{T.send(t.hasContent&&t.data||null)}catch(L){if(n)throw L}},abort:function(){n&&n()}}}),l.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return l.globalEval(t),t}}}),l.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),l.ajaxTransport("script",function(t){var n,u;if(t.crossDomain||t.scriptAttrs)return{send:function(c,m){n=l("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",u=function(y){n.remove(),u=null,y&&m("error"===y.type?404:200,y.type)}),_.head.appendChild(n[0])},abort:function(){u&&u()}}});var yn,wn=[],an=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=wn.pop()||l.expando+"_"+_i.guid++;return this[t]=!0,t}}),l.ajaxPrefilter("json jsonp",function(t,n,u){var c,m,y,T=!1!==t.jsonp&&(an.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&an.test(t.data)&&"data");if(T||"jsonp"===t.dataTypes[0])return c=t.jsonpCallback=b(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,T?t[T]=t[T].replace(an,"$1"+c):!1!==t.jsonp&&(t.url+=(Di.test(t.url)?"&":"?")+t.jsonp+"="+c),t.converters["script json"]=function(){return y||l.error(c+" was not called"),y[0]},t.dataTypes[0]="json",m=e[c],e[c]=function(){y=arguments},u.always(function(){void 0===m?l(e).removeProp(c):e[c]=m,t[c]&&(t.jsonpCallback=n.jsonpCallback,wn.push(c)),y&&b(m)&&m(y[0]),y=m=void 0}),"script"}),O.createHTMLDocument=((yn=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===yn.childNodes.length),l.parseHTML=function(t,n,u){return"string"!=typeof t?[]:("boolean"==typeof n&&(u=n,n=!1),n||(O.createHTMLDocument?((c=(n=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,n.head.appendChild(c)):n=_),y=!u&&[],(m=At.exec(t))?[n.createElement(m[1])]:(m=he([t],n,y),y&&y.length&&l(y).remove(),l.merge([],m.childNodes)));var c,m,y},l.fn.load=function(t,n,u){var c,m,y,T=this,L=t.indexOf(" ");return-1<L&&(c=fi(t.slice(L)),t=t.slice(0,L)),b(n)?(u=n,n=void 0):n&&"object"==typeof n&&(m="POST"),0<T.length&&l.ajax({url:t,type:m||"GET",dataType:"html",data:n}).done(function(F){y=arguments,T.html(c?l("<div>").append(l.parseHTML(F)).find(c):F)}).always(u&&function(F,B){T.each(function(){u.apply(this,y||[F.responseText,B,F])})}),this},l.expr.pseudos.animated=function(t){return l.grep(l.timers,function(n){return t===n.elem}).length},l.offset={setOffset:function(t,n,u){var c,m,y,T,L,F,B=l.css(t,"position"),W=l(t),Z={};"static"===B&&(t.style.position="relative"),L=W.offset(),y=l.css(t,"top"),F=l.css(t,"left"),("absolute"===B||"fixed"===B)&&-1<(y+F).indexOf("auto")?(T=(c=W.position()).top,m=c.left):(T=parseFloat(y)||0,m=parseFloat(F)||0),b(n)&&(n=n.call(t,u,l.extend({},L))),null!=n.top&&(Z.top=n.top-L.top+T),null!=n.left&&(Z.left=n.left-L.left+m),"using"in n?n.using.call(t,Z):W.css(Z)}},l.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(m){l.offset.setOffset(this,t,m)});var n,u,c=this[0];return c?c.getClientRects().length?{top:(n=c.getBoundingClientRect()).top+(u=c.ownerDocument.defaultView).pageYOffset,left:n.left+u.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,n,u,c=this[0],m={top:0,left:0};if("fixed"===l.css(c,"position"))n=c.getBoundingClientRect();else{for(n=this.offset(),u=c.ownerDocument,t=c.offsetParent||u.documentElement;t&&(t===u.body||t===u.documentElement)&&"static"===l.css(t,"position");)t=t.parentNode;t&&t!==c&&1===t.nodeType&&((m=l(t).offset()).top+=l.css(t,"borderTopWidth",!0),m.left+=l.css(t,"borderLeftWidth",!0))}return{top:n.top-m.top-l.css(c,"marginTop",!0),left:n.left-m.left-l.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===l.css(t,"position");)t=t.offsetParent;return t||E})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var u="pageYOffset"===n;l.fn[t]=function(c){return $(this,function(m,y,T){var L;if(R(m)?L=m:9===m.nodeType&&(L=m.defaultView),void 0===T)return L?L[n]:m[y];L?L.scrollTo(u?L.pageXOffset:T,u?T:L.pageYOffset):m[y]=T},t,c,arguments.length)}}),l.each(["top","left"],function(t,n){l.cssHooks[n]=Rt(O.pixelPosition,function(u,c){if(c)return c=rt(u,n),Le.test(c)?l(u).position()[n]+"px":c})}),l.each({Height:"height",Width:"width"},function(t,n){l.each({padding:"inner"+t,content:n,"":"outer"+t},function(u,c){l.fn[c]=function(m,y){var T=arguments.length&&(u||"boolean"!=typeof m),L=u||(!0===m||!0===y?"margin":"border");return $(this,function(F,B,W){var Z;return R(F)?0===c.indexOf("outer")?F["inner"+t]:F.document.documentElement["client"+t]:9===F.nodeType?(Z=F.documentElement,Math.max(F.body["scroll"+t],Z["scroll"+t],F.body["offset"+t],Z["offset"+t],Z["client"+t])):void 0===W?l.css(F,B,L):l.style(F,B,W,L)},n,T?m:void 0,T)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,n){l.fn[n]=function(u){return this.on(n,u)}}),l.fn.extend({bind:function(t,n,u){return this.on(t,null,n,u)},unbind:function(t,n){return this.off(t,null,n)},delegate:function(t,n,u,c){return this.on(n,t,u,c)},undelegate:function(t,n,u){return 1===arguments.length?this.off(t,"**"):this.off(n,t||"**",u)},hover:function(t,n){return this.on("mouseenter",t).on("mouseleave",n||t)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){l.fn[n]=function(u,c){return 0<arguments.length?this.on(n,null,u,c):this.trigger(n)}});var An=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(t,n){var u,c,m;if("string"==typeof n&&(u=t[n],n=t,t=u),b(t))return c=d.call(arguments,2),(m=function(){return t.apply(n||this,c.concat(d.call(arguments)))}).guid=t.guid=t.guid||l.guid++,m},l.holdReady=function(t){t?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=ge,l.isFunction=b,l.isWindow=R,l.camelCase=De,l.type=Y,l.now=Date.now,l.isNumeric=function(t){var n=l.type(t);return("number"===n||"string"===n)&&!isNaN(t-parseFloat(t))},l.trim=function(t){return null==t?"":(t+"").replace(An,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return l});var Fn=e.jQuery,Ln=e.$;return l.noConflict=function(t){return e.$===l&&(e.$=Ln),t&&e.jQuery===l&&(e.jQuery=Fn),l},void 0===i&&(e.jQuery=e.$=l),l}),function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,function(e){"use strict";function i(k){if(null==k)return window;if("[object Window]"!==k.toString()){var H=k.ownerDocument;return H&&H.defaultView||window}return k}function s(k){return k instanceof i(k).Element||k instanceof Element}function h(k){return k instanceof i(k).HTMLElement||k instanceof HTMLElement}function d(k){return"undefined"!=typeof ShadowRoot&&(k instanceof i(k).ShadowRoot||k instanceof ShadowRoot)}var r=Math.max,o=Math.min,a=Math.round;function p(){var k=navigator.userAgentData;return null!=k&&k.brands&&Array.isArray(k.brands)?k.brands.map(function(H){return H.brand+"/"+H.version}).join(" "):navigator.userAgent}function w(){return!/^((?!chrome|android).)*safari/i.test(p())}function x(k,H,N){void 0===H&&(H=!1),void 0===N&&(N=!1);var V=k.getBoundingClientRect(),le=1,ee=1;H&&h(k)&&(le=k.offsetWidth>0&&a(V.width)/k.offsetWidth||1,ee=k.offsetHeight>0&&a(V.height)/k.offsetHeight||1);var he=(s(k)?i(k):window).visualViewport,re=!w()&&N,se=(V.left+(re&&he?he.offsetLeft:0))/le,ve=(V.top+(re&&he?he.offsetTop:0))/ee,me=V.width/le,ce=V.height/ee;return{width:me,height:ce,top:ve,right:se+me,bottom:ve+ce,left:se,x:se,y:ve}}function A(k){var H=i(k);return{scrollLeft:H.pageXOffset,scrollTop:H.pageYOffset}}function P(k){return k?(k.nodeName||"").toLowerCase():null}function O(k){return((s(k)?k.ownerDocument:k.document)||window.document).documentElement}function b(k){return x(O(k)).left+A(k).scrollLeft}function R(k){return i(k).getComputedStyle(k)}function _(k){var H=R(k);return/auto|scroll|overlay|hidden/.test(H.overflow+H.overflowY+H.overflowX)}function I(k,H,N){void 0===N&&(N=!1);var V,le,ce,Je,Me,ze,ee=h(H),he=h(H)&&(Je=(ce=H).getBoundingClientRect(),Me=a(Je.width)/ce.offsetWidth||1,ze=a(Je.height)/ce.offsetHeight||1,1!==Me||1!==ze),re=O(H),se=x(k,he,N),ve={scrollLeft:0,scrollTop:0},me={x:0,y:0};return(ee||!ee&&!N)&&(("body"!==P(H)||_(re))&&(ve=(V=H)!==i(V)&&h(V)?{scrollLeft:(le=V).scrollLeft,scrollTop:le.scrollTop}:A(V)),h(H)?((me=x(H,!0)).x+=H.clientLeft,me.y+=H.clientTop):re&&(me.x=b(re))),{x:se.left+ve.scrollLeft-me.x,y:se.top+ve.scrollTop-me.y,width:se.width,height:se.height}}function X(k){var H=x(k),N=k.offsetWidth,V=k.offsetHeight;return Math.abs(H.width-N)<=1&&(N=H.width),Math.abs(H.height-V)<=1&&(V=H.height),{x:k.offsetLeft,y:k.offsetTop,width:N,height:V}}function Y(k){return"html"===P(k)?k:k.assignedSlot||k.parentNode||(d(k)?k.host:null)||O(k)}function ie(k){return["html","body","#document"].indexOf(P(k))>=0?k.ownerDocument.body:h(k)&&_(k)?k:ie(Y(k))}function ue(k,H){var N;void 0===H&&(H=[]);var V=ie(k),le=V===(null==(N=k.ownerDocument)?void 0:N.body),ee=i(V),he=le?[ee].concat(ee.visualViewport||[],_(V)?V:[]):V,re=H.concat(he);return le?re:re.concat(ue(Y(he)))}function l(k){return["table","td","th"].indexOf(P(k))>=0}function Te(k){return h(k)&&"fixed"!==R(k).position?k.offsetParent:null}function ge(k){for(var H=i(k),N=Te(k);N&&l(N)&&"static"===R(N).position;)N=Te(N);return N&&("html"===P(N)||"body"===P(N)&&"static"===R(N).position)?H:N||function(V){var le=/firefox/i.test(p());if(/Trident/i.test(p())&&h(V)&&"fixed"===R(V).position)return null;var ee=Y(V);for(d(ee)&&(ee=ee.host);h(ee)&&["html","body"].indexOf(P(ee))<0;){var he=R(ee);if("none"!==he.transform||"none"!==he.perspective||"paint"===he.contain||-1!==["transform","perspective"].indexOf(he.willChange)||le&&"filter"===he.willChange||le&&he.filter&&"none"!==he.filter)return ee;ee=ee.parentNode}return null}(k)||H}var Fe="top",Ue="bottom",at="right",be="left",Pt="auto",ft=[Fe,Ue,at,be],Ve="start",Xe="end",Et="viewport",ye="popper",mt=ft.reduce(function(k,H){return k.concat([H+"-"+Ve,H+"-"+Xe])},[]),Qt=[].concat(ft,[Pt]).reduce(function(k,H){return k.concat([H,H+"-"+Ve,H+"-"+Xe])},[]),At=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ct(k){var H=new Map,N=new Set,V=[];function le(ee){N.add(ee.name),[].concat(ee.requires||[],ee.requiresIfExists||[]).forEach(function(he){if(!N.has(he)){var re=H.get(he);re&&le(re)}}),V.push(ee)}return k.forEach(function(ee){H.set(ee.name,ee)}),k.forEach(function(ee){N.has(ee.name)||le(ee)}),V}function Mt(k,H){var N=H.getRootNode&&H.getRootNode();if(k.contains(H))return!0;if(N&&d(N)){var V=H;do{if(V&&k.isSameNode(V))return!0;V=V.parentNode||V.host}while(V)}return!1}function Bt(k){return Object.assign({},k,{left:k.x,top:k.y,right:k.x+k.width,bottom:k.y+k.height})}function Xt(k,H,N){return H===Et?Bt(function(V,le){var ee=i(V),he=O(V),re=ee.visualViewport,se=he.clientWidth,ve=he.clientHeight,me=0,ce=0;if(re){se=re.width,ve=re.height;var Je=w();(Je||!Je&&"fixed"===le)&&(me=re.offsetLeft,ce=re.offsetTop)}return{width:se,height:ve,x:me+b(V),y:ce}}(k,N)):s(H)?((ee=x(V=H,!1,"fixed"===N)).top=ee.top+V.clientTop,ee.left=ee.left+V.clientLeft,ee.bottom=ee.top+V.clientHeight,ee.right=ee.left+V.clientWidth,ee.width=V.clientWidth,ee.height=V.clientHeight,ee.x=ee.left,ee.y=ee.top,ee):Bt(function(V){var le,ee=O(V),he=A(V),re=null==(le=V.ownerDocument)?void 0:le.body,se=r(ee.scrollWidth,ee.clientWidth,re?re.scrollWidth:0,re?re.clientWidth:0),ve=r(ee.scrollHeight,ee.clientHeight,re?re.scrollHeight:0,re?re.clientHeight:0),me=-he.scrollLeft+b(V),ce=-he.scrollTop;return"rtl"===R(re||ee).direction&&(me+=r(ee.clientWidth,re?re.clientWidth:0)-se),{width:se,height:ve,x:me,y:ce}}(O(k)));var V,ee}function pt(k){return k.split("-")[0]}function ot(k){return k.split("-")[1]}function Ft(k){return["top","bottom"].indexOf(k)>=0?"x":"y"}function Ht(k){var H,N=k.reference,V=k.element,le=k.placement,ee=le?pt(le):null,he=le?ot(le):null,re=N.x+N.width/2-V.width/2,se=N.y+N.height/2-V.height/2;switch(ee){case Fe:H={x:re,y:N.y-V.height};break;case Ue:H={x:re,y:N.y+N.height};break;case at:H={x:N.x+N.width,y:se};break;case be:H={x:N.x-V.width,y:se};break;default:H={x:N.x,y:N.y}}var ve=ee?Ft(ee):null;if(null!=ve){var me="y"===ve?"height":"width";switch(he){case Ve:H[ve]=H[ve]-(N[me]/2-V[me]/2);break;case Xe:H[ve]=H[ve]+(N[me]/2-V[me]/2)}}return H}function ci(k){return Object.assign({},{top:0,right:0,bottom:0,left:0},k)}function f(k,H){return H.reduce(function(N,V){return N[V]=k,N},{})}function D(k,H){void 0===H&&(H={});var V=H.placement,le=void 0===V?k.placement:V,ee=H.strategy,he=void 0===ee?k.strategy:ee,re=H.boundary,se=void 0===re?"clippingParents":re,ve=H.rootBoundary,me=void 0===ve?Et:ve,ce=H.elementContext,Je=void 0===ce?ye:ce,Me=H.altBoundary,ze=void 0!==Me&&Me,je=H.padding,Ie=void 0===je?0:je,lt=ci("number"!=typeof Ie?Ie:f(Ie,ft)),We=k.rects.popper,$e=k.elements[ze?Je===ye?"reference":ye:Je],Le=function $t(k,H,N,V){var se,ve,me,le="clippingParents"===H?(ve=ue(Y(se=k)),s(me=["absolute","fixed"].indexOf(R(se).position)>=0&&h(se)?ge(se):se)?ve.filter(function(ce){return s(ce)&&Mt(ce,me)&&"body"!==P(ce)}):[]):[].concat(H),ee=[].concat(le,[N]),re=ee.reduce(function(se,ve){var me=Xt(k,ve,V);return se.top=r(me.top,se.top),se.right=o(me.right,se.right),se.bottom=o(me.bottom,se.bottom),se.left=r(me.left,se.left),se},Xt(k,ee[0],V));return re.width=re.right-re.left,re.height=re.bottom-re.top,re.x=re.left,re.y=re.top,re}(s($e)?$e:$e.contextElement||O(k.elements.popper),se,me,he),Be=x(k.elements.reference),Ye=Ht({reference:Be,element:We,strategy:"absolute",placement:le}),tt=Bt(Object.assign({},We,Ye)),it=Je===ye?tt:Be,rt={top:Le.top-it.top+lt.top,bottom:it.bottom-Le.bottom+lt.bottom,left:Le.left-it.left+lt.left,right:it.right-Le.right+lt.right},Rt=k.modifiersData.offset;if(Je===ye&&Rt){var Wt=Rt[le];Object.keys(rt).forEach(function(Ut){var Kt=[at,Ue].indexOf(Ut)>=0?1:-1,Gt=[Fe,Ue].indexOf(Ut)>=0?"y":"x";rt[Ut]+=Wt[Gt]*Kt})}return rt}var U={placement:"bottom",modifiers:[],strategy:"absolute"};function $(){for(var k=arguments.length,H=new Array(k),N=0;N<k;N++)H[N]=arguments[N];return!H.some(function(V){return!(V&&"function"==typeof V.getBoundingClientRect)})}function ne(k){void 0===k&&(k={});var N=k.defaultModifiers,V=void 0===N?[]:N,le=k.defaultOptions,ee=void 0===le?U:le;return function(he,re,se){void 0===se&&(se=ee);var ve,me,ce={placement:"bottom",orderedModifiers:[],options:Object.assign({},U,ee),modifiersData:{},elements:{reference:he,popper:re},attributes:{},styles:{}},Je=[],Me=!1,ze={state:ce,setOptions:function(Ie){var lt="function"==typeof Ie?Ie(ce.options):Ie;je(),ce.options=Object.assign({},ee,ce.options,lt),ce.scrollParents={reference:s(he)?ue(he):he.contextElement?ue(he.contextElement):[],popper:ue(re)};var nt,We,Le,Be,$e=(nt=[].concat(V,ce.options.modifiers),We=nt.reduce(function(Le,Be){var Ye=Le[Be.name];return Le[Be.name]=Ye?Object.assign({},Ye,Be,{options:Object.assign({},Ye.options,Be.options),data:Object.assign({},Ye.data,Be.data)}):Be,Le},{}),Le=Object.keys(We).map(function(Le){return We[Le]}),Be=Ct(Le),At.reduce(function(Ye,tt){return Ye.concat(Be.filter(function(it){return it.phase===tt}))},[]));return ce.orderedModifiers=$e.filter(function(Le){return Le.enabled}),ce.orderedModifiers.forEach(function(Le){var Ye=Le.options,it=Le.effect;if("function"==typeof it){var rt=it({state:ce,name:Le.name,instance:ze,options:void 0===Ye?{}:Ye});Je.push(rt||function(){})}}),ze.update()},forceUpdate:function(){if(!Me){var Ie=ce.elements,lt=Ie.reference,nt=Ie.popper;if($(lt,nt)){ce.rects={reference:I(lt,ge(nt),"fixed"===ce.options.strategy),popper:X(nt)},ce.reset=!1,ce.placement=ce.options.placement,ce.orderedModifiers.forEach(function(it){return ce.modifiersData[it.name]=Object.assign({},it.data)});for(var We=0;We<ce.orderedModifiers.length;We++)if(!0!==ce.reset){var $e=ce.orderedModifiers[We],Le=$e.fn,Be=$e.options;"function"==typeof Le&&(ce=Le({state:ce,options:void 0===Be?{}:Be,name:$e.name,instance:ze})||ce)}else ce.reset=!1,We=-1}}},update:(ve=function(){return new Promise(function(Ie){ze.forceUpdate(),Ie(ce)})},function(){return me||(me=new Promise(function(Ie){Promise.resolve().then(function(){me=void 0,Ie(ve())})})),me}),destroy:function(){je(),Me=!0}};if(!$(he,re))return ze;function je(){Je.forEach(function(Ie){return Ie()}),Je=[]}return ze.setOptions(se).then(function(Ie){!Me&&se.onFirstUpdate&&se.onFirstUpdate(Ie)}),ze}}var ae={passive:!0},oe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(k){var H=k.state,N=k.instance,V=k.options,le=V.scroll,ee=void 0===le||le,he=V.resize,re=void 0===he||he,se=i(H.elements.popper),ve=[].concat(H.scrollParents.reference,H.scrollParents.popper);return ee&&ve.forEach(function(me){me.addEventListener("scroll",N.update,ae)}),re&&se.addEventListener("resize",N.update,ae),function(){ee&&ve.forEach(function(me){me.removeEventListener("scroll",N.update,ae)}),re&&se.removeEventListener("resize",N.update,ae)}},data:{}},De={name:"popperOffsets",enabled:!0,phase:"read",fn:function(k){var H=k.state;H.modifiersData[k.name]=Ht({reference:H.rects.reference,element:H.rects.popper,strategy:"absolute",placement:H.placement})},data:{}},Ge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ke(k){var H,N=k.popper,V=k.popperRect,le=k.placement,ee=k.variation,he=k.offsets,re=k.position,se=k.gpuAcceleration,ve=k.adaptive,me=k.roundOffsets,ce=k.isFixed,Je=he.x,Me=void 0===Je?0:Je,ze=he.y,je=void 0===ze?0:ze,Ie="function"==typeof me?me({x:Me,y:je}):{x:Me,y:je};Me=Ie.x,je=Ie.y;var lt=he.hasOwnProperty("x"),nt=he.hasOwnProperty("y"),We=be,$e=Fe,Le=window;if(ve){var Be=ge(N),Ye="clientHeight",tt="clientWidth";Be===i(N)&&"static"!==R(Be=O(N)).position&&"absolute"===re&&(Ye="scrollHeight",tt="scrollWidth"),(le===Fe||(le===be||le===at)&&ee===Xe)&&($e=Ue,je-=(ce&&Be===Le&&Le.visualViewport?Le.visualViewport.height:Be[Ye])-V.height,je*=se?1:-1),(le===be||(le===Fe||le===Ue)&&ee===Xe)&&(We=at,Me-=(ce&&Be===Le&&Le.visualViewport?Le.visualViewport.width:Be[tt])-V.width,Me*=se?1:-1)}var it,Wt,Ut,Gt,yt,rt=Object.assign({position:re},ve&&Ge),Rt=!0===me?(Wt={x:Me,y:je},Ut=i(N),Gt=Wt.y,{x:a(Wt.x*(yt=Ut.devicePixelRatio||1))/yt||0,y:a(Gt*yt)/yt||0}):{x:Me,y:je};return Me=Rt.x,je=Rt.y,Object.assign({},rt,se?((it={})[$e]=nt?"0":"",it[We]=lt?"0":"",it.transform=(Le.devicePixelRatio||1)<=1?"translate("+Me+"px, "+je+"px)":"translate3d("+Me+"px, "+je+"px, 0)",it):((H={})[$e]=nt?je+"px":"",H[We]=lt?Me+"px":"",H.transform="",H))}var Q={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(k){var H=k.state,N=k.options,V=N.gpuAcceleration,le=void 0===V||V,ee=N.adaptive,he=void 0===ee||ee,re=N.roundOffsets,se=void 0===re||re,ve={placement:pt(H.placement),variation:ot(H.placement),popper:H.elements.popper,popperRect:H.rects.popper,gpuAcceleration:le,isFixed:"fixed"===H.options.strategy};null!=H.modifiersData.popperOffsets&&(H.styles.popper=Object.assign({},H.styles.popper,ke(Object.assign({},ve,{offsets:H.modifiersData.popperOffsets,position:H.options.strategy,adaptive:he,roundOffsets:se})))),null!=H.modifiersData.arrow&&(H.styles.arrow=Object.assign({},H.styles.arrow,ke(Object.assign({},ve,{offsets:H.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:se})))),H.attributes.popper=Object.assign({},H.attributes.popper,{"data-popper-placement":H.placement})},data:{}},Oe={name:"applyStyles",enabled:!0,phase:"write",fn:function(k){var H=k.state;Object.keys(H.elements).forEach(function(N){var V=H.styles[N]||{},le=H.attributes[N]||{},ee=H.elements[N];h(ee)&&P(ee)&&(Object.assign(ee.style,V),Object.keys(le).forEach(function(he){var re=le[he];!1===re?ee.removeAttribute(he):ee.setAttribute(he,!0===re?"":re)}))})},effect:function(k){var H=k.state,N={popper:{position:H.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(H.elements.popper.style,N.popper),H.styles=N,H.elements.arrow&&Object.assign(H.elements.arrow.style,N.arrow),function(){Object.keys(H.elements).forEach(function(V){var le=H.elements[V],ee=H.attributes[V]||{},he=Object.keys(H.styles.hasOwnProperty(V)?H.styles[V]:N[V]).reduce(function(re,se){return re[se]="",re},{});h(le)&&P(le)&&(Object.assign(le.style,he),Object.keys(ee).forEach(function(re){le.removeAttribute(re)}))})}},requires:["computeStyles"]},Ne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(k){var H=k.state,V=k.name,le=k.options.offset,ee=void 0===le?[0,0]:le,he=Qt.reduce(function(me,ce){return me[ce]=(Me=H.rects,ze=ee,je=pt(Je=ce),Ie=[be,Fe].indexOf(je)>=0?-1:1,nt=(nt=(lt="function"==typeof ze?ze(Object.assign({},Me,{placement:Je})):ze)[0])||0,We=((We=lt[1])||0)*Ie,[be,at].indexOf(je)>=0?{x:We,y:nt}:{x:nt,y:We}),me;var Je,Me,ze,je,Ie,lt,nt,We},{}),re=he[H.placement],ve=re.y;null!=H.modifiersData.popperOffsets&&(H.modifiersData.popperOffsets.x+=re.x,H.modifiersData.popperOffsets.y+=ve),H.modifiersData[V]=he}},vt={left:"right",right:"left",bottom:"top",top:"bottom"};function Lt(k){return k.replace(/left|right|bottom|top/g,function(H){return vt[H]})}var Ci={start:"end",end:"start"};function v(k){return k.replace(/start|end/g,function(H){return Ci[H]})}var E={name:"flip",enabled:!0,phase:"main",fn:function(k){var H=k.state,N=k.options,V=k.name;if(!H.modifiersData[V]._skip){for(var le=N.mainAxis,ee=void 0===le||le,he=N.altAxis,re=void 0===he||he,se=N.fallbackPlacements,ve=N.padding,me=N.boundary,ce=N.rootBoundary,Je=N.altBoundary,Me=N.flipVariations,ze=void 0===Me||Me,je=N.allowedAutoPlacements,Ie=H.options.placement,lt=pt(Ie),nt=se||(lt!==Ie&&ze?function(qt){if(pt(qt)===Pt)return[];var dt=Lt(qt);return[v(qt),dt,v(dt)]}(Ie):[Lt(Ie)]),We=[Ie].concat(nt).reduce(function(qt,dt){return qt.concat(pt(dt)===Pt?function g(k,H){void 0===H&&(H={});var le=H.boundary,ee=H.rootBoundary,he=H.padding,re=H.flipVariations,se=H.allowedAutoPlacements,ve=void 0===se?Qt:se,me=ot(H.placement),ce=me?re?mt:mt.filter(function(ze){return ot(ze)===me}):ft,Je=ce.filter(function(ze){return ve.indexOf(ze)>=0});0===Je.length&&(Je=ce);var Me=Je.reduce(function(ze,je){return ze[je]=D(k,{placement:je,boundary:le,rootBoundary:ee,padding:he})[pt(je)],ze},{});return Object.keys(Me).sort(function(ze,je){return Me[ze]-Me[je]})}(H,{placement:dt,boundary:me,rootBoundary:ce,padding:ve,flipVariations:ze,allowedAutoPlacements:je}):dt)},[]),$e=H.rects.reference,Le=H.rects.popper,Be=new Map,Ye=!0,tt=We[0],it=0;it<We.length;it++){var rt=We[it],Rt=pt(rt),Wt=ot(rt)===Ve,Ut=[Fe,Ue].indexOf(Rt)>=0,Kt=Ut?"width":"height",Gt=D(H,{placement:rt,boundary:me,rootBoundary:ce,altBoundary:Je,padding:ve}),yt=Ut?Wt?at:be:Wt?Ue:Fe;$e[Kt]>Le[Kt]&&(yt=Lt(yt));var ri=Lt(yt),oi=[];if(ee&&oi.push(Gt[Rt]<=0),re&&oi.push(Gt[yt]<=0,Gt[ri]<=0),oi.every(function(qt){return qt})){tt=rt,Ye=!1;break}Be.set(rt,oi)}if(Ye)for(var Ei=function(qt){var dt=We.find(function(ei){var di=Be.get(ei);if(di)return di.slice(0,qt).every(function(ti){return ti})});if(dt)return tt=dt,"break"},si=ze?3:1;si>0&&"break"!==Ei(si);si--);H.placement!==tt&&(H.modifiersData[V]._skip=!0,H.placement=tt,H.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function S(k,H,N){return r(k,o(H,N))}var q={name:"preventOverflow",enabled:!0,phase:"main",fn:function(k){var Bi,Oi,H=k.state,N=k.options,V=k.name,le=N.mainAxis,ee=void 0===le||le,he=N.altAxis,re=void 0!==he&&he,Je=N.tether,Me=void 0===Je||Je,ze=N.tetherOffset,je=void 0===ze?0:ze,Ie=D(H,{boundary:N.boundary,rootBoundary:N.rootBoundary,padding:N.padding,altBoundary:N.altBoundary}),lt=pt(H.placement),nt=ot(H.placement),We=!nt,$e=Ft(lt),Le="x"===$e?"y":"x",Be=H.modifiersData.popperOffsets,Ye=H.rects.reference,tt=H.rects.popper,it="function"==typeof je?je(Object.assign({},H.rects,{placement:H.placement})):je,rt="number"==typeof it?{mainAxis:it,altAxis:it}:Object.assign({mainAxis:0,altAxis:0},it),Rt=H.modifiersData.offset?H.modifiersData.offset[H.placement]:null,Wt={x:0,y:0};if(Be){if(ee){var Ut,Kt="y"===$e?Fe:be,Gt="y"===$e?Ue:at,yt="y"===$e?"height":"width",ri=Be[$e],oi=ri+Ie[Kt],Ei=ri-Ie[Gt],si=Me?-tt[yt]/2:0,qt=nt===Ve?Ye[yt]:tt[yt],dt=nt===Ve?-tt[yt]:-Ye[yt],ei=H.elements.arrow,di=Me&&ei?X(ei):{width:0,height:0},ti=H.modifiersData["arrow#persistent"]?H.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Li=ti[Kt],Wi=ti[Gt],Ri=S(0,Ye[yt],di[yt]),Hi=We?Ye[yt]/2-si-Ri-Li-rt.mainAxis:qt-Ri-Li-rt.mainAxis,Ui=We?-Ye[yt]/2+si+Ri+Wi+rt.mainAxis:dt+Ri+Wi+rt.mainAxis,gi=H.elements.arrow&&ge(H.elements.arrow),Vt=null!=(Ut=null==Rt?void 0:Rt[$e])?Ut:0,qi=ri+Ui-Vt,mi=S(Me?o(oi,ri+Hi-Vt-(gi?"y"===$e?gi.clientTop||0:gi.clientLeft||0:0)):oi,ri,Me?r(Ei,qi):Ei);Be[$e]=mi,Wt[$e]=mi-ri}if(re){var Vi,It=Be[Le],vi="y"===Le?"height":"width",Zi=It+Ie["x"===$e?Fe:be],yi=It-Ie["x"===$e?Ue:at],_i=-1!==[Fe,be].indexOf(lt),Di=null!=(Vi=null==Rt?void 0:Rt[Le])?Vi:0,ki=_i?Zi:It-Ye[vi]-tt[vi]-Di+rt.altAxis,Mi=_i?It+Ye[vi]+tt[vi]-Di-rt.altAxis:yi,Xi=Me&&_i?(Oi=S(ki,It,Bi=Mi))>Bi?Bi:Oi:S(Me?ki:Zi,It,Me?Mi:yi);Be[Le]=Xi,Wt[Le]=Xi-It}H.modifiersData[V]=Wt}},requiresIfExists:["offset"]},te={name:"arrow",enabled:!0,phase:"main",fn:function(k){var H,tt,it,N=k.state,V=k.name,le=k.options,ee=N.elements.arrow,he=N.modifiersData.popperOffsets,re=pt(N.placement),se=Ft(re),ve=[be,at].indexOf(re)>=0?"height":"width";if(ee&&he){var me=(it=N,ci("number"!=typeof(tt="function"==typeof(tt=le.padding)?tt(Object.assign({},it.rects,{placement:it.placement})):tt)?tt:f(tt,ft))),ce=X(ee),Je="y"===se?Fe:be,Me="y"===se?Ue:at,ze=N.rects.reference[ve]+N.rects.reference[se]-he[se]-N.rects.popper[ve],je=he[se]-N.rects.reference[se],Ie=ge(ee),lt=Ie?"y"===se?Ie.clientHeight||0:Ie.clientWidth||0:0,Le=lt/2-ce[ve]/2+(ze/2-je/2),Be=S(me[Je],Le,lt-ce[ve]-me[Me]);N.modifiersData[V]=((H={})[se]=Be,H.centerOffset=Be-Le,H)}},effect:function(k){var H=k.state,N=k.options.element,V=void 0===N?"[data-popper-arrow]":N;null!=V&&("string"!=typeof V||(V=H.elements.popper.querySelector(V)))&&Mt(H.elements.popper,V)&&(H.elements.arrow=V)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ee(k,H,N){return void 0===N&&(N={x:0,y:0}),{top:k.top-H.height-N.y,right:k.right-H.width+N.x,bottom:k.bottom-H.height+N.y,left:k.left-H.width-N.x}}function Ze(k){return[Fe,at,Ue,be].some(function(H){return k[H]>=0})}var we={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(k){var H=k.state,N=k.name,V=H.rects.reference,le=H.rects.popper,ee=H.modifiersData.preventOverflow,he=D(H,{elementContext:"reference"}),re=D(H,{altBoundary:!0}),se=Ee(he,V),ve=Ee(re,le,ee),me=Ze(se),ce=Ze(ve);H.modifiersData[N]={referenceClippingOffsets:se,popperEscapeOffsets:ve,isReferenceHidden:me,hasPopperEscaped:ce},H.attributes.popper=Object.assign({},H.attributes.popper,{"data-popper-reference-hidden":me,"data-popper-escaped":ce})}},ct=ne({defaultModifiers:[oe,De,Q,Oe]}),st=[oe,De,Q,Oe,Ne,E,q,te,we],jt=ne({defaultModifiers:st});e.applyStyles=Oe,e.arrow=te,e.computeStyles=Q,e.createPopper=jt,e.createPopperLite=ct,e.defaultModifiers=st,e.detectOverflow=D,e.eventListeners=oe,e.flip=E,e.hide=we,e.offset=Ne,e.popperGenerator=ne,e.popperOffsets=De,e.preventOverflow=q,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){e.version={versionStr:"3.1.0",major:parseInt("3",10),minor:parseInt("1",10),revision:parseInt("0",10)};var d,i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},s=Object.prototype.toString,h=Object.prototype.hasOwnProperty;e.isFunction=function(d){return"function"===e.type(d)},e.isArray=Array.isArray||function(d){return"array"===e.type(d)},e.isWindow=function(d){return d&&"object"==typeof d&&"setInterval"in d},e.type=function(d){return null==d?String(d):i[s.call(d)]||"object"},e.isPlainObject=function(d){if(!d||"object"!==OpenSeadragon.type(d)||d.nodeType||e.isWindow(d)||d.constructor&&!h.call(d,"constructor")&&!h.call(d.constructor.prototype,"isPrototypeOf"))return!1;var r;for(var o in d)r=o;return void 0===r||h.call(d,r)},e.isEmptyObject=function(d){for(var r in d)return!1;return!0},e.freezeObject=function(d){return e.freezeObject=Object.freeze?Object.freeze:function(r){return r},e.freezeObject(d)},e.supportsCanvas=(d=document.createElement("canvas"),!(!e.isFunction(d.getContext)||!d.getContext("2d"))),e.isCanvasTainted=function(d){var r=!1;try{d.getContext("2d").getImageData(0,0,1,1)}catch(o){r=!0}return r},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var d=0;if(e.supportsAddEventListener)try{var r={get capture(){return d++,!1},get once(){return d++,!1},get passive(){return d++,!1}};window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch(o){d=0}return d>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var d=document.createElement("canvas").getContext("2d"),r=window.devicePixelRatio||1,o=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return Math.max(r,1)/o}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(OpenSeadragon),function(e){e.extend=function(){var o,a,p,w,x,A,P=arguments[0]||{},O=arguments.length,b=!1,R=1;for("boolean"==typeof P&&(b=P,P=arguments[1]||{},R=2),"object"!=typeof P&&!OpenSeadragon.isFunction(P)&&(P={}),O===R&&(P=this,--R);R<O;R++)if(null!==(o=arguments[R])||void 0!==o)for(a in o)p=P[a],P!==(w=o[a])&&(b&&w&&(OpenSeadragon.isPlainObject(w)||(x=OpenSeadragon.isArray(w)))?(x?(x=!1,A=p&&OpenSeadragon.isArray(p)?p:[]):A=p&&OpenSeadragon.isPlainObject(p)?p:{},P[a]=OpenSeadragon.extend(b,A,w)):void 0!==w&&(P[a]=w));return P},e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!=typeof navigator)return!1;var o=navigator.userAgent;return"string"==typeof o&&(-1!==o.indexOf("iPhone")||-1!==o.indexOf("iPad")||-1!==o.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(o,a){return function(){var p=arguments;return void 0===p&&(p=[]),a.apply(o,p)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(o){return e._viewers.get(this.getElement(o))},getElement:function(o){return"string"==typeof o&&(o=document.getElementById(o)),o},getElementPosition:function(o){var p,w,a=new e.Point;for(w=r(o=e.getElement(o),p="fixed"===e.getElementStyle(o).position);w;)a.x+=o.offsetLeft,a.y+=o.offsetTop,p&&(a=a.plus(e.getPageScroll())),w=r(o=w,p="fixed"===e.getElementStyle(o).position);return a},getElementOffset:function(o){var p,w,a=(o=e.getElement(o))&&o.ownerDocument,x={top:0,left:0};return a?(p=a.documentElement,void 0!==o.getBoundingClientRect&&(x=o.getBoundingClientRect()),new e.Point(x.left+((w=a===a.window?a:9===a.nodeType&&(a.defaultView||a.parentWindow)).pageXOffset||p.scrollLeft)-(p.clientLeft||0),x.top+(w.pageYOffset||p.scrollTop)-(p.clientTop||0))):new e.Point},getElementSize:function(o){return o=e.getElement(o),new e.Point(o.clientWidth,o.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(o){return(o=e.getElement(o)).currentStyle}:function(o){return o=e.getElement(o),window.getComputedStyle(o,"")},getCssPropertyWithVendorPrefix:function(o){var a={};return e.getCssPropertyWithVendorPrefix=function(p){if(void 0!==a[p])return a[p];var w=document.createElement("div").style,x=null;if(void 0!==w[p])x=p;else for(var A=["Webkit","Moz","MS","O","webkit","moz","ms","o"],P=e.capitalizeFirstLetter(p),O=0;O<A.length;O++){var b=A[O]+P;if(void 0!==w[b]){x=b;break}}return a[p]=x,x},e.getCssPropertyWithVendorPrefix(o)},capitalizeFirstLetter:function(o){return o.charAt(0).toUpperCase()+o.slice(1)},positiveModulo:function(o,a){var p=o%a;return p<0&&(p+=a),p},pointInElement:function(o,a){o=e.getElement(o);var p=e.getElementOffset(o),w=e.getElementSize(o);return a.x>=p.x&&a.x<p.x+w.x&&a.y<p.y+w.y&&a.y>=p.y},getMousePosition:function(o){if("number"==typeof o.pageX)e.getMousePosition=function(a){var p=new e.Point;return p.x=a.pageX,p.y=a.pageY,p};else{if("number"!=typeof o.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(a){var p=new e.Point;return p.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,p.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop,p}}return e.getMousePosition(o)},getPageScroll:function(){var o=document.documentElement||{},a=document.body||{};if("number"==typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(a.scrollLeft||a.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!o.scrollLeft&&!o.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(o){if(void 0!==window.scrollTo)e.setPageScroll=function(w){window.scrollTo(w.x,w.y)};else{var a=e.getPageScroll();if(a.x===o.x&&a.y===o.y)return;document.body.scrollLeft=o.x,document.body.scrollTop=o.y;var p=e.getPageScroll();if(p.x!==a.x&&p.y!==a.y)return void(e.setPageScroll=function(w){document.body.scrollLeft=w.x,document.body.scrollTop=w.y});if(document.documentElement.scrollLeft=o.x,document.documentElement.scrollTop=o.y,(p=e.getPageScroll()).x!==a.x&&p.y!==a.y)return void(e.setPageScroll=function(w){document.documentElement.scrollLeft=w.x,document.documentElement.scrollTop=w.y});e.setPageScroll=function(w){}}e.setPageScroll(o)},getWindowSize:function(){var o=document.documentElement||{},a=document.body||{};if("number"==typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(o.clientWidth||o.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!a.clientWidth&&!a.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(o){o=e.getElement(o);var a=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(a[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(a[1].style,{display:"table-row"}),e.extend(a[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),a[0].appendChild(a[1]),a[1].appendChild(a[2]),a[2].appendChild(o),a[0]},makeNeutralElement:function(o){var a=document.createElement(o),p=a.style;return p.background="transparent none",p.border="none",p.margin="0px",p.padding="0px",p.position="static",a},now:function(){return e.now=Date.now?Date.now:function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(o){var a=e.makeNeutralElement("img");return a.src=o,a},setElementOpacity:function(o,a,p){var w;o=e.getElement(o),p&&!e.Browser.alpha&&(a=Math.round(a)),e.Browser.opacity?o.style.opacity=a<1?a:"":a<1?(w=Math.round(100*a),o.style.filter="alpha(opacity="+w+")"):o.style.filter=""},setElementTouchActionNone:function(o){void 0!==(o=e.getElement(o)).style.touchAction?o.style.touchAction="none":void 0!==o.style.msTouchAction&&(o.style.msTouchAction="none")},setElementPointerEvents:function(o,a){void 0!==(o=e.getElement(o)).style&&void 0!==o.style.pointerEvents&&(o.style.pointerEvents=a)},setElementPointerEventsNone:function(o){e.setElementPointerEvents(o,"none")},addClass:function(o,a){(o=e.getElement(o)).className?-1===(" "+o.className+" ").indexOf(" "+a+" ")&&(o.className+=" "+a):o.className=a},indexOf:function(o,a,p){return this.indexOf=Array.prototype.indexOf?function(w,x,A){return w.indexOf(x,A)}:function(w,x,A){var P,b,O=A||0;if(!w)throw new TypeError;if(0===(b=w.length)||O>=b)return-1;for(O<0&&(O=b-Math.abs(O)),P=O;P<b;P++)if(w[P]===x)return P;return-1},this.indexOf(o,a,p)},removeClass:function(o,a){var p,x,w=[];for(p=(o=e.getElement(o)).className.split(/\s+/),x=0;x<p.length;x++)p[x]&&p[x]!==a&&w.push(p[x]);o.className=w.join(" ")},normalizeEventListenerOptions:function(o){return void 0!==o?"boolean"==typeof o?e.supportsEventListenerOptions?{capture:o}:o:e.supportsEventListenerOptions?o:void 0!==o.capture&&o.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(o,a,p,w){w=e.normalizeEventListenerOptions(w),(o=e.getElement(o)).addEventListener(a,p,w)};if(document.documentElement.attachEvent&&document.attachEvent)return function(o,a,p){(o=e.getElement(o)).attachEvent("on"+a,p)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(o,a,p,w){w=e.normalizeEventListenerOptions(w),(o=e.getElement(o)).removeEventListener(a,p,w)};if(document.documentElement.detachEvent&&document.detachEvent)return function(o,a,p){(o=e.getElement(o)).detachEvent("on"+a,p)};throw new Error("No known event model.")}(),cancelEvent:function(o){o.preventDefault()},eventIsCanceled:function(o){return o.defaultPrevented},stopEvent:function(o){o.stopPropagation()},createCallback:function(o,a){var w,p=[];for(w=2;w<arguments.length;w++)p.push(arguments[w]);return function(){var A,x=p.concat([]);for(A=0;A<arguments.length;A++)x.push(arguments[A]);return a.apply(o,x)}},getUrlParameter:function(o){return d[o]||null},getUrlProtocol:function(o){var a=o.match(/^([a-z]+:)\/\//i);return null===a?window.location.protocol:a[1].toLowerCase()},createAjaxRequest:function(o){var a;try{a=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(p){a=!1}if(a)e.createAjaxRequest=window.XMLHttpRequest?function(p){return p?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");e.createAjaxRequest=function(){return new XMLHttpRequest}}return e.createAjaxRequest(o)},makeAjaxRequest:function(o,a,p){var w,x,A,P;e.isPlainObject(o)&&(a=o.success,p=o.error,w=o.withCredentials,x=o.headers,A=o.responseType||null,P=o.postData||null,o=o.url);var O=e.getUrlProtocol(o),b=e.createAjaxRequest("file:"===O);if(!e.isFunction(a))throw new Error("makeAjaxRequest requires a success callback");b.onreadystatechange=function(){4===b.readyState&&(b.onreadystatechange=function(){},b.status>=200&&b.status<300||0===b.status&&"http:"!==O&&"https:"!==O?a(b):e.isFunction(p)?p(b):e.console.error("AJAX request returned %d: %s",b.status,o))};var R=P?"POST":"GET";try{if(b.open(R,o,!0),A&&(b.responseType=A),x)for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&x[_]&&b.setRequestHeader(_,x[_]);w&&(b.withCredentials=!0),b.send(P)}catch(I){e.console.error("%s while making AJAX request: %s",I.name,I.message),b.onreadystatechange=function(){},e.isFunction(p)&&p(b,I)}return b},jsonp:function(o){var a,p=o.url,w=document.head||document.getElementsByTagName("head")[0]||document.documentElement,x=o.callbackName||"openseadragon"+e.now(),A=window[x],O=o.param||"callback",b=o.callback;p=p.replace(/(=)\?(&|$)|\?\?/i,"$1"+x+"$2"),p+=(/\?/.test(p)?"&":"?")+O+"="+x,window[x]=function(R){if(A)window[x]=A;else try{delete window[x]}catch(_){}b&&e.isFunction(b)&&b(R)},a=document.createElement("script"),(void 0!==o.async||!1!==o.async)&&(a.async="async"),o.scriptCharset&&(a.charset=o.scriptCharset),a.src=p,a.onload=a.onreadystatechange=function(R,_){(_||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,w&&a.parentNode&&w.removeChild(a),a=void 0)},w.insertBefore(a,w.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(o){if(window.DOMParser)e.parseXml=function(a){return(new DOMParser).parseFromString(a,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");e.parseXml=function(a){var p=null;return(p=new ActiveXObject("Microsoft.XMLDOM")).async=!1,p.loadXML(a),p}}return e.parseXml(o)},parseJSON:function(o){return e.parseJSON=window.JSON.parse,e.parseJSON(o)},imageFormatSupported:function(o){return!!h[(o=o||"").toLowerCase()]},setImageFormatsSupported:function(o){e.extend(h,o)}});var s=function(o){};e.console=window.console||{log:s,debug:s,info:s,warn:s,error:s,assert:s},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var h={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},d={};function r(o,a){return a&&o!==document.body?document.body:o.offsetParent}(function(){var o=navigator.appVersion,a=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(a.substring(a.indexOf("MSIE")+5,a.indexOf(";",a.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(a.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edge")+5))):a.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edg")+4))):a.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(a.substring(a.indexOf("Firefox")+8))):a.indexOf("Safari")>=0?(e.Browser.vendor=a.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(a.substring(a.substring(0,a.indexOf("Safari")).lastIndexOf("/")+1,a.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(o)}var A,P,O,x=window.location.search.substring(1).split("&");for(O=0;O<x.length;O++)if((P=(A=x[O]).indexOf("="))>0){var b=A.substring(0,P),R=A.substring(P+1);try{d[b]=decodeURIComponent(R)}catch(_){e.console.error("Ignoring malformed URL parameter: %s=%s",b,R)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(o){var a=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,p=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame;if(a&&p)e.requestAnimationFrame=function(){return a.apply(o,arguments)},e.cancelAnimationFrame=function(){return p.apply(o,arguments)};else{var P,w=[],x=[],A=0;e.requestAnimationFrame=function(O){return w.push([++A,O]),P||(P=setInterval(function(){if(w.length){var b=e.now(),R=x;for(x=w,w=R;x.length;)x.shift()[1](b)}else clearInterval(P),P=void 0},20)),A},e.cancelAnimationFrame=function(O){var b,R;for(b=0,R=w.length;b<R;b+=1)if(w[b][0]===O)return void w.splice(b,1);for(b=0,R=x.length;b<R;b+=1)if(x[b][0]===O)return void x.splice(b,1)}}}(window)}(OpenSeadragon),function(e,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof module&&module.exports?module.exports=i():e.OpenSeadragon=i()}(this,function(){return OpenSeadragon}),function(e){var i={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.fullscreenElement},i.requestFullScreen=function(s){return s.requestFullscreen()},i.exitFullScreen=function(){document.exitFullscreen()},i.fullScreenEventName="fullscreenchange",i.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.msFullscreenElement},i.requestFullScreen=function(s){return s.msRequestFullscreen()},i.exitFullScreen=function(){document.msExitFullscreen()},i.fullScreenEventName="MSFullscreenChange",i.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitFullscreenElement},i.requestFullScreen=function(s){return s.webkitRequestFullscreen()},i.exitFullScreen=function(){document.webkitExitFullscreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},i.requestFullScreen=function(s){return s.webkitRequestFullScreen()},i.exitFullScreen=function(){document.webkitCancelFullScreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.mozFullScreenElement},i.requestFullScreen=function(s){return s.mozRequestFullScreen()},i.exitFullScreen=function(){document.mozCancelFullScreen()},i.fullScreenEventName="mozfullscreenchange",i.fullScreenErrorEventName="mozfullscreenerror"),i.isFullScreen=function(){return null!==i.getFullScreenElement()},i.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),i.exitFullScreen()},e.extend(e,i)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(i,s,h,d){var r=this;d=d||1;var o=0,a=function(p){++o===d&&r.removeHandler(i,a),s(p)};this.addHandler(i,a,h)},addHandler:function(i,s,h){var d=this.events[i];d||(this.events[i]=d=[]),s&&e.isFunction(s)&&(d[d.length]={handler:s,userData:h||null})},removeHandler:function(i,s){var r,h=this.events[i],d=[];if(h&&e.isArray(h)){for(r=0;r<h.length;r++)h[r].handler!==s&&d.push(h[r]);this.events[i]=d}},numberOfHandlers:function(i){var s=this.events[i];return s?s.length:0},removeAllHandlers:function(i){if(i)this.events[i]=[];else for(var s in this.events)this.events[s]=[]},getHandler:function(i){var s=this.events[i];return s&&s.length?(s=1===s.length?[s[0]]:Array.apply(null,s),function(h,d){var r,o=s.length;for(r=0;r<o;r++)s[r]&&(d.eventSource=h,d.userData=s[r].userData,s[r].handler(d))}):null},raiseEvent:function(i,s){var h=this.getHandler(i);h&&(s||(s={}),h(this,s))}}}(OpenSeadragon),function(e){var i=[],s={};e.MouseTracker=function(v){i.push(this);var g=arguments;e.isPlainObject(v)||(v={element:g[0],clickTimeThreshold:g[1],clickDistThreshold:g[2]}),this.hash=Math.random(),this.element=e.getElement(v.element),this.clickTimeThreshold=v.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=v.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=v.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=v.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=v.userData||null,this.stopDelay=v.stopDelay||50,this.preProcessEventHandler=v.preProcessEventHandler||null,this.contextMenuHandler=v.contextMenuHandler||null,this.enterHandler=v.enterHandler||null,this.leaveHandler=v.leaveHandler||null,this.exitHandler=v.exitHandler||null,this.overHandler=v.overHandler||null,this.outHandler=v.outHandler||null,this.pressHandler=v.pressHandler||null,this.nonPrimaryPressHandler=v.nonPrimaryPressHandler||null,this.releaseHandler=v.releaseHandler||null,this.nonPrimaryReleaseHandler=v.nonPrimaryReleaseHandler||null,this.moveHandler=v.moveHandler||null,this.scrollHandler=v.scrollHandler||null,this.clickHandler=v.clickHandler||null,this.dblClickHandler=v.dblClickHandler||null,this.dragHandler=v.dragHandler||null,this.dragEndHandler=v.dragEndHandler||null,this.pinchHandler=v.pinchHandler||null,this.stopHandler=v.stopHandler||null,this.keyDownHandler=v.keyDownHandler||null,this.keyUpHandler=v.keyUpHandler||null,this.keyHandler=v.keyHandler||null,this.focusHandler=v.focusHandler||null,this.blurHandler=v.blurHandler||null;var E=this;s[this.hash]={click:function(S){X(E,S)},dblclick:function(S){Y(E,S)},keydown:function(S){ie(E,S)},keyup:function(S){ue(E,S)},keypress:function(S){l(E,S)},focus:function(S){Te(E,S)},blur:function(S){ge(E,S)},contextmenu:function(S){Fe(E,S)},wheel:function(S){Ue(E,S)},mousewheel:function(S){at(E,S)},DOMMouseScroll:function(S){at(E,S)},MozMousePixelScroll:function(S){at(E,S)},losecapture:function(S){Pt(E,S)},mouseenter:function(S){Ct(E,S)},mouseleave:function(S){Mt(E,S)},mouseover:function(S){Bt(E,S)},mouseout:function(S){Xt(E,S)},mousedown:function(S){$t(E,S)},mouseup:function(S){pt(E,S)},mousemove:function(S){Ht(E,S)},touchstart:function(S){ft(E,S)},touchend:function(S){Ve(E,S)},touchmove:function(S){Xe(E,S)},touchcancel:function(S){Et(E,S)},gesturestart:function(S){ye(0,S)},gesturechange:function(S){mt(0,S)},gotpointercapture:function(S){Qt(E,S)},lostpointercapture:function(S){At(E,S)},pointerenter:function(S){Ct(E,S)},pointerleave:function(S){Mt(E,S)},pointerover:function(S){Bt(E,S)},pointerout:function(S){Xt(E,S)},pointerdown:function(S){$t(E,S)},pointerup:function(S){pt(E,S)},pointermove:function(S){Ht(E,S)},pointercancel:function(S){D(E,S)},pointerupcaptured:function(S){ot(E,S)},pointermovecaptured:function(S){ci(E,S)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),v.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var v;for(a(this),this.element=null,v=0;v<i.length;v++)if(i[v]===this){i.splice(v,1);break}s[this.hash]=null,delete s[this.hash]},isTracking:function(){return s[this.hash].tracking},setTracking:function(v){return v?function o(v){var E,S,g=s[v.hash];if(!g.tracking){for(S=0;S<e.MouseTracker.subscribeEvents.length;S++)e.addEvent(v.element,E=e.MouseTracker.subscribeEvents[S],g[E],E===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});r(v),g.tracking=!0}}(this):a(this),this},getActivePointersListByType:function(v){var E,q,g=s[this.hash],S=g.activePointersLists.length;for(E=0;E<S;E++)if(g.activePointersLists[E].type===v)return g.activePointersLists[E];return q=new e.MouseTracker.GesturePointList(v),g.activePointersLists.push(q),q},getActivePointerCount:function(){var g,v=s[this.hash],E=v.activePointersLists.length,S=0;for(g=0;g<E;g++)S+=v.activePointersLists[g].getLength();return S},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var v,g,E,S,q,h=function(){try{return window.self!==window.top}catch(v){return!0}}();function d(v){try{return v.addEventListener&&v.removeEventListener}catch(g){return!1}}function r(v){var E,S,q,te,Ee,g=s[v.hash],Ze=g.activePointersLists.length;for(E=0;E<Ze;E++)if((q=g.activePointersLists[E]).getLength()>0){for(Ee=[],te=q.asArray(),S=0;S<te.length;S++)Ee.push(te[S]);for(S=0;S<Ee.length;S++)$(v,q,Ee[S])}for(E=0;E<Ze;E++)g.activePointersLists.pop();g.sentDragEvent=!1}function a(v){var E,S,g=s[v.hash];if(g.tracking){for(S=0;S<e.MouseTracker.subscribeEvents.length;S++)e.removeEvent(v.element,E=e.MouseTracker.subscribeEvents[S],g[E],!1);r(v),g.tracking=!1}}function p(v,g){var E=s[v.hash];if("pointerevent"===g)return{upName:"pointerup",upHandler:E.pointerupcaptured,moveName:"pointermove",moveHandler:E.pointermovecaptured};if("mouse"===g)return{upName:"pointerup",upHandler:E.pointerupcaptured,moveName:"pointermove",moveHandler:E.pointermovecaptured};if("touch"===g)return{upName:"touchend",upHandler:E.touchendcaptured,moveName:"touchmove",moveHandler:E.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function x(v,g){var E,q;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(q=v.getActivePointersListByType(g.type).getById(g.id))||!q.captured)return;try{v.element.releasePointerCapture(g.id)}catch(te){}}else v.element.releaseCapture();else E=p(v,e.MouseTracker.havePointerEvents?"pointerevent":g.type),h&&d(window.top)&&e.removeEvent(window.top,E.upName,E.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,E.moveName,E.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,E.upName,E.upHandler,!0);oe(v,g,!1)}function A(v){return e.MouseTracker.havePointerEvents?v.pointerId:e.MouseTracker.mousePointerId}function P(v){return e.MouseTracker.havePointerEvents?v.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function O(v){return!e.MouseTracker.havePointerEvents||v.isPrimary}function b(v){return e.getMousePosition(v)}function R(v,g){return _(b(v),g)}function _(v,g){var E=e.getElementOffset(g);return v.minus(E)}function I(v,g){return new e.Point((v.x+g.x)/2,(v.y+g.y)/2)}function X(v,g){var E={originalEvent:g,eventType:"click",pointerType:"mouse",isEmulated:!1};ae(v,E),E.preventDefault&&!E.defaultPrevented&&e.cancelEvent(g),E.stopPropagation&&e.stopEvent(g)}function Y(v,g){var E={originalEvent:g,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};ae(v,E),E.preventDefault&&!E.defaultPrevented&&e.cancelEvent(g),E.stopPropagation&&e.stopEvent(g)}function ie(v,g){var E=null,S={originalEvent:g,eventType:"keydown",pointerType:"",isEmulated:!1};ae(v,S),v.keyDownHandler&&!S.preventGesture&&!S.defaultPrevented&&v.keyDownHandler(E={eventSource:v,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:S.preventDefault||S.defaultPrevented,userData:v.userData}),(E&&E.preventDefault||S.preventDefault&&!S.defaultPrevented)&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function ue(v,g){var E=null,S={originalEvent:g,eventType:"keyup",pointerType:"",isEmulated:!1};ae(v,S),v.keyUpHandler&&!S.preventGesture&&!S.defaultPrevented&&v.keyUpHandler(E={eventSource:v,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:S.preventDefault||S.defaultPrevented,userData:v.userData}),(E&&E.preventDefault||S.preventDefault&&!S.defaultPrevented)&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function l(v,g){var E=null,S={originalEvent:g,eventType:"keypress",pointerType:"",isEmulated:!1};ae(v,S),v.keyHandler&&!S.preventGesture&&!S.defaultPrevented&&v.keyHandler(E={eventSource:v,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:S.preventDefault||S.defaultPrevented,userData:v.userData}),(E&&E.preventDefault||S.preventDefault&&!S.defaultPrevented)&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function Te(v,g){var E={originalEvent:g,eventType:"focus",pointerType:"",isEmulated:!1};ae(v,E),v.focusHandler&&!E.preventGesture&&v.focusHandler({eventSource:v,originalEvent:g,userData:v.userData})}function ge(v,g){var E={originalEvent:g,eventType:"blur",pointerType:"",isEmulated:!1};ae(v,E),v.blurHandler&&!E.preventGesture&&v.blurHandler({eventSource:v,originalEvent:g,userData:v.userData})}function Fe(v,g){var E=null,S={originalEvent:g,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};ae(v,S),v.contextMenuHandler&&!S.preventGesture&&!S.defaultPrevented&&(E={eventSource:v,position:_(b(g),v.element),originalEvent:S.originalEvent,preventDefault:S.preventDefault||S.defaultPrevented,userData:v.userData},v.contextMenuHandler(E)),(E&&E.preventDefault||S.preventDefault&&!S.defaultPrevented)&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function Ue(v,g){be(v,g,g)}function at(v,g){var E={target:g.target||g.srcElement,type:"wheel",shiftKey:g.shiftKey||!1,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX?g.pageX:g.clientX,pageY:g.pageY?g.pageY:g.clientY,deltaMode:"MozMousePixelScroll"===g.type?0:1,deltaX:0,deltaZ:0};E.deltaY="mousewheel"===e.MouseTracker.wheelEventName?-g.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:g.detail,be(v,E,g)}function be(v,g,E){var S,q,te=null;S=g.deltaY<0?1:-1,ae(v,q={originalEvent:g,eventType:"wheel",pointerType:"mouse",isEmulated:g!==E}),v.scrollHandler&&!q.preventGesture&&!q.defaultPrevented&&(te={eventSource:v,pointerType:"mouse",position:R(g,v.element),scroll:S,shift:g.shiftKey,isTouchEvent:!1,originalEvent:E,preventDefault:q.preventDefault||q.defaultPrevented,userData:v.userData},v.scrollHandler(te)),q.stopPropagation&&e.stopEvent(E),(te&&te.preventDefault||q.preventDefault&&!q.defaultPrevented)&&e.cancelEvent(E)}function Pt(v,g){var E={id:e.MouseTracker.mousePointerId,type:"mouse"},S={originalEvent:g,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};ae(v,S),g.target===v.element&&oe(v,E,!1),S.stopPropagation&&e.stopEvent(g)}function ft(v,g){var E,S,te,q=g.changedTouches.length,Ee=v.getActivePointersListByType("touch");E=e.now(),Ee.getLength()>g.touches.length-q&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var Ze={originalEvent:g,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(ae(v,Ze),S=0;S<q;S++)De(v,Ze,te={id:g.changedTouches[S].identifier,type:"touch",isPrimary:0===Ee.getLength(),currentPos:b(g.changedTouches[S]),currentTime:E}),Oe(v,Ze,te,0),oe(v,te,!0);Ze.preventDefault&&!Ze.defaultPrevented&&e.cancelEvent(g),Ze.stopPropagation&&e.stopEvent(g)}function Ve(v,g){var E,S,te,q=g.changedTouches.length;E=e.now();var Ee={originalEvent:g,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(ae(v,Ee),S=0;S<q;S++)Ne(v,Ee,te={id:g.changedTouches[S].identifier,type:"touch",currentPos:b(g.changedTouches[S]),currentTime:E},0),oe(v,te,!1),Ge(v,Ee,te);Ee.preventDefault&&!Ee.defaultPrevented&&e.cancelEvent(g),Ee.stopPropagation&&e.stopEvent(g)}function Xe(v,g){var E,S,q=g.changedTouches.length;E=e.now();var Ee={originalEvent:g,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(ae(v,Ee),S=0;S<q;S++)vt(v,Ee,{id:g.changedTouches[S].identifier,type:"touch",currentPos:b(g.changedTouches[S]),currentTime:E});Ee.preventDefault&&!Ee.defaultPrevented&&e.cancelEvent(g),Ee.stopPropagation&&e.stopEvent(g)}function Et(v,g){var S,E=g.changedTouches.length,te={originalEvent:g,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(ae(v,te),S=0;S<E;S++)Lt(v,0,{id:g.changedTouches[S].identifier,type:"touch"});te.stopPropagation&&e.stopEvent(g)}function ye(v,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function mt(v,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function Qt(v,g){var E={originalEvent:g,eventType:"gotpointercapture",pointerType:P(g),isEmulated:!1};ae(v,E),g.target===v.element&&oe(v,{id:g.pointerId,type:P(g)},!0),E.stopPropagation&&e.stopEvent(g)}function At(v,g){var E={originalEvent:g,eventType:"lostpointercapture",pointerType:P(g),isEmulated:!1};ae(v,E),g.target===v.element&&oe(v,{id:g.pointerId,type:P(g)},!1),E.stopPropagation&&e.stopEvent(g)}function Ct(v,g){var E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()},S={originalEvent:g,eventType:"pointerenter",pointerType:E.type,isEmulated:!1};ae(v,S),De(v,S,E)}function Mt(v,g){var E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()},S={originalEvent:g,eventType:"pointerleave",pointerType:E.type,isEmulated:!1};ae(v,S),Ge(v,S,E)}function Bt(v,g){var E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()},S={originalEvent:g,eventType:"pointerover",pointerType:E.type,isEmulated:!1};ae(v,S),function ke(v,g,E){var S,q;(q=(S=v.getActivePointersListByType(E.type)).getById(E.id))?E=q:(E.captured=!1,E.insideElementPressed=!1),v.overHandler&&v.overHandler({eventSource:v,pointerType:E.type,position:_(E.currentPos,v.element),buttons:S.buttons,pointers:v.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:0!==S.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData})}(v,S,E),S.preventDefault&&!S.defaultPrevented&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function Xt(v,g){var E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()},S={originalEvent:g,eventType:"pointerout",pointerType:E.type,isEmulated:!1};ae(v,S),function Q(v,g,E){var S,q;(q=(S=v.getActivePointersListByType(E.type)).getById(E.id))?E=q:(E.captured=!1,E.insideElementPressed=!1),v.outHandler&&v.outHandler({eventSource:v,pointerType:E.type,position:E.currentPos&&_(E.currentPos,v.element),buttons:S.buttons,pointers:v.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:0!==S.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData})}(v,S,E),S.preventDefault&&!S.defaultPrevented&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function $t(v,g){var E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()},S=e.MouseTracker.havePointerEvents&&"touch"===E.type&&e.Browser.vendor!==e.BROWSERS.IE,q={originalEvent:g,eventType:"pointerdown",pointerType:E.type,isEmulated:!1};ae(v,q),Oe(v,q,E,g.button),q.preventDefault&&!q.defaultPrevented&&e.cancelEvent(g),q.stopPropagation&&e.stopEvent(g),q.shouldCapture&&(S?oe(v,E,!0):function w(v,g){var E;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{v.element.setPointerCapture(g.id)}catch(S){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else v.element.setCapture(!0);else E=p(v,e.MouseTracker.havePointerEvents?"pointerevent":g.type),h&&d(window.top)&&e.addEvent(window.top,E.upName,E.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,E.upName,E.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,E.moveName,E.moveHandler,!0);oe(v,g,!0)}(v,E))}function pt(v,g){Ft(v,g)}function ot(v,g){v.getActivePointersListByType(P(g)).getById(g.pointerId)&&Ft(v,g),e.stopEvent(g)}function Ft(v,g){var E,S={originalEvent:g,eventType:"pointerup",pointerType:(E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()}).type,isEmulated:!1};ae(v,S),Ne(v,S,E,g.button),S.preventDefault&&!S.defaultPrevented&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g),S.shouldReleaseCapture&&(g.target===v.element?x(v,E):oe(v,E,!1))}function Ht(v,g){f(v,g)}function ci(v,g){v.getActivePointersListByType(P(g)).getById(g.pointerId)&&f(v,g),e.stopEvent(g)}function f(v,g){var E={id:A(g),type:P(g),isPrimary:O(g),currentPos:b(g),currentTime:e.now()},S={originalEvent:g,eventType:"pointermove",pointerType:E.type,isEmulated:!1};ae(v,S),vt(v,S,E),S.preventDefault&&!S.defaultPrevented&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function D(v,g){var E={id:g.pointerId,type:P(g)},S={originalEvent:g,eventType:"pointercancel",pointerType:E.type,isEmulated:!1};ae(v,S),Lt(v,0,E),S.stopPropagation&&e.stopEvent(g)}function U(v,g){return g.speed=0,g.direction=0,g.contactPos=g.currentPos,g.contactTime=g.currentTime,g.lastPos=g.currentPos,g.lastTime=g.currentTime,v.add(g)}function $(v,g,E){var S,q=g.getById(E.id);return q?(q.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),x(v,q)),g.removeContact(),S=g.removeById(E.id)):S=g.getLength(),S}function ae(v,g){g.eventSource=v,g.eventPhase=g.originalEvent&&void 0!==g.originalEvent.eventPhase?g.originalEvent.eventPhase:0,g.defaultPrevented=e.eventIsCanceled(g.originalEvent),g.shouldCapture=!1,g.shouldReleaseCapture=!1,g.userData=v.userData,function ne(v,g){switch(g.eventType){case"pointermove":case"pointerdown":case"pointerup":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!v.hasGestureHandlers,g.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"wheel":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!v.hasScrollHandler,g.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":g.isStoppable=!0,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"click":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!v.clickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;case"dblclick":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!v.dblClickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;default:g.isStoppable=!1,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1}}(v,g),v.preProcessEventHandler&&v.preProcessEventHandler(g)}function oe(v,g,E){var S=v.getActivePointersListByType(g.type),q=S.getById(g.id);q?E&&!q.captured?(q.captured=!0,S.captureCount++):!E&&q.captured&&(q.captured=!1,S.captureCount--,S.captureCount<0&&(S.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function De(v,g,E){var q,S=v.getActivePointersListByType(E.type);(q=S.getById(E.id))?(q.insideElement=!0,q.lastPos=q.currentPos,q.lastTime=q.currentTime,q.currentPos=E.currentPos,q.currentTime=E.currentTime,E=q):(E.captured=!1,E.insideElementPressed=!1,E.insideElement=!0,U(S,E)),v.enterHandler&&v.enterHandler({eventSource:v,pointerType:E.type,position:_(E.currentPos,v.element),buttons:S.buttons,pointers:v.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:0!==S.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData})}function Ge(v,g,E){var q,te,S=v.getActivePointersListByType(E.type);(q=S.getById(E.id))?(q.captured?(q.insideElement=!1,q.lastPos=q.currentPos,q.lastTime=q.currentTime,q.currentPos=E.currentPos,q.currentTime=E.currentTime):$(v,S,q),E=q):(E.captured=!1,E.insideElementPressed=!1),(v.leaveHandler||v.exitHandler)&&(te={eventSource:v,pointerType:E.type,position:E.currentPos&&_(E.currentPos,v.element),buttons:S.buttons,pointers:v.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:0!==S.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData},v.leaveHandler&&v.leaveHandler(te),v.exitHandler&&v.exitHandler(te))}function Oe(v,g,E,S){var Ee,q=s[v.hash],te=v.getActivePointersListByType(E.type);if(void 0!==g.originalEvent.buttons?te.buttons=g.originalEvent.buttons:0===S?te.buttons|=1:1===S?te.buttons|=4:2===S?te.buttons|=2:3===S?te.buttons|=8:4===S?te.buttons|=16:5===S&&(te.buttons|=32),0!==S)return g.shouldCapture=!1,g.shouldReleaseCapture=!1,void(v.nonPrimaryPressHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,v.nonPrimaryPressHandler({eventSource:v,pointerType:E.type,position:_(E.currentPos,v.element),button:S,buttons:te.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData})));(Ee=te.getById(E.id))?(Ee.insideElementPressed=!0,Ee.insideElement=!0,Ee.originalTarget=g.originalEvent.target,Ee.contactPos=E.currentPos,Ee.contactTime=E.currentTime,Ee.lastPos=Ee.currentPos,Ee.lastTime=Ee.currentTime,Ee.currentPos=E.currentPos,Ee.currentTime=E.currentTime,E=Ee):(E.captured=!1,E.insideElementPressed=!0,E.insideElement=!0,E.originalTarget=g.originalEvent.target,U(te,E)),te.addContact(),g.preventGesture||g.defaultPrevented?(g.shouldCapture=!1,g.shouldReleaseCapture=!1):(g.shouldCapture=!0,g.shouldReleaseCapture=!1,g.preventDefault=!0,(v.dragHandler||v.dragEndHandler||v.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(v,E),1===te.contacts?v.pressHandler&&!g.preventGesture&&v.pressHandler({eventSource:v,pointerType:E.type,position:_(E.contactPos,v.element),buttons:te.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData}):2===te.contacts&&v.pinchHandler&&"touch"===E.type&&(q.pinchGPoints=te.asArray(),q.lastPinchDist=q.currentPinchDist=q.pinchGPoints[0].currentPos.distanceTo(q.pinchGPoints[1].currentPos),q.lastPinchCenter=q.currentPinchCenter=I(q.pinchGPoints[0].currentPos,q.pinchGPoints[1].currentPos)))}function Ne(v,g,E,S){var Ee,Ze,we,st,q=s[v.hash],te=v.getActivePointersListByType(E.type),ct=!1;if(void 0!==g.originalEvent.buttons?te.buttons=g.originalEvent.buttons:0===S?te.buttons^=-2:1===S?te.buttons^=-5:2===S?te.buttons^=-3:3===S?te.buttons^=-9:4===S?te.buttons^=-17:5===S&&(te.buttons^=-33),g.shouldCapture=!1,0!==S)return g.shouldReleaseCapture=!1,void(v.nonPrimaryReleaseHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,v.nonPrimaryReleaseHandler({eventSource:v,pointerType:E.type,position:_(E.currentPos,v.element),button:S,buttons:te.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData})));(we=te.getById(E.id))?(te.removeContact(),we.captured&&(ct=!0),we.lastPos=we.currentPos,we.lastTime=we.currentTime,we.currentPos=E.currentPos,we.currentTime=E.currentTime,we.insideElement||$(v,te,we),Ee=we.currentPos,Ze=we.currentTime):(E.captured=!1,E.insideElementPressed=!1,E.insideElement=!0,U(te,E),we=E),!g.preventGesture&&!g.defaultPrevented&&(ct?(g.shouldReleaseCapture=!0,g.preventDefault=!0,(v.dragHandler||v.dragEndHandler||v.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(v,we),0===te.contacts?(v.releaseHandler&&Ee&&v.releaseHandler({eventSource:v,pointerType:we.type,position:_(Ee,v.element),buttons:te.buttons,insideElementPressed:we.insideElementPressed,insideElementReleased:we.insideElement,isTouchEvent:"touch"===we.type,originalEvent:g.originalEvent,userData:v.userData}),v.dragEndHandler&&q.sentDragEvent&&v.dragEndHandler({eventSource:v,pointerType:we.type,position:_(we.currentPos,v.element),speed:we.speed,direction:we.direction,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===we.type,originalEvent:g.originalEvent,userData:v.userData}),q.sentDragEvent=!1,(v.clickHandler||v.dblClickHandler)&&we.insideElement&&(st=Ze-we.contactTime<=v.clickTimeThreshold&&we.contactPos.distanceTo(Ee)<=v.clickDistThreshold,v.clickHandler&&v.clickHandler({eventSource:v,pointerType:we.type,position:_(we.currentPos,v.element),quick:st,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===we.type,originalEvent:g.originalEvent,originalTarget:we.originalTarget,userData:v.userData}),v.dblClickHandler&&st&&(te.clicks++,1===te.clicks?(q.lastClickPos=Ee,q.dblClickTimeOut=setTimeout(function(){te.clicks=0},v.dblClickTimeThreshold)):2===te.clicks&&(clearTimeout(q.dblClickTimeOut),te.clicks=0,q.lastClickPos.distanceTo(Ee)<=v.dblClickDistThreshold&&v.dblClickHandler({eventSource:v,pointerType:we.type,position:_(we.currentPos,v.element),shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===we.type,originalEvent:g.originalEvent,userData:v.userData}),q.lastClickPos=null)))):2===te.contacts&&v.pinchHandler&&"touch"===we.type&&(q.pinchGPoints=te.asArray(),q.lastPinchDist=q.currentPinchDist=q.pinchGPoints[0].currentPos.distanceTo(q.pinchGPoints[1].currentPos),q.lastPinchCenter=q.currentPinchCenter=I(q.pinchGPoints[0].currentPos,q.pinchGPoints[1].currentPos))):(g.shouldReleaseCapture=!1,v.releaseHandler&&Ee&&(v.releaseHandler({eventSource:v,pointerType:we.type,position:_(Ee,v.element),buttons:te.buttons,insideElementPressed:we.insideElementPressed,insideElementReleased:we.insideElement,isTouchEvent:"touch"===we.type,originalEvent:g.originalEvent,userData:v.userData}),g.preventDefault=!0)))}function vt(v,g,E){var te,Ee,Ze,S=s[v.hash],q=v.getActivePointersListByType(E.type);void 0!==g.originalEvent.buttons&&(q.buttons=g.originalEvent.buttons),(te=q.getById(E.id))&&(te.lastPos=te.currentPos,te.lastTime=te.currentTime,te.currentPos=E.currentPos,te.currentTime=E.currentTime,g.shouldCapture=!1,g.shouldReleaseCapture=!1,v.stopHandler&&"mouse"===E.type&&(clearTimeout(v.stopTimeOut),v.stopTimeOut=setTimeout(function(){!function Ci(v,g,E){v.stopHandler&&v.stopHandler({eventSource:v,pointerType:E,position:R(g,v.element),buttons:v.getActivePointersListByType(E).buttons,isTouchEvent:"touch"===E,originalEvent:g,userData:v.userData})}(v,g.originalEvent,E.type)},v.stopDelay)),0===q.contacts?v.moveHandler&&v.moveHandler({eventSource:v,pointerType:E.type,position:_(E.currentPos,v.element),buttons:q.buttons,isTouchEvent:"touch"===E.type,originalEvent:g.originalEvent,userData:v.userData}):1===q.contacts?(v.moveHandler&&(te=q.asArray()[0],v.moveHandler({eventSource:v,pointerType:te.type,position:_(te.currentPos,v.element),buttons:q.buttons,isTouchEvent:"touch"===te.type,originalEvent:g.originalEvent,userData:v.userData})),v.dragHandler&&!g.preventGesture&&!g.defaultPrevented&&(Ze=(te=q.asArray()[0]).currentPos.minus(te.lastPos),v.dragHandler({eventSource:v,pointerType:te.type,position:_(te.currentPos,v.element),buttons:q.buttons,delta:Ze,speed:te.speed,direction:te.direction,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===te.type,originalEvent:g.originalEvent,userData:v.userData}),g.preventDefault=!0,S.sentDragEvent=!0)):2===q.contacts&&(v.moveHandler&&(Ee=q.asArray(),v.moveHandler({eventSource:v,pointerType:Ee[0].type,position:_(I(Ee[0].currentPos,Ee[1].currentPos),v.element),buttons:q.buttons,isTouchEvent:"touch"===Ee[0].type,originalEvent:g.originalEvent,userData:v.userData})),v.pinchHandler&&"touch"===E.type&&!g.preventGesture&&!g.defaultPrevented&&(Ze=S.pinchGPoints[0].currentPos.distanceTo(S.pinchGPoints[1].currentPos))!==S.currentPinchDist&&(S.lastPinchDist=S.currentPinchDist,S.currentPinchDist=Ze,S.lastPinchCenter=S.currentPinchCenter,S.currentPinchCenter=I(S.pinchGPoints[0].currentPos,S.pinchGPoints[1].currentPos),v.pinchHandler({eventSource:v,pointerType:"touch",gesturePoints:S.pinchGPoints,lastCenter:_(S.lastPinchCenter,v.element),center:_(S.currentPinchCenter,v.element),lastDistance:S.lastPinchDist,distance:S.currentPinchDist,shift:g.originalEvent.shiftKey,originalEvent:g.originalEvent,userData:v.userData}),g.preventDefault=!0)))}function Lt(v,g,E){var q,S=v.getActivePointersListByType(E.type);(q=S.getById(E.id))&&$(v,S,q)}e.MouseTracker.gesturePointVelocityTracker=(v=[],g=0,E=0,S=function(Ze,we){return Ze.hash.toString()+we.type+we.id.toString()},q=function(){var Ze,ct,st,k,H,we=v.length,jt=e.now();for(k=jt-E,E=jt,Ze=0;Ze<we;Ze++)(st=(ct=v[Ze]).gPoint).direction=Math.atan2(st.currentPos.y-ct.lastPos.y,st.currentPos.x-ct.lastPos.x),H=ct.lastPos.distanceTo(st.currentPos),ct.lastPos=st.currentPos,st.speed=1e3*H/(k+1)*.75+.25*st.speed},{addPoint:function(Ze,we){var ct=S(Ze,we);v.push({guid:ct,gPoint:we,lastPos:we.currentPos}),1===v.length&&(E=e.now(),g=window.setInterval(q,50))},removePoint:function(Ze,we){var st,ct=S(Ze,we),jt=v.length;for(st=0;st<jt;st++)if(v[st].guid===ct){v.splice(st,1),0==--jt&&window.clearInterval(g);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var v=document.createElement("div");return e.isFunction(v.setPointerCapture)&&e.isFunction(v.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var v=document.createElement("div");return e.isFunction(v.setCapture)&&e.isFunction(v.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(v){this._gPoints=[],this.type=v,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(v){return this._gPoints.push(v)},removeById:function(v){var g,E=this._gPoints.length;for(g=0;g<E;g++)if(this._gPoints[g].id===v){this._gPoints.splice(g,1);break}return this._gPoints.length},getByIndex:function(v){return v<this._gPoints.length?this._gPoints[v]:null},getById:function(v){var g,E=this._gPoints.length;for(g=0;g<E;g++)if(this._gPoints[g].id===v)return this._gPoints[g];return null},getPrimary:function(v){var g,E=this._gPoints.length;for(g=0;g<E;g++)if(this._gPoints[g].isPrimary)return this._gPoints[g];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(i,s,h){var d=i.parentNode;"number"==typeof s&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),s={anchor:s}),s.attachToViewer=void 0===s.attachToViewer||s.attachToViewer,this.autoFade=void 0===s.autoFade||s.autoFade,this.element=i,this.anchor=s.anchor,this.container=h,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof s.top?s.top+"px":s.top,this.wrapper.style.left="number"==typeof s.left?s.left+"px":s.left,this.wrapper.style.height="number"==typeof s.height?s.height+"px":s.height,this.wrapper.style.width="number"==typeof s.width?s.width+"px":s.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),s.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):d.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(i){this.wrapper.style.display=i?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(i){e.setElementOpacity(this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?this.element:this.wrapper,i,!0)}}}(OpenSeadragon),function(e){function i(s,h){var r,d=s.controls;for(r=d.length-1;r>=0;r--)if(d[r].element===h)return r;return-1}e.ControlDock=function(s){var d,r,h=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},s),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),r=0;r<h.length;r++)this.controls[d=h[r]]=e.makeNeutralElement("div"),this.controls[d].style.position="absolute",d.match("left")&&(this.controls[d].style.left="0px"),d.match("right")&&(this.controls[d].style.right="0px"),d.match("top")&&(this.controls[d].style.top="0px"),d.match("bottom")&&(this.controls[d].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(s,h){var d=null;if(!(i(this,s=e.getElement(s))>=0)){switch(h.anchor){case e.ControlAnchor.TOP_RIGHT:d=this.controls.topright,s.style.position="relative",s.style.paddingRight="0px",s.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:d=this.controls.bottomright,s.style.position="relative",s.style.paddingRight="0px",s.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:d=this.controls.bottomleft,s.style.position="relative",s.style.paddingLeft="0px",s.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:d=this.controls.topleft,s.style.position="relative",s.style.paddingLeft="0px",s.style.paddingTop="0px";break;default:d=this.container,s.style.margin="0px",s.style.padding="0px"}this.controls.push(new e.Control(s,h,d)),s.style.display="inline-block"}},removeControl:function(s){var h=i(this,s=e.getElement(s));return h>=0&&(this.controls[h].destroy(),this.controls.splice(h,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var s;for(s=this.controls.length-1;s>=0;s--)if(this.controls[s].isVisible())return!0;return!1},setControlsEnabled:function(s){var h;for(h=this.controls.length-1;h>=0;h--)this.controls[h].setVisible(s);return this}}}(OpenSeadragon),OpenSeadragon.Placement=OpenSeadragon.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}}),function(e){var i={},s=1;function h(f){return f=e.getElement(f),new e.Point(0===f.clientWidth?1:f.clientWidth,0===f.clientHeight?1:f.clientHeight)}function r(f,D){if(D instanceof e.Overlay)return D;var U=null;if(D.element)U=e.getElement(D.element);else{var $=D.id?D.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(U=e.getElement(D.id))||((U=document.createElement("a")).href="#/overlay/"+$),U.id=$,e.addClass(U,D.className?D.className:"openseadragon-overlay")}var ne=D.location,ae=D.width,oe=D.height;if(!ne){var De=D.x,Ge=D.y;if(void 0!==D.px){var ke=f.viewport.imageToViewportRectangle(new e.Rect(D.px,D.py,ae||0,oe||0));De=ke.x,Ge=ke.y,ae=void 0!==ae?ke.width:void 0,oe=void 0!==oe?ke.height:void 0}ne=new e.Point(De,Ge)}var Q=D.placement;return Q&&"string"===e.type(Q)&&(Q=e.Placement[D.placement.toUpperCase()]),new e.Overlay({element:U,location:ne,placement:Q,onDraw:D.onDraw,checkResize:D.checkResize,width:ae,height:oe,rotationMode:D.rotationMode})}function o(f,D){var U;for(U=f.length-1;U>=0;U--)if(f[U].element===D)return U;return-1}function a(f,D){return e.requestAnimationFrame(function(){D(f)})}function p(f){e.requestAnimationFrame(function(){!function x(f){var $,ne;if(f.controlsShouldFade){for($=1-(e.now()-f.controlsFadeBeginTime)/f.controlsFadeLength,$=Math.min(1,$),$=Math.max(0,$),ne=f.controls.length-1;ne>=0;ne--)f.controls[ne].autoFade&&f.controls[ne].setOpacity($);$>0&&p(f)}}(f)})}function w(f){!f.autoHideControls||(f.controlsShouldFade=!0,f.controlsFadeBeginTime=e.now()+f.controlsFadeDelay,window.setTimeout(function(){p(f)},f.controlsFadeDelay))}function A(f){var D;for(f.controlsShouldFade=!1,D=f.controls.length-1;D>=0;D--)f.controls[D].setOpacity(1)}function P(){A(this)}function O(){w(this)}function b(f){var D={tracker:f.eventSource,position:f.position,originalEvent:f.originalEvent,preventDefault:f.preventDefault};this.raiseEvent("canvas-contextmenu",D),f.preventDefault=D.preventDefault}function R(f){var D={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",D),D.preventDefaultAction||f.ctrl||f.alt||f.meta)f.preventDefault=!1;else switch(f.keyCode){case 38:D.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 40:D.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 37:D.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 39:D.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;default:f.preventDefault=!1}}function _(f){var D={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",D),D.preventDefaultAction||f.ctrl||f.alt||f.meta)f.preventDefault=!1;else switch(f.keyCode){case 43:case 61:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 45:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 119:case 87:D.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 115:case 83:D.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 97:D.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 100:D.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 114:this.viewport.setRotation(e.positiveModulo(this.viewport.flipped?this.viewport.degrees-this.rotationIncrement:this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 82:this.viewport.setRotation(e.positiveModulo(this.viewport.flipped?this.viewport.degrees+this.rotationIncrement:this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 102:this.viewport.toggleFlip(),f.preventDefault=!0;break;case 106:this.goToPreviousPage();break;case 107:this.goToNextPage();break;default:f.preventDefault=!1}}function I(f){var D;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x);var $={tracker:f.eventSource,position:f.position,quick:f.quick,shift:f.shift,originalEvent:f.originalEvent,originalTarget:f.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",$),!$.preventDefaultAction&&this.viewport&&f.quick&&(D=this.gestureSettingsByDeviceType(f.pointerType)).clickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,D.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())}function X(f){var D,U={tracker:f.eventSource,position:f.position,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",U),!U.preventDefaultAction&&this.viewport&&(D=this.gestureSettingsByDeviceType(f.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,D.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())}function Y(f){var D,U={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,delta:f.delta,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",U),(D=this.gestureSettingsByDeviceType(f.pointerType)).dragToPan&&!U.preventDefaultAction&&this.viewport){if(this.panHorizontal||(f.delta.x=0),this.panVertical||(f.delta.y=0),this.viewport.flipped&&(f.delta.x=-f.delta.x),this.constrainDuringPan){var $=this.viewport.deltaPointsFromPixels(f.delta.negate());this.viewport.centerSpringX.target.value+=$.x,this.viewport.centerSpringY.target.value+=$.y;var ne=this.viewport.getBounds(),ae=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=$.x,this.viewport.centerSpringY.target.value-=$.y,ne.x!==ae.x&&(f.delta.x=0),ne.y!==ae.y&&(f.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(f.delta.negate()),D.flickEnabled&&!this.constrainDuringPan)}}function ie(f){var D={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",D),!D.preventDefaultAction&&this.viewport){var U=this.gestureSettingsByDeviceType(f.pointerType);if(U.flickEnabled&&f.speed>=U.flickMinSpeed){var $=0;this.panHorizontal&&($=U.flickMomentum*f.speed*Math.cos(f.direction));var ne=0;this.panVertical&&(ne=U.flickMomentum*f.speed*Math.sin(f.direction));var ae=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),oe=this.viewport.pointFromPixel(new e.Point(ae.x-$,ae.y-ne));this.viewport.panTo(oe,!1)}this.viewport.applyConstraints()}}function ue(f){this.raiseEvent("canvas-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function l(f){this.raiseEvent("canvas-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function Te(f){this.raiseEvent("canvas-press",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function ge(f){this.raiseEvent("canvas-release",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function Fe(f){this.raiseEvent("canvas-nonprimary-press",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function Ue(f){this.raiseEvent("canvas-nonprimary-release",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function at(f){var D,U,ne,ae={tracker:f.eventSource,pointerType:f.pointerType,gesturePoints:f.gesturePoints,lastCenter:f.lastCenter,center:f.center,lastDistance:f.lastDistance,distance:f.distance,shift:f.shift,originalEvent:f.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",ae),this.viewport&&((D=this.gestureSettingsByDeviceType(f.pointerType)).pinchToZoom&&(!ae.preventDefaultPanAction||!ae.preventDefaultZoomAction)&&(U=this.viewport.pointFromPixel(f.center,!0),D.zoomToRefPoint&&!ae.preventDefaultPanAction&&(ne=this.viewport.pointFromPixel(f.lastCenter,!0).minus(U),this.panHorizontal||(ne.x=0),this.panVertical||(ne.y=0),this.viewport.panBy(ne,!0)),ae.preventDefaultZoomAction||this.viewport.zoomBy(f.distance/f.lastDistance,U,!0),this.viewport.applyConstraints()),D.pinchRotate&&!ae.preventDefaultRotateAction)){var oe=Math.atan2(f.gesturePoints[0].currentPos.y-f.gesturePoints[1].currentPos.y,f.gesturePoints[0].currentPos.x-f.gesturePoints[1].currentPos.x),De=Math.atan2(f.gesturePoints[0].lastPos.y-f.gesturePoints[1].lastPos.y,f.gesturePoints[0].lastPos.x-f.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(oe-De)*(180/Math.PI))}}function be(f){var D,U,$,ne;(ne=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=ne,this.raiseEvent("canvas-scroll",D={tracker:f.eventSource,position:f.position,scroll:f.scroll,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1,preventDefault:!0}),!D.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x),(U=this.gestureSettingsByDeviceType(f.pointerType)).scrollToZoom&&($=Math.pow(this.zoomPerScroll,f.scroll),this.viewport.zoomBy($,U.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())),f.preventDefault=D.preventDefault):f.preventDefault=!0}function Pt(f){i[this.hash].mouseInside=!0,A(this),this.raiseEvent("container-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function ft(f){f.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||w(this)),this.raiseEvent("container-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function Ve(f){(function Xe(f){if(!f._opening&&i[f.hash]){if(f.autoResize){var D=h(f.container),U=i[f.hash].prevContainerSize;if(!D.equals(U)){var $=f.viewport;if(f.preserveImageSizeOnResize){var ne=U.x/D.x,ae=$.getZoom()*ne,oe=$.getCenter();$.resize(D,!1),$.zoomTo(ae,null,!0),$.panTo(oe,!0)}else{var De=$.getBounds();$.resize(D,!0),$.fitBoundsWithConstraints(De,!0)}i[f.hash].prevContainerSize=D,i[f.hash].forceRedraw=!0}}var Ge=f.viewport.update(),ke=f.world.update()||Ge;Ge&&f.raiseEvent("viewport-change"),f.referenceStrip&&(ke=f.referenceStrip.update(f.viewport)||ke);var Q=i[f.hash].animating;!Q&&ke&&(f.raiseEvent("animation-start"),A(f));var Oe=Q&&!ke;Oe&&(i[f.hash].animating=!1),(ke||Oe||i[f.hash].forceRedraw||f.world.needsDraw())&&(function Et(f){f.imageLoader.clear(),f.drawer.clear(),f.world.draw(),f.raiseEvent("update-viewport",{})}(f),f._drawOverlays(),f.navigator&&f.navigator.update(f.viewport),i[f.hash].forceRedraw=!1,ke&&f.raiseEvent("animation")),Oe&&(f.raiseEvent("animation-finish"),i[f.hash].mouseInside||w(f)),i[f.hash].animating=ke}})(f),f._updateRequestId=!!f.isOpen()&&a(f,Ve)}function ye(f,D){return f?f+D:D}function mt(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,Ct(this)}function Qt(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,Ct(this)}function At(){i[this.hash].zooming=!1}function Ct(f){e.requestAnimationFrame(e.delegate(f,Mt))}function Mt(){var f,U;i[this.hash].zooming&&this.viewport&&(f=e.now(),U=Math.pow(i[this.hash].zoomFactor,(f-i[this.hash].lastZoomTime)/1e3),this.viewport.zoomBy(U),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=f,Ct(this))}function Bt(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Xt(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function $t(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function pt(){this.viewport&&this.viewport.goHome()}function ot(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Ft(){if(this.viewport){var f=this.viewport.getRotation();f=e.positiveModulo(this.viewport.flipped?f+this.rotationIncrement:f-this.rotationIncrement,360),this.viewport.setRotation(f)}}function Ht(){if(this.viewport){var f=this.viewport.getRotation();f=e.positiveModulo(this.viewport.flipped?f-this.rotationIncrement:f+this.rotationIncrement,360),this.viewport.setRotation(f)}}function ci(){this.viewport.toggleFlip()}e.Viewer=function(f){var $,ne,D=arguments,U=this;if(e.isPlainObject(f)||(f={id:D[0],xmlPath:D.length>1?D[1]:void 0,prefixUrl:D.length>2?D[2]:void 0,controls:D.length>3?D[3]:void 0,overlays:D.length>4?D[4]:void 0}),f.config&&(e.extend(!0,f,f.config),delete f.config),e.extend(!0,this,{id:f.id,hash:f.hash||s++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,f),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==i[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(ne){var ae=e.getString("Errors.OpenFailed",ne.eventSource,ne.message);U._showMessage(ae)}),e.ControlDock.call(this,f),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(ne=this.canvas.style).width="100%",ne.height="100%",ne.overflow="hidden",ne.position="absolute",ne.top="0px",ne.left="0px",e.setElementTouchActionNone(this.canvas),""!==f.tabIndex&&(this.canvas.tabIndex=void 0===f.tabIndex?0:f.tabIndex),this.container.className="openseadragon-container",function(ne){ne.width="100%",ne.height="100%",ne.position="relative",ne.overflow="hidden",ne.left="0px",ne.top="0px",ne.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,b),keyDownHandler:e.delegate(this,R),keyHandler:e.delegate(this,_),clickHandler:e.delegate(this,I),dblClickHandler:e.delegate(this,X),dragHandler:e.delegate(this,Y),dragEndHandler:e.delegate(this,ie),enterHandler:e.delegate(this,ue),leaveHandler:e.delegate(this,l),pressHandler:e.delegate(this,Te),releaseHandler:e.delegate(this,ge),nonPrimaryPressHandler:e.delegate(this,Fe),nonPrimaryReleaseHandler:e.delegate(this,Ue),scrollHandler:e.delegate(this,be),pinchHandler:e.delegate(this,at)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,Pt),leaveHandler:e.delegate(this,ft)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=h(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(ne){U.source=U.world.getItemAt(0).source,i[U.hash].forceRedraw=!0,U._updateRequestId||(U._updateRequestId=a(U,Ve))}),this.world.addHandler("remove-item",function(ne){U.source=U.world.getItemCount()?U.world.getItemAt(0).source:null,i[U.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(ne){U.viewport&&U.viewport._setContentBounds(U.world.getHomeBounds(),U.world.getContentFactor())}),this.world.addHandler("item-index-change",function(ne){U.source=U.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:f.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&($=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice($,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&($=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice($,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),$=0;$<this.customControls.length;$++)this.addControl(this.customControls[$].id,{anchor:this.customControls[$].anchor});e.requestAnimationFrame(function(){w(U)}),void 0!==this.imageSmoothingEnabled&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(f){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(f)},openTileSource:function(f){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(f)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(f,D){var U=this;if(this.close(),!f)return this;if(this.sequenceMode&&e.isArray(f))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0!==D&&!isNaN(D)&&(this.initialPage=D),this.tileSources=f,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(f)||(f=[f]),!f.length)return this;this._opening=!0;for(var oe,$=f.length,ne=0,ae=0,De=function(){if(ne+ae===$)if(ne){(U._firstOpen||!U.preserveViewport)&&(U.viewport.goHome(!0),U.viewport.update()),U._firstOpen=!1;var Q=f[0];if(Q.tileSource&&(Q=Q.tileSource),U.overlays&&!U.preserveOverlays)for(var Oe=0;Oe<U.overlays.length;Oe++)U.currentOverlays[Oe]=r(U,U.overlays[Oe]);U._drawOverlays(),U._opening=!1,U.raiseEvent("open",{source:Q})}else U._opening=!1,U.raiseEvent("open-failed",oe)},Ge=function(Q){(!e.isPlainObject(Q)||!Q.tileSource)&&(Q={tileSource:Q}),void 0!==Q.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Q.index),void 0===Q.collectionImmediately&&(Q.collectionImmediately=!0);var Oe=Q.success;Q.success=function(vt){if(ne++,Q.tileSource.overlays)for(var Lt=0;Lt<Q.tileSource.overlays.length;Lt++)U.addOverlay(Q.tileSource.overlays[Lt]);Oe&&Oe(vt),De()};var Ne=Q.error;Q.error=function(vt){ae++,oe||(oe=vt),Ne&&Ne(vt),De()},U.addTiledImage(Q)},ke=0;ke<f.length;ke++)Ge(f[ke]);return this},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(i[this.hash]){if(this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.removeAllHandlers(),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(f){return this.innerTracker.setTracking(f),this.outerTracker.setTracking(f),this.raiseEvent("mouse-enabled",{enabled:f}),this},areControlsEnabled:function(){var D,f=this.controls.length;for(D=0;D<this.controls.length;D++)f=f&&this.controls[D].isVisible();return f},setControlsEnabled:function(f){return f?A(this):w(this),this.raiseEvent("controls-enabled",{enabled:f}),this},setDebugMode:function(f){for(var D=0;D<this.world.getItemCount();D++)this.world.getItemAt(D).debugMode=f;this.debugMode=f,this.forceRedraw()},isFullPage:function(){return i[this.hash].fullPage},setFullPage:function(f){var ae,oe,D=document.body,U=D.style,$=document.documentElement.style,ne=this;if(f===this.isFullPage())return this;var De={fullPage:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",De),De.preventDefaultAction)return this;if(f){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=U.margin,this.docMargin=$.margin,U.margin="0",$.margin="0",this.bodyPadding=U.padding,this.docPadding=$.padding,U.padding="0",$.padding="0",this.bodyWidth=U.width,this.docWidth=$.width,U.width="100%",$.width="100%",this.bodyHeight=U.height,this.docHeight=$.height,U.height="100%",$.height="100%",this.bodyDisplay=U.display,U.display="block",this.previousBody=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,ae=D.childNodes.length,oe=0;oe<ae;oe++)this.previousBody.push(D.childNodes[0]),D.removeChild(D.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,D.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),D.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,e.delegate(this,Pt)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,U.margin=this.bodyMargin,$.margin=this.docMargin,U.padding=this.bodyPadding,$.padding=this.docPadding,U.width=this.bodyWidth,$.width=this.docWidth,U.height=this.bodyHeight,$.height=this.docHeight,U.display=this.bodyDisplay,D.removeChild(this.element),ae=this.previousBody.length,oe=0;oe<ae;oe++)D.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(D.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;var Ge=0,ke=function(){e.setPageScroll(ne.pageScroll);var Q=e.getPageScroll();++Ge<10&&(Q.x!==ne.pageScroll.x||Q.y!==ne.pageScroll.y)&&e.requestAnimationFrame(ke)};e.requestAnimationFrame(ke),i[this.hash].fullPage=!1,e.delegate(this,ft)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:f}),this},setFullScreen:function(f){var D=this;if(!e.supportsFullScreen)return this.setFullPage(f);if(e.isFullScreen()===f)return this;var U={fullScreen:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",U),U.preventDefaultAction)return this;if(f){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var $=function(){var ne=e.isFullScreen();ne||(e.removeEvent(document,e.fullScreenEventName,$),e.removeEvent(document,e.fullScreenErrorEventName,$),D.setFullPage(!1),D.isFullPage()&&(D.element.style.width=D.fullPageStyleWidth,D.element.style.height=D.fullPageStyleHeight)),D.navigator&&D.viewport&&setTimeout(function(){D.navigator.update(D.viewport)}),D.raiseEvent("full-screen",{fullScreen:ne})};e.addEvent(document,e.fullScreenEventName,$),e.addEvent(document,e.fullScreenErrorEventName,$),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(f){return this.container.style.visibility=f?"":"hidden",this.raiseEvent("visible",{visible:f}),this},addTiledImage:function(f){e.console.assert(f,"[Viewer.addTiledImage] options is required"),e.console.assert(f.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!f.replace||f.index>-1&&f.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var D=this;f.replace&&(f.replaceItem=D.world.getItemAt(f.index)),this._hideMessage(),void 0===f.placeholderFillStyle&&(f.placeholderFillStyle=this.placeholderFillStyle),void 0===f.opacity&&(f.opacity=this.opacity),void 0===f.preload&&(f.preload=this.preload),void 0===f.compositeOperation&&(f.compositeOperation=this.compositeOperation),void 0===f.crossOriginPolicy&&(f.crossOriginPolicy=void 0!==f.tileSource.crossOriginPolicy?f.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===f.ajaxWithCredentials&&(f.ajaxWithCredentials=this.ajaxWithCredentials),void 0===f.loadTilesWithAjax&&(f.loadTilesWithAjax=this.loadTilesWithAjax),null==f.ajaxHeaders?f.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(f.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(f.ajaxHeaders=e.extend({},this.ajaxHeaders,f.ajaxHeaders));var U={options:f};function $(oe){for(var De=0;De<D._loadQueue.length;De++)if(D._loadQueue[De]===U){D._loadQueue.splice(De,1);break}0===D._loadQueue.length&&ne(U),D.raiseEvent("add-item-failed",oe),f.error&&f.error(oe)}function ne(oe){D.collectionMode&&(D.world.arrange({immediately:oe.options.collectionImmediately,rows:D.collectionRows,columns:D.collectionColumns,layout:D.collectionLayout,tileSize:D.collectionTileSize,tileMargin:D.collectionTileMargin}),D.world.setAutoRefigureSizes(!0))}function ae(){for(var oe,De,Ge;D._loadQueue.length&&(oe=D._loadQueue[0]).tileSource;){if(D._loadQueue.splice(0,1),oe.options.replace){var ke=D.world.getIndexOfItem(oe.options.replaceItem);-1!==ke&&(oe.options.index=ke),D.world.removeItem(oe.options.replaceItem)}De=new e.TiledImage({viewer:D,source:oe.tileSource,viewport:D.viewport,drawer:D.drawer,tileCache:D.tileCache,imageLoader:D.imageLoader,x:oe.options.x,y:oe.options.y,width:oe.options.width,height:oe.options.height,fitBounds:oe.options.fitBounds,fitBoundsPlacement:oe.options.fitBoundsPlacement,clip:oe.options.clip,placeholderFillStyle:oe.options.placeholderFillStyle,opacity:oe.options.opacity,preload:oe.options.preload,degrees:oe.options.degrees,flipped:oe.options.flipped,compositeOperation:oe.options.compositeOperation,springStiffness:D.springStiffness,animationTime:D.animationTime,minZoomImageRatio:D.minZoomImageRatio,wrapHorizontal:D.wrapHorizontal,wrapVertical:D.wrapVertical,immediateRender:D.immediateRender,blendTime:D.blendTime,alwaysBlend:D.alwaysBlend,minPixelRatio:D.minPixelRatio,smoothTileEdgesMinZoom:D.smoothTileEdgesMinZoom,iOSDevice:D.iOSDevice,crossOriginPolicy:oe.options.crossOriginPolicy,ajaxWithCredentials:oe.options.ajaxWithCredentials,loadTilesWithAjax:oe.options.loadTilesWithAjax,ajaxHeaders:oe.options.ajaxHeaders,debugMode:D.debugMode,subPixelRoundingForTransparency:D.subPixelRoundingForTransparency}),D.collectionMode&&D.world.setAutoRefigureSizes(!1),D.navigator&&(Ge=e.extend({},oe.options,{replace:!1,originalTiledImage:De,tileSource:oe.tileSource}),D.navigator.addTiledImage(Ge)),D.world.addItem(De,{index:oe.options.index}),0===D._loadQueue.length&&ne(oe),1===D.world.getItemCount()&&!D.preserveViewport&&D.viewport.goHome(!0),oe.options.success&&oe.options.success({item:De})}}e.isArray(f.tileSource)?setTimeout(function(){$({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:f.tileSource,options:f})}):(this._loadQueue.push(U),function d(f,D,U,$,ne){var ae=f;if("string"===e.type(D))if(D.match(/^\s*<.*>\s*$/))D=e.parseXml(D);else if(D.match(/^\s*[{[].*[}\]]\s*$/))try{var oe=e.parseJSON(D);D=oe}catch(Ge){}function De(Ge,ke){Ge.ready?$(Ge):(Ge.addHandler("ready",function(){$(Ge)}),Ge.addHandler("open-failed",function(Q){ne({message:Q.message,source:ke})}))}setTimeout(function(){if("string"===e.type(D))(D=new e.TileSource({url:D,crossOriginPolicy:void 0!==U.crossOriginPolicy?U.crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,ajaxHeaders:U.ajaxHeaders?U.ajaxHeaders:f.ajaxHeaders,splitHashDataForPost:f.splitHashDataForPost,useCanvas:f.useCanvas,success:function(Oe){$(Oe.tileSource)}})).addHandler("open-failed",function(Oe){ne(Oe)});else if(e.isPlainObject(D)||D.nodeType)if(void 0===D.crossOriginPolicy&&(void 0!==U.crossOriginPolicy||void 0!==f.crossOriginPolicy)&&(D.crossOriginPolicy=void 0!==U.crossOriginPolicy?U.crossOriginPolicy:f.crossOriginPolicy),void 0===D.ajaxWithCredentials&&(D.ajaxWithCredentials=f.ajaxWithCredentials),void 0===D.useCanvas&&(D.useCanvas=f.useCanvas),e.isFunction(D.getTileUrl)){var Ge=new e.TileSource(D);Ge.getTileUrl=D.getTileUrl,$(Ge)}else{var ke=e.TileSource.determineType(ae,D);if(!ke)return void ne({message:"Unable to load TileSource",source:D});var Q=ke.prototype.configure.apply(ae,[D]);De(new ke(Q),D)}else De(D,D)})}(this,f.tileSource,f,function(oe){U.tileSource=oe,ae()},function(oe){oe.options=f,$(oe),ae()}))},addSimpleImage:function(f){e.console.assert(f,"[Viewer.addSimpleImage] options is required"),e.console.assert(f.url,"[Viewer.addSimpleImage] options.url is required");var D=e.extend({},f,{tileSource:{type:"image",url:f.url}});delete D.url,this.addTiledImage(D)},addLayer:function(f){var D=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var U=e.extend({},f,{success:function($){D.raiseEvent("add-layer",{options:f,drawer:$.item})},error:function($){D.raiseEvent("add-layer-failed",$)}});return this.addTiledImage(U),this},getLayerAtLevel:function(f){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(f)},getLevelOfLayer:function(f){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(f)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(f,D){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(f,D)},removeLayer:function(f){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(f)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var f=e.delegate(this,P),D=e.delegate(this,O),U=e.delegate(this,this.goToNextPage),$=e.delegate(this,this.goToPreviousPage),ne=this.navImages,ae=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(ae=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:ye(this.prefixUrl,ne.previous.REST),srcGroup:ye(this.prefixUrl,ne.previous.GROUP),srcHover:ye(this.prefixUrl,ne.previous.HOVER),srcDown:ye(this.prefixUrl,ne.previous.DOWN),onRelease:$,onFocus:f,onBlur:D}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:ye(this.prefixUrl,ne.next.REST),srcGroup:ye(this.prefixUrl,ne.next.GROUP),srcHover:ye(this.prefixUrl,ne.next.HOVER),srcDown:ye(this.prefixUrl,ne.next.DOWN),onRelease:U,onFocus:f,onBlur:D}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),ae&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var f=e.delegate(this,mt),D=e.delegate(this,At),U=e.delegate(this,Bt),$=e.delegate(this,Qt),ne=e.delegate(this,Xt),ae=e.delegate(this,pt),oe=e.delegate(this,ot),De=e.delegate(this,Ft),Ge=e.delegate(this,Ht),ke=e.delegate(this,ci),Q=e.delegate(this,P),Oe=e.delegate(this,O),Ne=this.navImages,vt=[],Lt=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(Lt=!1),this.showZoomControl&&(vt.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:ye(this.prefixUrl,Ne.zoomIn.REST),srcGroup:ye(this.prefixUrl,Ne.zoomIn.GROUP),srcHover:ye(this.prefixUrl,Ne.zoomIn.HOVER),srcDown:ye(this.prefixUrl,Ne.zoomIn.DOWN),onPress:f,onRelease:D,onClick:U,onEnter:f,onExit:D,onFocus:Q,onBlur:Oe})),vt.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:ye(this.prefixUrl,Ne.zoomOut.REST),srcGroup:ye(this.prefixUrl,Ne.zoomOut.GROUP),srcHover:ye(this.prefixUrl,Ne.zoomOut.HOVER),srcDown:ye(this.prefixUrl,Ne.zoomOut.DOWN),onPress:$,onRelease:D,onClick:ne,onEnter:$,onExit:D,onFocus:Q,onBlur:Oe}))),this.showHomeControl&&vt.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:ye(this.prefixUrl,Ne.home.REST),srcGroup:ye(this.prefixUrl,Ne.home.GROUP),srcHover:ye(this.prefixUrl,Ne.home.HOVER),srcDown:ye(this.prefixUrl,Ne.home.DOWN),onRelease:ae,onFocus:Q,onBlur:Oe})),this.showFullPageControl&&vt.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:ye(this.prefixUrl,Ne.fullpage.REST),srcGroup:ye(this.prefixUrl,Ne.fullpage.GROUP),srcHover:ye(this.prefixUrl,Ne.fullpage.HOVER),srcDown:ye(this.prefixUrl,Ne.fullpage.DOWN),onRelease:oe,onFocus:Q,onBlur:Oe})),this.showRotationControl&&(vt.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:ye(this.prefixUrl,Ne.rotateleft.REST),srcGroup:ye(this.prefixUrl,Ne.rotateleft.GROUP),srcHover:ye(this.prefixUrl,Ne.rotateleft.HOVER),srcDown:ye(this.prefixUrl,Ne.rotateleft.DOWN),onRelease:De,onFocus:Q,onBlur:Oe})),vt.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:ye(this.prefixUrl,Ne.rotateright.REST),srcGroup:ye(this.prefixUrl,Ne.rotateright.GROUP),srcHover:ye(this.prefixUrl,Ne.rotateright.HOVER),srcDown:ye(this.prefixUrl,Ne.rotateright.DOWN),onRelease:Ge,onFocus:Q,onBlur:Oe}))),this.showFlipControl&&vt.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:ye(this.prefixUrl,Ne.flip.REST),srcGroup:ye(this.prefixUrl,Ne.flip.GROUP),srcHover:ye(this.prefixUrl,Ne.flip.HOVER),srcDown:ye(this.prefixUrl,Ne.flip.DOWN),onRelease:ke,onFocus:Q,onBlur:Oe})),Lt?(this.buttonGroup=new e.ButtonGroup({buttons:vt,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,$t)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=vt),this},currentPage:function(){return this._sequenceIndex},goToPage:function(f){return this.tileSources&&f>=0&&f<this.tileSources.length&&(this._sequenceIndex=f,this._updateSequenceButtons(f),this.open(this.tileSources[f]),this.referenceStrip&&this.referenceStrip.setFocus(f),this.raiseEvent("page",{page:f})),this},addOverlay:function(f,D,U,$){var ne;if(ne=e.isPlainObject(f)?f:{element:f,location:D,placement:U,onDraw:$},f=e.getElement(ne.element),o(this.currentOverlays,f)>=0)return this;var ae=r(this,ne);return this.currentOverlays.push(ae),ae.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:f,location:ne.location,placement:ne.placement}),this},updateOverlay:function(f,D,U){var $;return f=e.getElement(f),($=o(this.currentOverlays,f))>=0&&(this.currentOverlays[$].update(D,U),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:f,location:D,placement:U})),this},removeOverlay:function(f){var D;return f=e.getElement(f),(D=o(this.currentOverlays,f))>=0&&(this.currentOverlays[D].destroy(),this.currentOverlays.splice(D,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:f})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(f){var D;return f=e.getElement(f),(D=o(this.currentOverlays,f))>=0?this.currentOverlays[D]:null},_updateSequenceButtons:function(f){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==f?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(f>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(f){this._hideMessage();var D=e.makeNeutralElement("div");D.appendChild(document.createTextNode(f)),this.messageDiv=e.makeCenteredNode(D),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var f=this.messageDiv;f&&(f.parentNode.removeChild(f),delete this.messageDiv)},gestureSettingsByDeviceType:function(f){switch(f){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var f,D=this.currentOverlays.length;for(f=0;f<D;f++)this.currentOverlays[f].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var f=e.pixelDensityRatio,D=e.getCurrentPixelDensityRatio();f!==D&&(e.pixelDensityRatio=D,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var f=this._sequenceIndex-1;this.navPrevNextWrap&&f<0&&(f+=this.tileSources.length),this.goToPage(f)},goToNextPage:function(){var f=this._sequenceIndex+1;this.navPrevNextWrap&&f>=this.tileSources.length&&(f=0),this.goToPage(f)},isAnimating:function(){return i[this.hash].animating}})}(OpenSeadragon),function(e){function i(a){var p={tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",p),!p.preventDefaultAction&&a.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(a.position.x=this.viewport.getContainerSize().x-a.position.x);var w=this.viewport.pointFromPixel(a.position);this.panVertical?this.panHorizontal||(w.x=this.viewer.viewport.getCenter(!0).x):w.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(w),this.viewer.viewport.applyConstraints()}}function s(a){var p={tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",p),!p.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewer.viewport.flipped&&(a.delta.x=-a.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function h(a){a.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function d(a){var p={tracker:a.eventSource,position:a.position,scroll:a.scroll,shift:a.shift,originalEvent:a.originalEvent,preventDefault:a.preventDefault};this.viewer.raiseEvent("navigator-scroll",p),a.preventDefault=p.preventDefault}function r(a,p){o(a,"rotate("+p+"deg)")}function o(a,p){a.style.webkitTransform=p,a.style.mozTransform=p,a.style.msTransform=p,a.style.oTransform=p,a.style.transform=p}e.Navigator=function(a){var x,A,b,R,p=a.viewer,w=this;function P(b){r(w.displayRegionContainer,b),r(w.displayRegion,-b),w.viewport.setRotation(b)}a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=p.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!==e.ControlAnchor.NONE&&(R=this.borderWidth,(b=this.element.style).margin="0px",b.border=R+"px solid "+a.borderColor,b.padding="0px",b.background=a.background,b.opacity=a.opacity,b.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(b,R){b.position="relative",b.top="0px",b.left="0px",b.fontSize="0px",b.overflow="hidden",b.border=R+"px solid "+a.displayRegionColor,b.margin="0px",b.padding="0px",b.background="transparent",b.float="left",b.cssFloat="left",b.styleFloat="left",b.zIndex=999999999,b.cursor="default"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),p.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!==e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(x=e.getElementSize(p.element),this.element.style.height=Math.round(x.y*a.sizeRatio)+"px",this.element.style.width=Math.round(x.x*a.sizeRatio)+"px",this.oldViewerSize=x,A=e.getElementSize(this.element),this.elementArea=A.x*A.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate&&(P(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0),a.viewer.addHandler("rotate",function(b){P(b.degrees)})),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,s),clickHandler:e.delegate(this,i),releaseHandler:e.delegate(this,h),scrollHandler:e.delegate(this,d),preProcessEventHandler:function(b){"wheel"===b.eventType&&(b.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){w.viewport&&w.viewport.goHome(!0)}),p.world.addHandler("item-index-change",function(b){window.setTimeout(function(){var R=w.world.getItemAt(b.previousIndex);w.world.setItemIndex(R,b.newIndex)},1)}),p.world.addHandler("remove-item",function(b){var _=w._getMatchingItem(b.item);_&&w.world.removeItem(_)}),this.update(p.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var a=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);a.equals(this.oldContainerSize)||(this.viewport.resize(a,!0),this.viewport.goHome(!0),this.oldContainerSize=a,this.drawer.clear(),this.world.draw())}},setWidth:function(a){this.width=a,this.element.style.width="number"==typeof a?a+"px":a,this._resizeWithViewer=!1},setHeight:function(a){this.height=a,this.element.style.height="number"==typeof a?a+"px":a,this._resizeWithViewer=!1},setFlip:function(a){return this.viewport.setFlip(a),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(a){o(this.displayRegion,a),o(this.canvas,a),o(this.element,a)},update:function(a){var p,w,x,A,P,O;if(p=e.getElementSize(this.viewer.element),this._resizeWithViewer&&p.x&&p.y&&!p.equals(this.oldViewerSize)&&(this.oldViewerSize=p,this.maintainSizeRatio||!this.elementArea?(w=p.x*this.sizeRatio,x=p.y*this.sizeRatio):(w=Math.sqrt(this.elementArea*(p.x/p.y)),x=this.elementArea/w),this.element.style.width=Math.round(w)+"px",this.element.style.height=Math.round(x)+"px",this.elementArea||(this.elementArea=w*x),this.updateSize()),a&&this.viewport){A=a.getBoundsNoRotate(!0),P=this.viewport.pixelFromPointNoRotate(A.getTopLeft(),!1),O=this.viewport.pixelFromPointNoRotate(A.getBottomRight(),!1).minus(this.totalBorderWidths);var b=this.displayRegion.style;b.display=this.world.getItemCount()?"block":"none",b.top=Math.round(P.y)+"px",b.left=Math.round(P.x)+"px";var R=Math.abs(P.x-O.x),_=Math.abs(P.y-O.y);b.width=Math.round(Math.max(R,0))+"px",b.height=Math.round(Math.max(_,0))+"px"}},addTiledImage:function(a){var p=this,w=a.originalTiledImage;delete a.original;var x=e.extend({},a,{success:function(A){var P=A.item;function O(){p._matchBounds(P,w)}P._originalForNavigator=w,p._matchBounds(P,w,!0),p._matchOpacity(P,w),p._matchCompositeOperation(P,w),w.addHandler("bounds-change",O),w.addHandler("clip-change",O),w.addHandler("opacity-change",function b(){p._matchOpacity(P,w)}),w.addHandler("composite-operation-change",function R(){p._matchCompositeOperation(P,w)})}});return e.Viewer.prototype.addTiledImage.apply(this,[x])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(a){for(var w,p=this.world.getItemCount(),x=0;x<p;x++)if((w=this.world.getItemAt(x))._originalForNavigator===a)return w;return null},_matchBounds:function(a,p,w){var x=p.getBoundsNoRotate();a.setPosition(x.getTopLeft(),w),a.setWidth(x.width,w),a.setRotation(p.getRotation(),w),a.setClip(p.getClip()),a.setFlip(p.getFlip())},_matchOpacity:function(a,p){a.setOpacity(p.opacity)},_matchCompositeOperation:function(a,p){a.setCompositeOperation(p.compositeOperation)}})}(OpenSeadragon),function(e){var i={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(s){var a,h=s.split("."),d=null,r=arguments,o=i;for(a=0;a<h.length-1;a++)o=o[h[a]]||{};return"string"!=typeof(d=o[h[a]])&&(e.console.error("Untranslated source string:",s),d=""),d.replace(/\{\d+\}/g,function(p){var w=parseInt(p.match(/\d+/),10)+1;return w<r.length?r[w]:""})},setString:function(s,h){var o,d=s.split("."),r=i;for(o=0;o<d.length-1;o++)r[d[o]]||(r[d[o]]={}),r=r[d[o]];r[d[o]]=h}})}(OpenSeadragon),function(e){e.Point=function(i,s){this.x="number"==typeof i?i:0,this.y="number"==typeof s?s:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(i){return new e.Point(this.x+i.x,this.y+i.y)},minus:function(i){return new e.Point(this.x-i.x,this.y-i.y)},times:function(i){return new e.Point(this.x*i,this.y*i)},divide:function(i){return new e.Point(this.x/i,this.y/i)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))},squaredDistanceTo:function(i){return Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)},apply:function(i){return new e.Point(i(this.x),i(this.y))},equals:function(i){return i instanceof e.Point&&this.x===i.x&&this.y===i.y},rotate:function(i,s){var h,d;if(s=s||new e.Point(0,0),i%90==0)switch(e.positiveModulo(i,360)){case 0:h=1,d=0;break;case 90:h=0,d=1;break;case 180:h=-1,d=0;break;case 270:h=0,d=-1}else{var o=i*Math.PI/180;h=Math.cos(o),d=Math.sin(o)}return new e.Point(h*(this.x-s.x)-d*(this.y-s.y)+s.x,d*(this.x-s.x)+h*(this.y-s.y)+s.y)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(s,h,d,r,o,a){var x,A,p=this,w=arguments;if(x=e.isPlainObject(s)?s:{width:w[0],height:w[1],tileSize:w[2],tileOverlap:w[3],minLevel:w[4],maxLevel:w[5]},e.EventSource.call(this),e.extend(!0,this,x),!this.success)for(A=0;A<arguments.length;A++)if(e.isFunction(arguments[A])){this.success=arguments[A];break}this.success&&this.addHandler("ready",function(P){p.success(P)}),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=x.width&&x.height?x.width/x.height:1,this.dimensions=new e.Point(x.width,x.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=x.tileOverlap?x.tileOverlap:0,this.minLevel=x.minLevel?x.minLevel:0,this.maxLevel=null!=x.maxLevel?x.maxLevel:x.width&&x.height?Math.ceil(Math.log(Math.max(x.width,x.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(s){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(s){return this._tileWidth?this._tileWidth:this.getTileSize(s)},getTileHeight:function(s){return this._tileHeight?this._tileHeight:this.getTileSize(s)},setMaxLevel:function(s){this.maxLevel=s,this._memoizeLevelScale()},getLevelScale:function(s){return this._memoizeLevelScale(),this.getLevelScale(s)},_memoizeLevelScale:function(){var h,s={};for(h=0;h<=this.maxLevel;h++)s[h]=1/Math.pow(2,this.maxLevel-h);this.getLevelScale=function(d){return s[d]}},getNumTiles:function(s){var h=this.getLevelScale(s),d=Math.ceil(h*this.dimensions.x/this.getTileWidth(s)),r=Math.ceil(h*this.dimensions.y/this.getTileHeight(s));return new e.Point(d,r)},getPixelRatio:function(s){var h=this.dimensions.times(this.getLevelScale(s));return new e.Point(1/h.x*e.pixelDensityRatio,1/h.y*e.pixelDensityRatio)},getClosestLevel:function(){var s,h;for(s=this.minLevel+1;s<=this.maxLevel&&!((h=this.getNumTiles(s)).x>1||h.y>1);s++);return s-1},getTileAtPoint:function(s,h){e.console.assert(h.x>=0&&h.x<=1&&h.y>=0&&h.y<=1/this.aspectRatio,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(s),a=h.y*r,p=Math.floor(h.x*r/this.getTileWidth(s)),w=Math.floor(a/this.getTileHeight(s));return h.x>=1&&(p=this.getNumTiles(s).x-1),h.y>=1/this.aspectRatio-1e-15&&(w=this.getNumTiles(s).y-1),new e.Point(p,w)},getTileBounds:function(s,h,d,r){var o=this.dimensions.times(this.getLevelScale(s)),a=this.getTileWidth(s),p=this.getTileHeight(s),w=0===h?0:a*h-this.tileOverlap,x=0===d?0:p*d-this.tileOverlap,A=a+(0===h?1:2)*this.tileOverlap,P=p+(0===d?1:2)*this.tileOverlap,O=1/o.x;return A=Math.min(A,o.x-w),P=Math.min(P,o.y-x),r?new e.Rect(0,0,A,P):new e.Rect(w*O,x*O,A*O,P*O)},getImageInfo:function(s){var d,r,o,a,p,w,x,h=this;s&&(x=(w=(p=s.split("/"))[p.length-1]).lastIndexOf("."))>-1&&(p[p.length-1]=w.slice(0,x));var A=null;if(this.splitHashDataForPost){var P=s.indexOf("#");-1!==P&&(A=s.substring(P+1),s=s.substr(0,P))}r=function(O){"string"==typeof O&&(O=e.parseXml(O));var b=e.TileSource.determineType(h,O,s);b?(void 0===(a=b.prototype.configure.apply(h,[O,s,A])).ajaxWithCredentials&&(a.ajaxWithCredentials=h.ajaxWithCredentials),o=new b(a),h.ready=!0,h.raiseEvent("ready",{tileSource:o})):h.raiseEvent("open-failed",{message:"Unable to load TileSource",source:s})},s.match(/\.js$/)?(d=s.split("/").pop().replace(".js",""),e.jsonp({url:s,async:!1,callbackName:d,callback:r})):e.makeAjaxRequest({url:s,postData:A,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(O){var b=function i(s){var o,h=s.responseText,d=s.status;if(!s)throw new Error(e.getString("Errors.Security"));if(200!==s.status&&0!==s.status)throw d=s.status,new Error(e.getString("Errors.Status",d,404===d?"Not Found":s.statusText));if(h.match(/\s*<.*/))try{o=s.responseXML&&s.responseXML.documentElement?s.responseXML:e.parseXml(h)}catch(a){o=s.responseText}else if(h.match(/\s*[{[].*/))try{o=e.parseJSON(h)}catch(a){o=h}else o=h;return o}(O);r(b)},error:function(O,b){var R;try{R="HTTP "+O.status+" attempting to load TileSource: "+s}catch(I){R=(void 0!==b&&b.toString?b.toString():"Unknown error")+" attempting to load TileSource: "+s}e.console.error(R),h.raiseEvent("open-failed",{message:R,source:s,postData:A})}})},supports:function(s,h){return!1},configure:function(s,h,d){throw new Error("Method not implemented.")},getTileUrl:function(s,h,d){throw new Error("Method not implemented.")},getTilePostData:function(s,h,d){return null},getTileAjaxHeaders:function(s,h,d){return{}},getTileHashKey:function(s,h,d,r,o,a){return o?r+"+"+JSON.stringify(o):r},tileExists:function(s,h,d){var r=this.getNumTiles(s);return s>=this.minLevel&&s<=this.maxLevel&&h>=0&&d>=0&&h<r.x&&d<r.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(s,h,d){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[r])&&e.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(s,h,d))return OpenSeadragon[r];return e.console.error("No TileSource was able to open %s %s",d,h),null}}(OpenSeadragon),function(e){function s(h,d){var R,_,r=d.Image,o=r.Url,a=r.Format,p=r.Size,w=r.DisplayRect||[],x=parseInt(p.Width,10),A=parseInt(p.Height,10),P=parseInt(r.TileSize,10),O=parseInt(r.Overlap,10),b=[];for(_=0;_<w.length;_++)R=w[_].Rect,b.push(new e.DisplayRect(parseInt(R.X,10),parseInt(R.Y,10),parseInt(R.Width,10),parseInt(R.Height,10),parseInt(R.MinLevel,10),parseInt(R.MaxLevel,10)));return e.extend(!0,{width:x,height:A,tileSize:P,tileOverlap:O,minLevel:null,maxLevel:null,tilesUrl:o,fileFormat:a,displayRects:b},d)}e.DziTileSource=function(h,d,r,o,a,p,w,x,A){var P,O,b,R;if(R=e.isPlainObject(h)?h:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=R.tilesUrl,this.fileFormat=R.fileFormat,this.displayRects=R.displayRects,this.displayRects)for(P=this.displayRects.length-1;P>=0;P--)for(b=(O=this.displayRects[P]).minLevel;b<=O.maxLevel;b++)this._levelRects[b]||(this._levelRects[b]=[]),this._levelRects[b].push(O);e.TileSource.apply(this,[R])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(h,d){var r;return h.Image?r=h.Image.xmlns:h.documentElement&&("Image"===h.documentElement.localName||"Image"===h.documentElement.tagName)&&(r=h.documentElement.namespaceURI),-1!==(r=(r||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==r.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(h,d,r){var o;return o=e.isPlainObject(h)?s(0,h):function i(h,d){if(!d||!d.documentElement)throw new Error(e.getString("Errors.Xml"));var x,A,P,O,b,r=d.documentElement,o=r.localName||r.tagName,a=d.documentElement.namespaceURI,p=null,w=[];if("Image"===o)try{if(void 0===(O=r.getElementsByTagName("Size")[0])&&(O=r.getElementsByTagNameNS(a,"Size")[0]),p={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:r.getAttribute("Url"),Format:r.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(r.getAttribute("Overlap"),10),TileSize:parseInt(r.getAttribute("TileSize"),10),Size:{Height:parseInt(O.getAttribute("Height"),10),Width:parseInt(O.getAttribute("Width"),10)}}},!e.imageFormatSupported(p.Image.Format))throw new Error(e.getString("Errors.ImageFormat",p.Image.Format.toUpperCase()));for(void 0===(x=r.getElementsByTagName("DisplayRect"))&&(x=r.getElementsByTagNameNS(a,"DisplayRect")[0]),b=0;b<x.length;b++)void 0===(P=(A=x[b]).getElementsByTagName("Rect")[0])&&(P=A.getElementsByTagNameNS(a,"Rect")[0]),w.push({Rect:{X:parseInt(P.getAttribute("X"),10),Y:parseInt(P.getAttribute("Y"),10),Width:parseInt(P.getAttribute("Width"),10),Height:parseInt(P.getAttribute("Height"),10),MinLevel:parseInt(A.getAttribute("MinLevel"),10),MaxLevel:parseInt(A.getAttribute("MaxLevel"),10)}});return w.length&&(p.Image.DisplayRect=w),s(0,p)}catch(I){throw I instanceof Error?I:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===o)throw new Error(e.getString("Errors.Dzc"));if("Error"===o){var R=r.getElementsByTagName("Message")[0];throw new Error(R.firstChild.nodeValue)}}throw new Error(e.getString("Errors.Dzi"))}(0,h),d&&!o.tilesUrl&&(o.tilesUrl=d.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),o.queryParams=-1!==d.search(/\.(dzi|xml|js)\?/)?d.match(/\?.*/):""),o},getTileUrl:function(h,d,r){return[this.tilesUrl,h,"/",d,"_",r,".",this.fileFormat,this.queryParams].join("")},tileExists:function(h,d,r){var a,p,w,x,A,P,O,o=this._levelRects[h];if(this.minLevel&&h<this.minLevel||this.maxLevel&&h>this.maxLevel)return!1;if(!o||!o.length)return!0;for(O=o.length-1;O>=0;O--)if(!(h<(a=o[O]).minLevel||h>a.maxLevel)&&(p=this.getLevelScale(h),A=(w=a.x*p)+a.width*p,P=(x=a.y*p)+a.height*p,w=Math.floor(w/this._tileWidth),x=Math.floor(x/this._tileWidth),A=Math.ceil(A/this._tileWidth),P=Math.ceil(P/this._tileWidth),w<=d&&d<A&&x<=r&&r<P))return!0;return!1}})}(OpenSeadragon),function(e){function i(r){var a=Array.isArray(r.profile)?r.profile[0]:r.profile,p=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(a),w=!1;return 2===r.version&&r.profile.length>1&&r.profile[1].supports&&(w=-1!==r.profile[1].supports.indexOf("sizeByW")),3===r.version&&r.extraFeatures&&(w=-1!==r.extraFeatures.indexOf("sizeByWh")),!p||w}function s(r){for(var o=[],a=0;a<r.sizes.length;a++)o.push({url:r["@id"]+"/full/"+r.sizes[a].width+","+(3===r.version?r.sizes[a].height:"")+"/0/default."+r.tileFormat,width:r.sizes[a].width,height:r.sizes[a].height});return o.sort(function(p,w){return p.width-w.width})}function d(r,o,a){var p,w;if(3===r.nodeType&&a)(w=r.nodeValue.trim()).match(/^\d*$/)&&(w=Number(w)),o[a]?(e.isArray(o[a])||(o[a]=[o[a]]),o[a].push(w)):o[a]=w;else if(1===r.nodeType)for(p=0;p<r.childNodes.length;p++)d(r.childNodes[p],o,r.nodeName)}e.IIIFTileSource=function(r){if(e.extend(!0,this,r),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(r.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=r.version,this.tile_width&&this.tile_height)r.tileWidth=this.tile_width,r.tileHeight=this.tile_height;else if(this.tile_width)r.tileSize=this.tile_width;else if(this.tile_height)r.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)r.tileWidth=this.tiles[0].width,r.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var a=0;a<this.tiles[o].scaleFactors.length;a++){var p=this.tiles[o].scaleFactors[a];this.scale_factors.push(p),r.tileSizePerScaleFactor[p]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(i(r)){for(var w=Math.min(this.height,this.width),x=[256,512,1024],A=[],P=0;P<x.length;P++)x[P]<=w&&A.push(x[P]);r.tileSize=A.length>0?Math.max.apply(null,A):w}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,r.levels=s(this),e.extend(!0,r,{width:r.levels[r.levels.length-1].width,height:r.levels[r.levels.length-1].height,tileSize:Math.max(r.height,r.width),tileOverlap:0,minLevel:0,maxLevel:r.levels.length-1}),this.levels=r.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!r.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var O=Math.max.apply(null,this.scale_factors);r.maxLevel=Math.round(Math.log(O)*Math.LOG2E)}else r.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[r])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(r,o){return!!(r.protocol&&"http://iiif.io/api/image"===r.protocol||r["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"===r["@context"]||"http://iiif.io/api/image/1/context.json"===r["@context"])||r.profile&&0===r.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||r.identifier&&r.width&&r.height)||!(!r.documentElement||"info"!==r.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!==r.documentElement.namespaceURI)},configure:function(r,o,a){if(e.isPlainObject(r)){if(r["@context"]){var w=r["@context"];if(Array.isArray(w))for(var x=0;x<w.length;x++)if("string"==typeof w[x]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(w[x])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===w[x])){w=w[x];break}switch(w){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":r.version=1;break;case"http://iiif.io/api/image/2/context.json":r.version=2;break;case"http://iiif.io/api/image/3/context.json":r.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=o.replace("/info.json",""),r.version=1;if(!r["@id"]&&r.id&&(r["@id"]=r.id),r.preferredFormats)for(var A=0;A<r.preferredFormats.length;A++)if(OpenSeadragon.imageFormatSupported(r.preferredFormats[A])){r.tileFormat=r.preferredFormats[A];break}return r}var p=function h(r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var o=r.documentElement,p=null;if("info"===o.tagName)try{return d(o,p={}),p}catch(w){throw w instanceof Error?w:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(r);return p["@context"]="http://iiif.io/api/image/1.0/context.json",p["@id"]=o.replace("/info.xml",""),p.version=1,p},getTileWidth:function(r){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,r);var o=Math.pow(2,this.maxLevel-r);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].width:this._tileWidth},getTileHeight:function(r){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,r);var o=Math.pow(2,this.maxLevel-r);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].height:this._tileHeight},getLevelScale:function(r){if(this.emulateLegacyImagePyramid){var o=NaN;return this.levels.length>0&&r>=this.minLevel&&r<=this.maxLevel&&(o=this.levels[r].width/this.levels[this.maxLevel].width),o}return e.TileSource.prototype.getLevelScale.call(this,r)},getNumTiles:function(r){return this.emulateLegacyImagePyramid?this.getLevelScale(r)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,r)},getTileAtPoint:function(r,o){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,r,o)},getTileUrl:function(r,o,a){if(this.emulateLegacyImagePyramid){var p=null;return this.levels.length>0&&r>=this.minLevel&&r<=this.maxLevel&&(p=this.levels[r].url),p}var O,b,R,_,I,X,Y,ie,ue,l,Te,ge,Fe,x=Math.pow(.5,this.maxLevel-r),A=Math.ceil(this.width*x),P=Math.ceil(this.height*x);return O=this.getTileWidth(r),b=this.getTileHeight(r),R=Math.ceil(O/x),_=Math.ceil(b/x),Fe=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,A<O&&P<b?(l=2===this.version&&A===this.width?"full":3===this.version&&A===this.width&&P===this.height?"max":3===this.version?A+","+P:A+",",I="full"):(X=o*R,Y=a*_,ie=Math.min(R,this.width-X),ue=Math.min(_,this.height-Y),I=0===o&&0===a&&ie===this.width&&ue===this.height?"full":[X,Y,ie,ue].join(","),Te=Math.ceil(ie*x),ge=Math.ceil(ue*x),l=2===this.version&&Te===this.width?"full":3===this.version&&Te===this.width&&ge===this.height?"max":3===this.version?Te+","+ge:Te+","),[this["@id"],I,l,"0",Fe].join("/")},__testonly__:{canBeTiled:i,constructLevels:s}})}(OpenSeadragon),function(e){e.OsmTileSource=function(i,s,h,d,r){var o;(!(o=e.isPlainObject(i)?i:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width||!o.height)&&(o.width=65572864,o.height=65572864),o.tileSize||(o.tileSize=256,o.tileOverlap=0),o.tilesUrl||(o.tilesUrl="http://tile.openstreetmap.org/"),o.minLevel=8,e.TileSource.apply(this,[o])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(i,s){return i.type&&"openstreetmaps"===i.type},configure:function(i,s,h){return i},getTileUrl:function(i,s,h){return this.tilesUrl+(i-8)+"/"+s+"/"+h+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(i,s,h,d,r){var o;o=e.isPlainObject(i)?i:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var w,a=256*Math.ceil(o.width/256),p=256*Math.ceil(o.height/256);w=a>p?a/256:p/256,o.maxLevel=Math.ceil(Math.log(w)/Math.log(2))-1,o.tileSize=256,o.width=a,o.height=p,e.TileSource.apply(this,[o])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(i,s){return i.type&&"tiledmapservice"===i.type},configure:function(i,s,h){return i},getTileUrl:function(i,s,h){var d=this.getNumTiles(i).y-1;return this.tilesUrl+i+"/"+s+"/"+(d-h)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(i){void 0===i.tileSize&&(i.tileSize=256),void 0===i.fileFormat&&(i.fileFormat="jpg",this.fileFormat=i.fileFormat);var s={x:i.width,y:i.height};for(i.imageSizes=[{x:i.width,y:i.height}],i.gridSize=[this._getGridSize(i.width,i.height,i.tileSize)];parseInt(s.x,10)>i.tileSize||parseInt(s.y,10)>i.tileSize;)s.x=Math.floor(s.x/2),s.y=Math.floor(s.y/2),i.imageSizes.push({x:s.x,y:s.y}),i.gridSize.push(this._getGridSize(s.x,s.y,i.tileSize));i.imageSizes.reverse(),i.gridSize.reverse(),i.minLevel=0,i.maxLevel=i.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[i])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(i,s,h){return{x:Math.ceil(i/h),y:Math.ceil(s/h)}},_calculateAbsoluteTileNumber:function(i,s,h){for(var d=0,r={},o=0;o<i;o++)d+=(r=this.gridSize[o]).x*r.y;return d+((r=this.gridSize[i]).x*h+s)},supports:function(i,s){return i.type&&"zoomifytileservice"===i.type},configure:function(i,s,h){return i},getTileUrl:function(i,s,h){var d,r=this._calculateAbsoluteTileNumber(i,s,h);return d=Math.floor(r/256),this.tilesUrl+"TileGroup"+d+"/"+i+"-"+s+"-"+h+"."+this.fileFormat}})}(OpenSeadragon),function(e){function h(d,r){return r.levels}e.LegacyTileSource=function(d){var r,o,a;e.isArray(d)&&(r={type:"legacy-image-pyramid",levels:d}),r.levels=function i(d){var o,a,r=[];for(a=0;a<d.length;a++)(o=d[a]).height&&o.width&&o.url?r.push({url:o.url,width:Number(o.width),height:Number(o.height)}):e.console.error("Unsupported image format: %s",o.url?o.url:"<no URL>");return r.sort(function(p,w){return p.height-w.height})}(r.levels),r.levels.length>0?(o=r.levels[r.levels.length-1].width,a=r.levels[r.levels.length-1].height):(o=0,a=0,e.console.error("No supported image formats found")),e.extend(!0,r,{width:o,height:a,tileSize:Math.max(a,o),tileOverlap:0,minLevel:0,maxLevel:r.levels.length>0?r.levels.length-1:0}),e.TileSource.apply(this,[r]),this.levels=r.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(d,r){return d.type&&"legacy-image-pyramid"===d.type||d.documentElement&&"legacy-image-pyramid"===d.documentElement.getAttribute("type")},configure:function(d,r,o){var a;return a=e.isPlainObject(d)?h(0,d):function s(d,r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var x,A,o=r.documentElement,a=o.tagName,p=null,w=[];if("image"===a)try{for(p={type:o.getAttribute("type"),levels:[]},w=o.getElementsByTagName("level"),A=0;A<w.length;A++)p.levels.push({url:(x=w[A]).getAttribute("url"),width:parseInt(x.getAttribute("width"),10),height:parseInt(x.getAttribute("height"),10)});return h(0,p)}catch(P){throw P instanceof Error?P:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===a)throw new Error("Error: "+r)}throw new Error("Unknown element "+a)}(0,d),a},getLevelScale:function(d){var r=NaN;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(r=this.levels[d].width/this.levels[this.maxLevel].width),r},getNumTiles:function(d){return this.getLevelScale(d)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(d,r,o){var a=null;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(a=this.levels[d].url),a}})}(OpenSeadragon),function(e){e.ImageTileSource=function(i){i=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},i),e.TileSource.apply(this,[i])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(i,s){return i.type&&"image"===i.type},configure:function(i,s,h){return i},getImageInfo:function(i){var s=this._image=new Image,h=this;this.crossOriginPolicy&&(s.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(s.useCredentials=this.ajaxWithCredentials),e.addEvent(s,"load",function(){h.width=s.naturalWidth,h.height=s.naturalHeight,h.aspectRatio=h.width/h.height,h.dimensions=new e.Point(h.width,h.height),h._tileWidth=h.width,h._tileHeight=h.height,h.tileOverlap=0,h.minLevel=0,h.levels=h._buildLevels(),h.maxLevel=h.levels.length-1,h.ready=!0,h.raiseEvent("ready",{tileSource:h})}),e.addEvent(s,"error",function(){h.raiseEvent("open-failed",{message:"Error loading image at "+i,source:i})}),s.src=i},getLevelScale:function(i){var s=NaN;return i>=this.minLevel&&i<=this.maxLevel&&(s=this.levels[i].width/this.levels[this.maxLevel].width),s},getNumTiles:function(i){return this.getLevelScale(i)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(i,s,h){var d=null;return i>=this.minLevel&&i<=this.maxLevel&&(d=this.levels[i].url),d},getContext2D:function(i,s,h){var d=null;return i>=this.minLevel&&i<=this.maxLevel&&(d=this.levels[i].context2D),d},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var i=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,i;var s=this._image.naturalWidth,h=this._image.naturalHeight,d=document.createElement("canvas"),r=d.getContext("2d");if(d.width=s,d.height=h,r.drawImage(this._image,0,0,s,h),i[0].context2D=r,delete this._image,e.isCanvasTainted(d))return i;for(;s>=2&&h>=2;){s=Math.floor(s/2),h=Math.floor(h/2);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=s,o.height=h,a.drawImage(d,0,0,s,h),i.splice(0,0,{context2D:a,width:s,height:h}),d=o,r=a}return i},_freeupCanvasMemory:function(){for(var i=0;i<this.levels.length;i++)this.levels[i].context2D&&(this.levels[i].context2D.canvas.height=0,this.levels[i].context2D.canvas.width=0)}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(i,s,h,d){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function i(a){e.requestAnimationFrame(function(){!function s(a){var x;a.shouldFade&&(x=1-(e.now()-a.fadeBeginTime)/a.fadeLength,x=Math.min(1,x),x=Math.max(0,x),a.imgGroup&&e.setElementOpacity(a.imgGroup,x,!0),x>0&&i(a))}(a)})}function r(a,p){a.element.disabled||(p>=e.ButtonState.GROUP&&a.currentState===e.ButtonState.REST&&(function d(a){a.shouldFade=!1,a.imgGroup&&e.setElementOpacity(a.imgGroup,1,!0)}(a),a.currentState=e.ButtonState.GROUP),p>=e.ButtonState.HOVER&&a.currentState===e.ButtonState.GROUP&&(a.imgHover&&(a.imgHover.style.visibility=""),a.currentState=e.ButtonState.HOVER),p>=e.ButtonState.DOWN&&a.currentState===e.ButtonState.HOVER&&(a.imgDown&&(a.imgDown.style.visibility=""),a.currentState=e.ButtonState.DOWN))}function o(a,p){a.element.disabled||(p<=e.ButtonState.HOVER&&a.currentState===e.ButtonState.DOWN&&(a.imgDown&&(a.imgDown.style.visibility="hidden"),a.currentState=e.ButtonState.HOVER),p<=e.ButtonState.GROUP&&a.currentState===e.ButtonState.HOVER&&(a.imgHover&&(a.imgHover.style.visibility="hidden"),a.currentState=e.ButtonState.GROUP),p<=e.ButtonState.REST&&a.currentState===e.ButtonState.GROUP&&(function h(a){a.shouldFade=!0,a.fadeBeginTime=e.now()+a.fadeDelay,window.setTimeout(function(){i(a)},a.fadeDelay)}(a),a.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(a){var p=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},a),this.element=a.element||e.makeNeutralElement("div"),a.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(w){w.insideElementPressed?(r(p,e.ButtonState.DOWN),p.raiseEvent("enter",{originalEvent:w.originalEvent})):w.buttonDownAny||r(p,e.ButtonState.HOVER)},focusHandler:function(w){p.tracker.enterHandler(w),p.raiseEvent("focus",{originalEvent:w.originalEvent})},leaveHandler:function(w){o(p,e.ButtonState.GROUP),w.insideElementPressed&&p.raiseEvent("exit",{originalEvent:w.originalEvent})},blurHandler:function(w){p.tracker.leaveHandler(w),p.raiseEvent("blur",{originalEvent:w.originalEvent})},pressHandler:function(w){r(p,e.ButtonState.DOWN),p.raiseEvent("press",{originalEvent:w.originalEvent})},releaseHandler:function(w){w.insideElementPressed&&w.insideElementReleased?(o(p,e.ButtonState.HOVER),p.raiseEvent("release",{originalEvent:w.originalEvent})):w.insideElementPressed?o(p,e.ButtonState.GROUP):r(p,e.ButtonState.HOVER)},clickHandler:function(w){w.quick&&p.raiseEvent("click",{originalEvent:w.originalEvent})},keyHandler:function(w){13===w.keyCode?(p.raiseEvent("click",{originalEvent:w.originalEvent}),p.raiseEvent("release",{originalEvent:w.originalEvent}),w.preventDefault=!0):w.preventDefault=!1}}),o(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){r(this,e.ButtonState.GROUP)},notifyGroupExit:function(){o(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(OpenSeadragon),function(e){e.ButtonGroup=function(i){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},i);var d,s=this.buttons.concat([]),h=this;if(this.element=i.element||e.makeNeutralElement("div"),!i.group)for(this.element.style.display="inline-block",d=0;d<s.length;d++)this.element.appendChild(s[d].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(r){var o;for(o=0;o<h.buttons.length;o++)h.buttons[o].notifyGroupEnter()},leaveHandler:function(r){var o;if(!r.insideElementPressed)for(o=0;o<h.buttons.length;o++)h.buttons[o].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var i=this.buttons.pop();this.element.removeChild(i.element),i.destroy()}this.tracker.destroy(),this.element=null}}}(OpenSeadragon),function(e){e.Rect=function(i,s,h,d,r){var o,a;this.x="number"==typeof i?i:0,this.y="number"==typeof s?s:0,this.width="number"==typeof h?h:0,this.height="number"==typeof d?d:0,this.degrees="number"==typeof r?r:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(o=this.getTopRight(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):this.degrees>=90&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(i,s,h){var d=i.distanceTo(s),r=i.distanceTo(h),o=s.minus(i),a=Math.atan(o.y/o.x);return o.x<0?a+=Math.PI:o.y<0&&(a+=2*Math.PI),new e.Rect(i.x,i.y,d,r,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(i){return i instanceof e.Rect&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height&&this.degrees===i.degrees},times:function(i){return new e.Rect(this.x*i,this.y*i,this.width*i,this.height*i,this.degrees)},translate:function(i){return new e.Rect(this.x+i.x,this.y+i.y,this.width,this.height,this.degrees)},union:function(i){var s=this.getBoundingBox(),h=i.getBoundingBox(),d=Math.min(s.x,h.x),r=Math.min(s.y,h.y),o=Math.max(s.x+s.width,h.x+h.width),a=Math.max(s.y+s.height,h.y+h.height);return new e.Rect(d,r,o-d,a-r)},intersection:function(i){var s=1e-10,h=[],d=this.getTopLeft();i.containsPoint(d,s)&&h.push(d);var r=this.getTopRight();i.containsPoint(r,s)&&h.push(r);var o=this.getBottomLeft();i.containsPoint(o,s)&&h.push(o);var a=this.getBottomRight();i.containsPoint(a,s)&&h.push(a);var p=i.getTopLeft();this.containsPoint(p,s)&&h.push(p);var w=i.getTopRight();this.containsPoint(w,s)&&h.push(w);var x=i.getBottomLeft();this.containsPoint(x,s)&&h.push(x);var A=i.getBottomRight();this.containsPoint(A,s)&&h.push(A);for(var P=this._getSegments(),O=i._getSegments(),b=0;b<P.length;b++)for(var R=P[b],_=0;_<O.length;_++){var I=O[_],X=Y(R[0],R[1],I[0],I[1]);X&&h.push(X)}function Y(Ue,at,be,Pt){var ft=at.minus(Ue),Ve=Pt.minus(be),Xe=-Ve.x*ft.y+ft.x*Ve.y;if(0===Xe)return null;var Et=(ft.x*(Ue.y-be.y)-ft.y*(Ue.x-be.x))/Xe,ye=(Ve.x*(Ue.y-be.y)-Ve.y*(Ue.x-be.x))/Xe;return-s<=Et&&Et<=1-s&&-s<=ye&&ye<=1-s?new e.Point(Ue.x+ye*ft.x,Ue.y+ye*ft.y):null}if(0===h.length)return null;for(var ie=h[0].x,ue=h[0].x,l=h[0].y,Te=h[0].y,ge=1;ge<h.length;ge++){var Fe=h[ge];Fe.x<ie&&(ie=Fe.x),Fe.x>ue&&(ue=Fe.x),Fe.y<l&&(l=Fe.y),Fe.y>Te&&(Te=Fe.y)}return new e.Rect(ie,l,ue-ie,Te-l)},_getSegments:function(){var i=this.getTopLeft(),s=this.getTopRight(),h=this.getBottomLeft(),d=this.getBottomRight();return[[i,s],[s,d],[d,h],[h,i]]},rotate:function(i,s){if(0===(i=e.positiveModulo(i,360)))return this.clone();s=s||this.getCenter();var h=this.getTopLeft().rotate(i,s),r=this.getTopRight().rotate(i,s).minus(h);r=r.apply(function(a){return Math.abs(a)<1e-15?0:a});var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new e.Rect(h.x,h.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var i=this.getTopLeft(),s=this.getTopRight(),h=this.getBottomLeft(),d=this.getBottomRight(),r=Math.min(i.x,s.x,h.x,d.x),o=Math.max(i.x,s.x,h.x,d.x),a=Math.min(i.y,s.y,h.y,d.y),p=Math.max(i.y,s.y,h.y,d.y);return new e.Rect(r,a,o-r,p-a)},getIntegerBoundingBox:function(){var i=this.getBoundingBox(),s=Math.floor(i.x),h=Math.floor(i.y),d=Math.ceil(i.width+i.x-s),r=Math.ceil(i.height+i.y-h);return new e.Rect(s,h,d,r)},containsPoint:function(i,s){s=s||0;var h=this.getTopLeft(),d=this.getTopRight(),r=this.getBottomLeft(),o=d.minus(h),a=r.minus(h);return(i.x-h.x)*o.x+(i.y-h.y)*o.y>=-s&&(i.x-d.x)*o.x+(i.y-d.y)*o.y<=s&&(i.x-h.x)*a.x+(i.y-h.y)*a.y>=-s&&(i.x-r.x)*a.x+(i.y-r.y)*a.y<=s},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var i={};function s(x){var A;x.quick&&(A="horizontal"===this.scroll?Math.floor(x.position.x/this.panelWidth):Math.floor(x.position.y/this.panelHeight),this.viewer.goToPage(A)),this.element.focus()}function h(x){if(this.dragging=!0,this.element){var A=Number(this.element.style.marginLeft.replace("px","")),P=Number(this.element.style.marginTop.replace("px","")),O=Number(this.element.style.width.replace("px","")),b=Number(this.element.style.height.replace("px","")),R=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-x.delta.x>0?A>-(O-R.x)&&(this.element.style.marginLeft=A+2*x.delta.x+"px",r(this,R.x,A+2*x.delta.x)):-x.delta.x<0&&A<0&&(this.element.style.marginLeft=A+2*x.delta.x+"px",r(this,R.x,A+2*x.delta.x)):-x.delta.y>0?P>-(b-R.y)&&(this.element.style.marginTop=P+2*x.delta.y+"px",r(this,R.y,P+2*x.delta.y)):-x.delta.y<0&&P<0&&(this.element.style.marginTop=P+2*x.delta.y+"px",r(this,R.y,P+2*x.delta.y))}}function d(x){if(this.element){var A=Number(this.element.style.marginLeft.replace("px","")),P=Number(this.element.style.marginTop.replace("px","")),O=Number(this.element.style.width.replace("px","")),b=Number(this.element.style.height.replace("px","")),R=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?x.scroll>0?A>-(O-R.x)&&(this.element.style.marginLeft=A-60*x.scroll+"px",r(this,R.x,A-60*x.scroll)):x.scroll<0&&A<0&&(this.element.style.marginLeft=A-60*x.scroll+"px",r(this,R.x,A-60*x.scroll)):x.scroll<0?P>R.y-b&&(this.element.style.marginTop=P+60*x.scroll+"px",r(this,R.y,P+60*x.scroll)):x.scroll>0&&P<0&&(this.element.style.marginTop=P+60*x.scroll+"px",r(this,R.y,P+60*x.scroll)),x.preventDefault=!0}}function r(x,A,P){var O,b,R,_,I,X;for(O="horizontal"===x.scroll?x.panelWidth:x.panelHeight,b=Math.ceil(A/O)+5,I=b=(b=(R=Math.ceil((Math.abs(P)+A)/O)+1)-b)<0?0:b;I<R&&I<x.panels.length;I++)if(!(X=x.panels[I]).activePanel){var ie=x.viewer.tileSources[I];_=new e.Viewer({id:X.id,tileSources:[ie.referenceStripThumbnailUrl?{type:"image",url:ie.referenceStripThumbnailUrl}:ie],element:X,navigatorSizeRatio:x.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:x.viewer.loadTilesWithAjax,ajaxHeaders:x.viewer.ajaxHeaders,useCanvas:x.useCanvas}),e.setElementPointerEventsNone(_.canvas),e.setElementPointerEventsNone(_.container),_.innerTracker.setTracking(!1),_.outerTracker.setTracking(!1),x.miniViewers[X.id]=_,X.activePanel=!0}}function o(x){var A=x.eventSource.element;"horizontal"===this.scroll?A.style.marginBottom="0px":A.style.marginLeft="0px"}function a(x){var A=x.eventSource.element;"horizontal"===this.scroll?A.style.marginBottom="-"+e.getElementSize(A).y/2+"px":A.style.marginLeft="-"+e.getElementSize(A).x/2+"px"}function p(x){if(x.ctrl||x.alt||x.meta)x.preventDefault=!1;else switch(x.keyCode){case 38:case 39:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),x.preventDefault=!0;break;case 40:case 37:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),x.preventDefault=!0;break;default:x.preventDefault=!1}}function w(x){if(x.ctrl||x.alt||x.meta)x.preventDefault=!1;else switch(x.keyCode){case 61:case 48:case 119:case 87:case 100:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),x.preventDefault=!0;break;case 45:case 115:case 83:case 97:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),x.preventDefault=!0;break;default:x.preventDefault=!1}}e.ReferenceStrip=function(x){var b,R,_,P=x.viewer,O=e.getElementSize(P.element);for(x.id||(x.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=x.id,this.element.className="referencestrip"),x=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},x,{element:this.element}),e.extend(this,x),i[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(R=this.element.style).marginTop="0px",R.marginRight="0px",R.marginBottom="0px",R.marginLeft="0px",R.left="0px",R.bottom="0px",R.border="0px",R.background="#000",R.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=P,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,s),dragHandler:e.delegate(this,h),scrollHandler:e.delegate(this,d),enterHandler:e.delegate(this,o),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,p),keyHandler:e.delegate(this,w),preProcessEventHandler:function(I){"wheel"===I.eventType&&(I.preventDefault=!0)}}),x.width&&x.height?(this.element.style.width=x.width+"px",this.element.style.height=x.height+"px",P.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===x.scroll?(this.element.style.width=O.x*x.sizeRatio*P.tileSources.length+12*P.tileSources.length+"px",this.element.style.height=O.y*x.sizeRatio+"px",P.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=O.y*x.sizeRatio*P.tileSources.length+12*P.tileSources.length+"px",this.element.style.width=O.x*x.sizeRatio+"px",P.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=O.x*this.sizeRatio+8,this.panelHeight=O.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},_=0;_<P.tileSources.length;_++)(b=e.makeNeutralElement("div")).id=this.element.id+"-"+_,b.style.width=this.panelWidth+"px",b.style.height=this.panelHeight+"px",b.style.display="inline",b.style.float="left",b.style.cssFloat="left",b.style.styleFloat="left",b.style.padding="2px",e.setElementTouchActionNone(b),e.setElementPointerEventsNone(b),this.element.appendChild(b),b.activePanel=!1,this.panels.push(b);r(this,"vertical"===this.scroll?O.y:O.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(x){var I,A=this.element.querySelector("#"+this.element.id+"-"+x),P=e.getElementSize(this.viewer.canvas),O=Number(this.element.style.width.replace("px","")),b=Number(this.element.style.height.replace("px","")),R=-Number(this.element.style.marginLeft.replace("px","")),_=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==A&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=A,this.currentSelected.style.background="#999","horizontal"===this.scroll?(I=Number(x)*(this.panelWidth+3))>R+P.x-this.panelWidth?(I=Math.min(I,O-P.x),this.element.style.marginLeft=-I+"px",r(this,P.x,-I)):I<R&&(I=Math.max(0,I-P.x/2),this.element.style.marginLeft=-I+"px",r(this,P.x,-I)):(I=Number(x)*(this.panelHeight+3))>_+P.y-this.panelHeight?(I=Math.min(I,b-P.y),this.element.style.marginTop=-I+"px",r(this,P.y,-I)):I<_&&(I=Math.max(0,I-P.y/2),this.element.style.marginTop=-I+"px",r(this,P.y,-I)),this.currentPage=x,o.call(this,{eventSource:this.tracker}))},update:function(){return!!i[this.id].animating},destroy:function(){if(this.miniViewers)for(var x in this.miniViewers)this.miniViewers[x].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(OpenSeadragon),function(e){e.DisplayRect=function(i,s,h,d,r,o){e.Rect.apply(this,[i,s,h,d]),this.minLevel=r,this.maxLevel=o},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(s){var h=arguments;"object"!=typeof s&&(s={initial:h.length&&"number"==typeof h[0]?h[0]:void 0,springStiffness:h.length>1?h[1].springStiffness:5,animationTime:h.length>1?h[1].animationTime:1.5}),e.console.assert("number"==typeof s.springStiffness&&0!==s.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof s.animationTime&&s.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),s.exponential&&(this._exponential=!0,delete s.exponential),e.extend(!0,this,s),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(s){e.console.assert(!this._exponential||0!==s,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=s,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(s){e.console.assert(!this._exponential||0!==s,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=s,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(s){this.start.value+=s,this.target.value+=s,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(s){this._exponential=s,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var s,h;this.current.time=e.now(),this._exponential?(s=this.start._logValue,h=this.target._logValue):(s=this.start.value,h=this.target.value);var d=this.current.time>=this.target.time?h:s+(h-s)*function i(s,h){return(1-Math.exp(s*-h))/(1-Math.exp(-s))}(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),r=this.current.value;return this.current.value=this._exponential?Math.exp(d):d,r!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function i(h){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},h),this.image=null}i.prototype={errorMsg:null,start:function(){var h=this,d=this.abort;this.image=new Image,this.image.onload=function(){h.finish(!0)},this.image.onabort=this.image.onerror=function(){h.errorMsg="Image load aborted",h.finish(!1)},this.jobId=window.setTimeout(function(){h.errorMsg="Image load exceeded timeout ("+h.timeout+" ms)",h.finish(!1)},this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",postData:this.postData,success:function(r){var o;try{o=new window.Blob([r.response])}catch(x){var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===x.name&&a){var p=new a;p.append(r.response),o=p.getBlob()}}0===o.size&&(h.errorMsg="Empty image response.",h.finish(!1));var w=(window.URL||window.webkitURL).createObjectURL(o);h.image.src=w},error:function(r){h.errorMsg="Image load aborted - XHR error: Ajax returned "+r.status,h.finish(!1)}}),this.abort=function(){h.request.abort(),"function"==typeof d&&d()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(h){this.image.onload=this.image.onerror=this.image.onabort=null,h||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(h){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},h)},e.ImageLoader.prototype={addJob:function(h){var d=this,o={src:h.src,loadWithAjax:h.loadWithAjax,ajaxHeaders:h.loadWithAjax?h.ajaxHeaders:null,crossOriginPolicy:h.crossOriginPolicy,ajaxWithCredentials:h.ajaxWithCredentials,postData:h.postData,callback:function(p){!function s(h,d,r){h.jobsInProgress--,(!h.jobLimit||h.jobsInProgress<h.jobLimit)&&h.jobQueue.length>0&&(h.jobQueue.shift().start(),h.jobsInProgress++),r(d.image,d.errorMsg,d.request)}(d,p,h.callback)},abort:h.abort,timeout:this.timeout},a=new i(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(a.start(),this.jobsInProgress++):this.jobQueue.push(a)},clear:function(){for(var h=0;h<this.jobQueue.length;h++){var d=this.jobQueue[h];"function"==typeof d.abort&&d.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(i,s,h,d,r,o,a,p,w,x,A,P){this.level=i,this.x=s,this.y=h,this.bounds=d,this.sourceBounds=x,this.exists=r,this.url=o,this.postData=A,this.context2D=a,this.loadWithAjax=p,this.ajaxHeaders=w,void 0===P&&(e.console.error("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),P=e.TileSource.prototype.getTileHashKey(i,s,h,o,w,A)),this.cacheKey=P,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(i){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!==i&&i.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(i,s,h,d,r){var p,w,x,o=this.position.times(e.pixelDensityRatio),a=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(p=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&p?(i.save(),i.globalAlpha=this.opacity,"number"==typeof h&&1!==h&&(o=o.times(h),a=a.times(h)),d instanceof e.Point&&(o=o.plus(d)),1===i.globalAlpha&&this._hasTransparencyChannel()&&(r&&(o.x=Math.round(o.x),o.y=Math.round(o.y),a.x=Math.round(a.x),a.y=Math.round(a.y)),i.clearRect(o.x,o.y,a.x,a.y)),s({context:i,tile:this,rendered:p}),this.sourceBounds?(w=Math.min(this.sourceBounds.width,p.canvas.width),x=Math.min(this.sourceBounds.height,p.canvas.height)):(w=p.canvas.width,x=p.canvas.height),i.translate(o.x+a.x/2,0),this.flipped&&i.scale(-1,1),i.drawImage(p.canvas,0,0,w,x,-a.x/2,o.y,a.x,a.y),i.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var i;if(this.cacheImageRecord)i=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;i=this.context2D}return i.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(i,s,h){var d=Math.max(1,Math.ceil((h.x-s.x)/2)),r=Math.max(1,Math.ceil((h.y-s.y)/2));return new e.Point(d,r).minus(this.position.times(e.pixelDensityRatio).times(i||1).apply(function(o){return o%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(i,s,h){var d;d=e.isPlainObject(i)?i:{element:i,location:s,placement:h},this.element=d.element,this.style=d.element.style,this._init(d)},e.Overlay.prototype={_init:function(i){this.location=i.location,this.placement=void 0===i.placement?e.Placement.TOP_LEFT:i.placement,this.onDraw=i.onDraw,this.checkResize=void 0===i.checkResize||i.checkResize,this.width=void 0===i.width?null:i.width,this.height=void 0===i.height?null:i.height,this.rotationMode=i.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(i,s){var h=e.Placement.properties[this.placement];!h||(h.isHorizontallyCentered?i.x-=s.x/2:h.isRight&&(i.x-=s.x),h.isVerticallyCentered?i.y-=s.y/2:h.isBottom&&(i.y-=s.y))},destroy:function(){var i=this.element,s=this.style;i.parentNode&&(i.parentNode.removeChild(i),i.prevElementParent&&(s.display="none",document.body.appendChild(i))),this.onDraw=null,s.top="",s.left="",s.position="",null!==this.width&&(s.width=""),null!==this.height&&(s.height="");var h=e.getCssPropertyWithVendorPrefix("transformOrigin"),d=e.getCssPropertyWithVendorPrefix("transform");h&&d&&(s[h]="",s[d]="")},drawHTML:function(i,s){var h=this.element;h.parentNode!==i&&(h.prevElementParent=h.parentNode,h.prevNextSibling=h.nextSibling,i.appendChild(h),this.style.position="absolute",this.size=e.getElementSize(h));var d=this._getOverlayPositionAndSize(s),r=d.position,o=this.size=d.size,a=d.rotate;if(this.onDraw)this.onDraw(r,o,this.element);else{var p=this.style;p.left=r.x+"px",p.top=r.y+"px",null!==this.width&&(p.width=o.x+"px"),null!==this.height&&(p.height=o.y+"px");var w=e.getCssPropertyWithVendorPrefix("transformOrigin"),x=e.getCssPropertyWithVendorPrefix("transform");w&&x&&(a?(p[w]=this._getTransformOrigin(),p[x]="rotate("+a+"deg)"):(p[w]="",p[x]="")),p.display="block"}},_getOverlayPositionAndSize:function(i){var s=i.pixelFromPoint(this.location,!0),h=this._getSizeInPixels(i);this.adjust(s,h);var d=0;if(i.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var r=new e.Rect(s.x,s.y,h.x,h.y),o=this._getBoundingBox(r,i.degrees);s=o.getTopLeft(),h=o.getSize()}else d=i.degrees;return{position:s,size:h,rotate:d}},_getSizeInPixels:function(i){var s=this.size.x,h=this.size.y;if(null!==this.width||null!==this.height){var d=i.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(s=d.x),null!==this.height&&(h=d.y)}if(this.checkResize&&(null===this.width||null===this.height)){var r=this.size=e.getElementSize(this.element);null===this.width&&(s=r.x),null===this.height&&(h=r.y)}return new e.Point(s,h)},_getBoundingBox:function(i,s){var h=this._getPlacementPoint(i);return i.rotate(s,h).getBoundingBox()},_getPlacementPoint:function(i){var s=new e.Point(i.x,i.y),h=e.Placement.properties[this.placement];return h&&(h.isHorizontallyCentered?s.x+=i.width/2:h.isRight&&(s.x+=i.width),h.isVerticallyCentered?s.y+=i.height/2:h.isBottom&&(s.y+=i.height)),s},_getTransformOrigin:function(){var i="",s=e.Placement.properties[this.placement];return s&&(s.isLeft?i="left":s.isRight&&(i="right"),s.isTop?i+=" top":s.isBottom&&(i+=" bottom")),i},update:function(i,s){var h=e.isPlainObject(i)?i:{location:i,placement:s};this._init({location:h.location||this.location,placement:void 0!==h.placement?h.placement:this.placement,onDraw:h.onDraw||this.onDraw,checkResize:h.checkResize||this.checkResize,width:void 0!==h.width?h.width:this.width,height:void 0!==h.height?h.height:this.height,rotationMode:h.rotationMode||this.rotationMode})},getBounds:function(i){e.console.assert(i,"A viewport must now be passed to Overlay.getBounds.");var s=this.width,h=this.height;if(null===s||null===h){var d=i.deltaPointsFromPixelsNoRotate(this.size,!0);null===s&&(s=d.x),null===h&&(h=d.y)}var r=this.location.clone();return this.adjust(r,new e.Point(s,h)),this._adjustBoundsForRotation(i,new e.Rect(r.x,r.y,s,h))},_adjustBoundsForRotation:function(i,s){if(!i||0===i.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return s;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return s;var h=this._getOverlayPositionAndSize(i);return i.viewerElementToViewportRectangle(new e.Rect(h.position.x,h.position.y,h.size.x,h.size.y))}return s.rotate(-i.degrees,this._getPlacementPoint(s))}}}(OpenSeadragon),function(e){e.Drawer=function(i){e.console.assert(i.viewer,"[Drawer] options.viewer is required");var s=arguments;if(e.isPlainObject(i)||(i={source:s[0],viewport:s[1],element:s[2]}),e.console.assert(i.viewport,"[Drawer] options.viewport is required"),e.console.assert(i.element,"[Drawer] options.element is required"),i.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=i.viewer,this.viewport=i.viewport,this.debugGridColor="string"==typeof i.debugGridColor?[i.debugGridColor]:i.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,i.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(i.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var h=this._calculateCanvasSize();this.canvas.width=h.x,this.canvas.height=h.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(i,s,h,d){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(i,s,h,d),this},updateOverlay:function(i,s,h){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(i,s,h),this},removeOverlay:function(i){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(i),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(i){var s=this.viewport.pixelFromPointNoRotate(i,!0);return new e.Point(s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio)},clipWithPolygons:function(i,s){if(this.useCanvas){var h=this._getContext(s);h.beginPath(),i.forEach(function(d){d.forEach(function(r,o){h[0===o?"moveTo":"lineTo"](r.x,r.y)})}),h.clip()}},setOpacity:function(i){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var s=this.viewer.world,h=0;h<s.getItemCount();h++)s.getItemAt(h).setOpacity(i);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var i=this.viewer.world,s=0,h=0;h<i.getItemCount();h++){var d=i.getItemAt(h).getOpacity();d>s&&(s=d)}return s},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var i=this._calculateCanvasSize();if((this.canvas.width!==i.x||this.canvas.height!==i.y)&&(this.canvas.width=i.x,this.canvas.height=i.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var s=this._calculateSketchCanvasSize();this.sketchCanvas.width=s.x,this.sketchCanvas.height=s.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(i,s){if(this.useCanvas){var h=this._getContext(i);if(s)h.clearRect(s.x,s.y,s.width,s.height);else{var d=h.canvas;h.clearRect(0,0,d.width,d.height)}}},viewportToDrawerRectangle:function(i){var s=this.viewport.pixelFromPointNoRotate(i.getTopLeft(),!0),h=this.viewport.deltaPixelsFromPointsNoRotate(i.getSize(),!0);return new e.Rect(s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio,h.x*e.pixelDensityRatio,h.y*e.pixelDensityRatio)},drawTile:function(i,s,h,d,r,o){if(e.console.assert(i,"[Drawer.drawTile] tile is required"),e.console.assert(s,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var a=this._getContext(h);i.drawCanvas(a,s,d=d||1,r,o)}else i.drawHTML(this.canvas)},_getContext:function(i){var s=this.context;if(i){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var h=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=h.x,this.sketchCanvas.height=h.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var d=this;this.viewer.addHandler("rotate",function r(){if(0!==d.viewport.getRotation()){d.viewer.removeHandler("rotate",r);var o=d._calculateSketchCanvasSize();d.sketchCanvas.width=o.x,d.sketchCanvas.height=o.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}s=this.sketchContext}return s},saveContext:function(i){!this.useCanvas||this._getContext(i).save()},restoreContext:function(i){!this.useCanvas||this._getContext(i).restore()},setClip:function(i,s){if(this.useCanvas){var h=this._getContext(s);h.beginPath(),h.rect(i.x,i.y,i.width,i.height),h.clip()}},drawRectangle:function(i,s,h){if(this.useCanvas){var d=this._getContext(h);d.save(),d.fillStyle=s,d.fillRect(i.x,i.y,i.width,i.height),d.restore()}},blendSketch:function(i,s,h,d){var r=i;if(e.isPlainObject(r)||(r={opacity:i,scale:s,translate:h,compositeOperation:d}),this.useCanvas&&this.sketchCanvas){i=r.opacity,d=r.compositeOperation;var o=r.bounds;if(this.context.save(),this.context.globalAlpha=i,d&&(this.context.globalCompositeOperation=d),o)o.x<0&&(o.width+=o.x,o.x=0),o.x+o.width>this.canvas.width&&(o.width=this.canvas.width-o.x),o.y<0&&(o.height+=o.y,o.y=0),o.y+o.height>this.canvas.height&&(o.height=this.canvas.height-o.y),this.context.drawImage(this.sketchCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height);else{s=r.scale||1;var a=(h=r.translate)instanceof e.Point?h:new e.Point(0,0),p=0,w=0;if(h){var A=this.sketchCanvas.height-this.canvas.height;p=Math.round((this.sketchCanvas.width-this.canvas.width)/2),w=Math.round(A/2)}this.context.drawImage(this.sketchCanvas,a.x-p*s,a.y-w*s,(this.canvas.width+2*p)*s,(this.canvas.height+2*w)*s,-p,-w,this.canvas.width+2*p,this.canvas.height+2*w)}this.context.restore()}},drawDebugInfo:function(i,s,h,d){if(this.useCanvas){var r=this.viewer.world.getIndexOfItem(d)%this.debugGridColor.length,o=this.context;o.save(),o.lineWidth=2*e.pixelDensityRatio,o.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",o.strokeStyle=this.debugGridColor[r],o.fillStyle=this.debugGridColor[r],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),d.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:d.getRotation(!0),point:d.viewport.pixelFromPointNoRotate(d._getRotationPoint(!0),!0)}),0===d.viewport.degrees&&d.getRotation(!0)%360==0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),o.strokeRect(i.position.x*e.pixelDensityRatio,i.position.y*e.pixelDensityRatio,i.size.x*e.pixelDensityRatio,i.size.y*e.pixelDensityRatio);var a=(i.position.x+i.size.x/2)*e.pixelDensityRatio,p=(i.position.y+i.size.y/2)*e.pixelDensityRatio;o.translate(a,p),o.rotate(Math.PI/180*-this.viewport.degrees),o.translate(-a,-p),0===i.x&&0===i.y&&(o.fillText("Zoom: "+this.viewport.getZoom(),i.position.x*e.pixelDensityRatio,(i.position.y-30)*e.pixelDensityRatio),o.fillText("Pan: "+this.viewport.getBounds().toString(),i.position.x*e.pixelDensityRatio,(i.position.y-20)*e.pixelDensityRatio)),o.fillText("Level: "+i.level,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+20)*e.pixelDensityRatio),o.fillText("Column: "+i.x,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+30)*e.pixelDensityRatio),o.fillText("Row: "+i.y,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+40)*e.pixelDensityRatio),o.fillText("Order: "+h+" of "+s,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+50)*e.pixelDensityRatio),o.fillText("Size: "+i.size.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+60)*e.pixelDensityRatio),o.fillText("Position: "+i.position.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),d.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===d.viewport.degrees&&d.getRotation(!0)%360==0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),o.restore()}},debugRect:function(i){if(this.useCanvas){var s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.strokeStyle=this.debugGridColor[0],s.fillStyle=this.debugGridColor[0],s.strokeRect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,i.width*e.pixelDensityRatio,i.height*e.pixelDensityRatio),s.restore()}},setImageSmoothingEnabled:function(i){this.useCanvas&&(this._imageSmoothingEnabled=i,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(i){i.msImageSmoothingEnabled=this._imageSmoothingEnabled,i.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(i){var s=this._getContext(i).canvas;return new e.Point(s.width,s.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(i){var s=i.point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),h=this._getContext(i.useSketch);h.save(),h.translate(s.x,s.y),this.viewer.viewport.flipped?(h.rotate(Math.PI/180*-i.degrees),h.scale(-1,1)):h.rotate(Math.PI/180*i.degrees),h.translate(-s.x,-s.y)},_flip:function(i){var s=(i=i||{}).point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),h=this._getContext(i.useSketch);h.translate(s.x,0),h.scale(-1,1),h.translate(-s.x,0)},_restoreRotationChanges:function(i){this._getContext(i).restore()},_calculateCanvasSize:function(){var i=e.pixelDensityRatio,s=this.viewport.getContainerSize();return{x:Math.round(s.x*i),y:Math.round(s.y*i)}},_calculateSketchCanvasSize:function(){var i=this._calculateCanvasSize();if(0===this.viewport.getRotation())return i;var s=Math.ceil(Math.sqrt(i.x*i.x+i.y*i.y));return{x:s,y:s}}}}(OpenSeadragon),function(e){e.Viewport=function(i){var s=arguments;s.length&&s[0]instanceof e.Point&&(i={containerSize:s[0],contentSize:s[1],config:s[2]}),i.config&&(e.extend(!0,i,i.config),delete i.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i.margins||{}),delete i.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},i),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(i){return e.console.assert(i,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(i instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(i.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(i.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,i.y/i.x),i.x),this},setHomeBounds:function(i,s){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(i,s)},_setContentBounds:function(i,s){e.console.assert(i,"[Viewport._setContentBounds] bounds is required"),e.console.assert(i instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(i.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(i.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=i.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(s),this._contentBounds=i.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(s),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:s,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var i=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?i>=1?i:1:i>=1?1:i)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var i=this._contentBounds.getCenter(),s=1/this.getHomeZoom(),h=s/this.getAspectRatio();return new e.Rect(i.x-s/2,i.y-h/2,s,h)},goHome:function(i){return this.viewer&&this.viewer.raiseEvent("home",{immediately:i}),this.fitBounds(this.getHomeBounds(),i)},getMinZoom:function(){var i=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*i},getMaxZoom:function(){var i=this.maxZoomLevel;return i||(i=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,i/=this._contentBounds.width),Math.max(i,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(i){e.console.assert("object"===e.type(i),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(i){return this.getBoundsNoRotate(i).rotate(-this.getRotation())},getBoundsNoRotate:function(i){var s=this.getCenter(i),h=1/this.getZoom(i),d=h/this.getAspectRatio();return new e.Rect(s.x-h/2,s.y-d/2,h,d)},getBoundsWithMargins:function(i){return this.getBoundsNoRotateWithMargins(i).rotate(-this.getRotation(),this.getCenter(i))},getBoundsNoRotateWithMargins:function(i){var s=this.getBoundsNoRotate(i),h=this._containerInnerSize.x*this.getZoom(i);return s.x-=this._margins.left/h,s.y-=this._margins.top/h,s.width+=(this._margins.left+this._margins.right)/h,s.height+=(this._margins.top+this._margins.bottom)/h,s},getCenter:function(i){var d,r,o,a,p,A,s=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return i?s:this.zoomPoint?(d=this.pixelFromPoint(this.zoomPoint,!0),a=(o=1/(r=this.getZoom()))/this.getAspectRatio(),p=new e.Rect(s.x-o/2,s.y-a/2,o,a),A=this._pixelFromPoint(this.zoomPoint,p).minus(d).divide(this._containerInnerSize.x*r),h.plus(A)):h},getZoom:function(i){return i?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(i){return Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(i){var s=new e.Rect(i.x,i.y,i.width,i.height);if(!this.wrapHorizontal){var h=this.visibilityRatio*s.width,o=this._contentBoundsNoRotate.x-(s.x+s.width)+h,a=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width-s.x-h;h>this._contentBoundsNoRotate.width?s.x+=(o+a)/2:a<0?s.x+=a:o>0&&(s.x+=o)}if(!this.wrapVertical){var p=this.visibilityRatio*s.height,A=this._contentBoundsNoRotate.y-(s.y+s.height)+p,P=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height-s.y-p;p>this._contentBoundsNoRotate.height?s.y+=(A+P)/2:P<0?s.y+=P:A>0&&(s.y+=A)}return s},_raiseConstraintsEvent:function(i){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:i})},applyConstraints:function(i){var s=this.getZoom(),h=this._applyZoomConstraints(s);s!==h&&this.zoomTo(h,this.zoomPoint,i);var d=this.getBoundsNoRotate(),r=this._applyBoundaryConstraints(d);return this._raiseConstraintsEvent(i),(d.x!==r.x||d.y!==r.y||i)&&this.fitBounds(r.rotate(-this.getRotation()),i),this},ensureVisible:function(i){return this.applyConstraints(i)},_fitBounds:function(i,s){var h=(s=s||{}).immediately||!1,d=s.constraints||!1,r=this.getAspectRatio(),o=i.getCenter(),a=new e.Rect(i.x,i.y,i.width,i.height,i.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=r?a.height=a.width/r:a.width=a.height*r,a.x=o.x-a.width/2,a.y=o.y-a.height/2;var p=1/a.width;if(d){var w=a.getAspectRatio(),x=this._applyZoomConstraints(p);p!==x&&(a.width=1/(p=x),a.x=o.x-a.width/2,a.height=a.width/w,a.y=o.y-a.height/2),o=(a=this._applyBoundaryConstraints(a)).getCenter(),this._raiseConstraintsEvent(h)}if(h)return this.panTo(o,!0),this.zoomTo(p,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var A=this.getBounds(),P=this.getZoom();if(0===P||Math.abs(p/P-1)<1e-8)return this.zoomTo(p,!0),this.panTo(o,h);var O=(a=a.rotate(-this.getRotation())).getTopLeft().times(p).minus(A.getTopLeft().times(P)).divide(p-P);return this.zoomTo(p,O,h)},fitBounds:function(i,s){return this._fitBounds(i,{immediately:s,constraints:!1})},fitBoundsWithConstraints:function(i,s){return this._fitBounds(i,{immediately:s,constraints:!0})},fitVertically:function(i){var s=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(s,i)},fitHorizontally:function(i){var s=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(s,i)},getConstrainedBounds:function(i){var s;return s=this.getBounds(i),this._applyBoundaryConstraints(s)},panBy:function(i,s){var h=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(h.plus(i),s)},panTo:function(i,s){return s?(this.centerSpringX.resetTo(i.x),this.centerSpringY.resetTo(i.y)):(this.centerSpringX.springTo(i.x),this.centerSpringY.springTo(i.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:i,immediately:s}),this},zoomBy:function(i,s,h){return this.zoomTo(this.zoomSpring.target.value*i,s,h)},zoomTo:function(i,s,h){var d=this;return this.zoomPoint=s instanceof e.Point&&!isNaN(s.x)&&!isNaN(s.y)?s:null,h?this._adjustCenterSpringsForZoomPoint(function(){d.zoomSpring.resetTo(i)}):this.zoomSpring.springTo(i),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:i,refPoint:s,immediately:h}),this},setRotation:function(i){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(i,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:i}),this):this},getRotation:function(){return this.degrees},resize:function(i,s){var h=this.getBoundsNoRotate(),d=h;return this.containerSize.x=i.x,this.containerSize.y=i.y,this._updateContainerInnerSize(),s&&(d.width=h.width*(i.x/this.containerSize.x),d.height=d.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:i,maintain:s}),this.fitBounds(d,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var i=this;this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var s=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,s},_adjustCenterSpringsForZoomPoint:function(i){if(this.zoomPoint){var s=this.pixelFromPoint(this.zoomPoint,!0);i();var d=this.pixelFromPoint(this.zoomPoint,!0).minus(s),r=this.deltaPointsFromPixels(d,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else i()},deltaPixelsFromPointsNoRotate:function(i,s){return i.times(this._containerInnerSize.x*this.getZoom(s))},deltaPixelsFromPoints:function(i,s){return this.deltaPixelsFromPointsNoRotate(i.rotate(this.getRotation()),s)},deltaPointsFromPixelsNoRotate:function(i,s){return i.divide(this._containerInnerSize.x*this.getZoom(s))},deltaPointsFromPixels:function(i,s){return this.deltaPointsFromPixelsNoRotate(i,s).rotate(-this.getRotation())},pixelFromPointNoRotate:function(i,s){return this._pixelFromPointNoRotate(i,this.getBoundsNoRotate(s))},pixelFromPoint:function(i,s){return this._pixelFromPoint(i,this.getBoundsNoRotate(s))},_pixelFromPointNoRotate:function(i,s){return i.minus(s.getTopLeft()).times(this._containerInnerSize.x/s.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(i,s){return this._pixelFromPointNoRotate(i.rotate(this.getRotation(),this.getCenter(!0)),s)},pointFromPixelNoRotate:function(i,s){var h=this.getBoundsNoRotate(s);return i.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/h.width).plus(h.getTopLeft())},pointFromPixel:function(i,s){return this.pointFromPixelNoRotate(i,s).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(i,s){var h=this._contentBoundsNoRotate.width;return new e.Point(i*this._contentSizeNoRotate.x/h,s*this._contentSizeNoRotate.x/h)},viewportToImageCoordinates:function(i,s){if(i instanceof e.Point)return this.viewportToImageCoordinates(i.x,i.y);if(this.viewer){var h=this.viewer.world.getItemCount();if(h>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===h)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(i,s,!0)}return this._viewportToImageDelta(i-this._contentBoundsNoRotate.x,s-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(i,s){var h=this._contentBoundsNoRotate.width;return new e.Point(i/this._contentSizeNoRotate.x*h,s/this._contentSizeNoRotate.x*h)},imageToViewportCoordinates:function(i,s){if(i instanceof e.Point)return this.imageToViewportCoordinates(i.x,i.y);if(this.viewer){var h=this.viewer.world.getItemCount();if(h>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===h)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(i,s,!0)}var r=this._imageToViewportDelta(i,s);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(i,s,h,d){var r=i;if(r instanceof e.Rect||(r=new e.Rect(i,s,h,d)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===o)return this.viewer.world.getItemAt(0).imageToViewportRectangle(i,s,h,d,!0)}var p=this.imageToViewportCoordinates(r.x,r.y),w=this._imageToViewportDelta(r.width,r.height);return new e.Rect(p.x,p.y,w.x,w.y,r.degrees)},viewportToImageRectangle:function(i,s,h,d){var r=i;if(r instanceof e.Rect||(r=new e.Rect(i,s,h,d)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===o)return this.viewer.world.getItemAt(0).viewportToImageRectangle(i,s,h,d,!0)}var p=this.viewportToImageCoordinates(r.x,r.y),w=this._viewportToImageDelta(r.width,r.height);return new e.Rect(p.x,p.y,w.x,w.y,r.degrees)},viewerElementToImageCoordinates:function(i){var s=this.pointFromPixel(i,!0);return this.viewportToImageCoordinates(s)},imageToViewerElementCoordinates:function(i){var s=this.imageToViewportCoordinates(i);return this.pixelFromPoint(s,!0)},windowToImageCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var s=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(s)},imageToWindowCoordinates:function(i){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(i){return this.pointFromPixel(i,!0)},viewportToViewerElementCoordinates:function(i){return this.pixelFromPoint(i,!0)},viewerElementToViewportRectangle:function(i){return e.Rect.fromSummits(this.pointFromPixel(i.getTopLeft(),!0),this.pointFromPixel(i.getTopRight(),!0),this.pointFromPixel(i.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(i){return e.Rect.fromSummits(this.pixelFromPoint(i.getTopLeft(),!0),this.pixelFromPoint(i.getTopRight(),!0),this.pixelFromPoint(i.getBottomLeft(),!0))},windowToViewportCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var s=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(s)},viewportToWindowCoordinates:function(i){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(i){if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===s)return this.viewer.world.getItemAt(0).viewportToImageZoom(i)}return i*(this._containerInnerSize.x/this._contentSizeNoRotate.x*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(i){if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===s)return this.viewer.world.getItemAt(0).imageToViewportZoom(i)}return i*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(i){return this.flipped===i||(this.flipped=i,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:i})),this}}}(OpenSeadragon),function(e){e.TiledImage=function(r){var o=this;e.console.assert(r.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(r.drawer,"[TiledImage] options.drawer is required"),e.console.assert(r.viewer,"[TiledImage] options.viewer is required"),e.console.assert(r.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(r.source,"[TiledImage] options.source is required"),e.console.assert(!r.clip||r.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=r.tileCache,delete r.tileCache,this._drawer=r.drawer,delete r.drawer,this._imageLoader=r.imageLoader,delete r.imageLoader,r.clip instanceof e.Rect&&(this._clip=r.clip.clone()),delete r.clip;var a=r.x||0;delete r.x;var p=r.y||0;delete r.y,this.normHeight=r.source.dimensions.y/r.source.dimensions.x,this.contentAspectX=r.source.dimensions.x/r.source.dimensions.y;var w=1;r.width?(w=r.width,delete r.width,r.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete r.height)):r.height&&(w=r.height/this.normHeight,delete r.height);var x=r.fitBounds;delete r.fitBounds;var A=r.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete r.fitBoundsPlacement;var P=r.degrees||0;delete r.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency},r),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:a,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:p,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:w,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:P,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),x&&this.fitBounds(x,A,!0),this._drawingHandler=function(O){o.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:o},O))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(r){r!==this._fullyLoaded&&(this._fullyLoaded=r,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var r=this._xSpring.update(),o=this._ySpring.update(),a=this._scaleSpring.update(),p=this._degreesSpring.update();return!!(r||o||a||p)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(r){return this.getBoundsNoRotate(r).rotate(this.getRotation(r),this._getRotationPoint(r))},getBoundsNoRotate:function(r){return r?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(r){var o=this.getBoundsNoRotate(r);if(this._clip){var w=this._clip.times((r?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x);o=new e.Rect(o.x+w.x,o.y+w.y,w.width,w.height)}return o.rotate(this.getRotation(r),this._getRotationPoint(r))},getTileBounds:function(r,o,a){var p=this.source.getNumTiles(r),w=(p.x+o%p.x)%p.x,x=(p.y+a%p.y)%p.y,A=this.source.getTileBounds(r,w,x);return this.getFlip()&&(A.x=1-A.x-A.width),A.x+=(o-w)/p.x,A.y+=this._worldHeightCurrent/this._worldWidthCurrent*((a-x)/p.y),A},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var r=this.imageToWindowCoordinates(new e.Point(0,0)),o=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(o.x-r.x,o.y-r.y)},_viewportToImageDelta:function(r,o,a){var p=a?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(r*(this.source.dimensions.x/p),o*(this.source.dimensions.y*this.contentAspectX/p))},viewportToImageCoordinates:function(r,o,a){var p;return r instanceof e.Point?(a=o,p=r):p=new e.Point(r,o),p=p.rotate(-this.getRotation(a),this._getRotationPoint(a)),a?this._viewportToImageDelta(p.x-this._xSpring.current.value,p.y-this._ySpring.current.value):this._viewportToImageDelta(p.x-this._xSpring.target.value,p.y-this._ySpring.target.value)},_imageToViewportDelta:function(r,o,a){var p=a?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(r/this.source.dimensions.x*p,o/this.source.dimensions.y/this.contentAspectX*p)},imageToViewportCoordinates:function(r,o,a){r instanceof e.Point&&(a=o,o=r.y,r=r.x);var p=this._imageToViewportDelta(r,o);return a?(p.x+=this._xSpring.current.value,p.y+=this._ySpring.current.value):(p.x+=this._xSpring.target.value,p.y+=this._ySpring.target.value),p.rotate(this.getRotation(a),this._getRotationPoint(a))},imageToViewportRectangle:function(r,o,a,p,w){var x=r;x instanceof e.Rect?w=o:x=new e.Rect(r,o,a,p);var A=this.imageToViewportCoordinates(x.getTopLeft(),w),P=this._imageToViewportDelta(x.width,x.height,w);return new e.Rect(A.x,A.y,P.x,P.y,x.degrees+this.getRotation(w))},viewportToImageRectangle:function(r,o,a,p,w){var x=r;r instanceof e.Rect?w=o:x=new e.Rect(r,o,a,p);var A=this.viewportToImageCoordinates(x.getTopLeft(),w),P=this._viewportToImageDelta(x.width,x.height,w);return new e.Rect(A.x,A.y,P.x,P.y,x.degrees-this.getRotation(w))},viewerElementToImageCoordinates:function(r){var o=this.viewport.pointFromPixel(r,!0);return this.viewportToImageCoordinates(o)},imageToViewerElementCoordinates:function(r){var o=this.imageToViewportCoordinates(r);return this.viewport.pixelFromPoint(o,!0)},windowToImageCoordinates:function(r){var o=r.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(o)},imageToWindowCoordinates:function(r){return this.imageToViewerElementCoordinates(r).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(r){var o=this._scaleSpring.current.value;return r=r.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((r.x-this._xSpring.current.value)/o,(r.y-this._ySpring.current.value)/o,r.width/o,r.height/o,r.degrees)},viewportToImageZoom:function(r){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*r},imageToViewportZoom:function(r){return r/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(r,o){var a=this._xSpring.target.value===r.x&&this._ySpring.target.value===r.y;if(o){if(a&&this._xSpring.current.value===r.x&&this._ySpring.current.value===r.y)return;this._xSpring.resetTo(r.x),this._ySpring.resetTo(r.y),this._needsDraw=!0}else{if(a)return;this._xSpring.springTo(r.x),this._ySpring.springTo(r.y),this._needsDraw=!0}a||this._raiseBoundsChange()},setWidth:function(r,o){this._setScale(r,o)},setHeight:function(r,o){this._setScale(r/this.normHeight,o)},setCroppingPolygons:function(r){try{if(!e.isArray(r))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=r.map(function(p){return function(p){return p.map(function(w){try{if(function(p){return p instanceof e.Point||"number"==typeof p.x&&"number"==typeof p.y}(w))return{x:w.x,y:w.y};throw new Error}catch(x){throw new Error("A Provided cropping polygon point is not supported")}})}(p)})}catch(p){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(p),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(r,o,a){var p=e.Placement.properties[o=o||e.Placement.CENTER],w=this.contentAspectX,x=0,A=0,P=1,O=1;if(this._clip&&(w=this._clip.getAspectRatio(),P=this._clip.width/this.source.dimensions.x,O=this._clip.height/this.source.dimensions.y,r.getAspectRatio()>w?(x=this._clip.x/this._clip.height*r.height,A=this._clip.y/this._clip.height*r.height):(x=this._clip.x/this._clip.width*r.width,A=this._clip.y/this._clip.width*r.width)),r.getAspectRatio()>w){var b=r.height/O,R=0;p.isHorizontallyCentered?R=(r.width-r.height*w)/2:p.isRight&&(R=r.width-r.height*w),this.setPosition(new e.Point(r.x-x+R,r.y-A),a),this.setHeight(b,a)}else{var _=r.width/P,I=0;p.isVerticallyCentered?I=(r.height-r.width/w)/2:p.isBottom&&(I=r.height-r.width/w),this.setPosition(new e.Point(r.x-x,r.y-A+I),a),this.setWidth(_,a)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(r){e.console.assert(!r||r instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),this._clip=r instanceof e.Rect?r.clone():null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(r){this.flipped=!!r,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(r){r!==this.opacity&&(this.opacity=r,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(r){this._preload=!!r,this._needsDraw=!0},getRotation:function(r){return r?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(r,o){this._degreesSpring.target.value===r&&this._degreesSpring.isAtTargetValue()||(o?this._degreesSpring.resetTo(r):this._degreesSpring.springTo(r),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(r){return this.getBoundsNoRotate(r).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(r){r!==this.compositeOperation&&(this.compositeOperation=r,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(r,o){var a=this._scaleSpring.target.value===r;if(o){if(a&&this._scaleSpring.current.value===r)return;this._scaleSpring.resetTo(r),this._updateForScale(),this._needsDraw=!0}else{if(a)return;this._scaleSpring.springTo(r),this._updateForScale(),this._needsDraw=!0}a||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var r=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),o=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,a=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(o/this.minPixelRatio)/Math.log(2))));return a=Math.max(a,this.source.minLevel||0),{lowestLevel:r=Math.min(r,a),highestLevel:a}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;)this.lastDrawn.pop().beingDrawn=!1;var o=this.viewport,a=this._viewportToTiledImageRectangle(o.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var p=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(a=a.intersection(p)))return}for(var w=this._getLevelsInterval(),x=w.lowestLevel,A=w.highestLevel,P=null,O=!1,b=e.now(),R=A;R>=x;R--){var _=!1,I=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(R),!0).x*this._scaleSpring.current.value;if(R===x||!O&&I>=this.minPixelRatio)_=!0,O=!0;else if(!O)continue;var X=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(R),!1).x*this._scaleSpring.current.value,Y=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,ie=this.immediateRender?1:Y,ue=Math.min(1,(I-.5)/.5),l=ie/Math.abs(ie-X);if(P=this._updateLevel(O,_,R,ue,l,a,b,P),this._providesCoverage(this.coverage,R))break}this._drawTiles(this.lastDrawn),P&&!P.context2D?(this._loadTile(P,b),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(r,o,a){var p,w;this.wrapHorizontal?(p=e.positiveModulo(o.x,1),w=e.positiveModulo(a.x,1)):(p=Math.max(0,o.x),w=Math.min(1,a.x));var x,A,P=1/this.source.aspectRatio;this.wrapVertical?(x=e.positiveModulo(o.y,P),A=e.positiveModulo(a.y,P)):(x=Math.max(0,o.y),A=Math.min(P,a.y));var O=this.source.getTileAtPoint(r,new e.Point(p,x)),b=this.source.getTileAtPoint(r,new e.Point(w,A)),R=this.source.getNumTiles(r);return this.wrapHorizontal&&(O.x+=R.x*Math.floor(o.x),b.x+=R.x*Math.floor(a.x)),this.wrapVertical&&(O.y+=R.y*Math.floor(o.y/P),b.y+=R.y*Math.floor(a.y/P)),{topLeft:O,bottomRight:b}},_updateLevel:function(r,o,a,p,w,x,A,P){var O=x.getBoundingBox().getTopLeft(),b=x.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:r,level:a,opacity:p,visibility:w,drawArea:x,topleft:O,bottomright:b,currenttime:A,best:P}),this._resetCoverage(this.coverage,a),this._resetCoverage(this.loadingCoverage,a);var R=this._getCornerTiles(a,O,b),_=R.topLeft,I=R.bottomRight,X=this.source.getNumTiles(a),Y=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(I.x+=1,this.wrapHorizontal||(I.x=Math.min(I.x,X.x-1)));for(var ie=_.x;ie<=I.x;ie++)for(var ue=_.y;ue<=I.y;ue++){var l;if(this.getFlip()){var Te=(X.x+ie%X.x)%X.x;l=ie+X.x-Te-Te-1}else l=ie;null!==x.intersection(this.getTileBounds(a,l,ue))&&(P=this._updateTile(o,r,l,ue,a,p,w,Y,X,A,P))}return P},_updateTile:function(r,o,a,p,w,x,A,P,O,b,R){var _=this._getTile(a,p,w,b,O,this._worldWidthCurrent,this._worldHeightCurrent),I=o;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:_}),this._setCoverage(this.coverage,w,a,p,!1);var X=_.loaded||_.loading||this._isCovered(this.loadingCoverage,w,a,p);if(this._setCoverage(this.loadingCoverage,w,a,p,X),!_.exists||(r&&!I&&(this._isCovered(this.coverage,w,a,p)?this._setCoverage(this.coverage,w,a,p,!0):I=!0),!I))return R;if(this._positionTile(_,this.source.tileOverlap,this.viewport,P,A),!_.loaded)if(_.context2D)this._setTileLoaded(_);else{var Y=this._tileCache.getImageRecord(_.cacheKey);if(Y){var ie=Y.getImage();this._setTileLoaded(_,ie)}}return _.loaded?this._blendTile(_,a,p,w,x,b)&&(this._needsDraw=!0):_.loading?this._tilesLoading++:X||(R=this._compareTiles(R,_)),R},_getTile:function(r,o,a,p,w,x,A){var P,O,b,R,_,I,X,Y,ie,ue,l=this.tilesMatrix,Te=this.source;return l[a]||(l[a]={}),l[a][r]||(l[a][r]={}),(!l[a][r][o]||!l[a][r][o].flipped!=!this.flipped)&&(P=(w.x+r%w.x)%w.x,O=(w.y+o%w.y)%w.y,b=this.getTileBounds(a,r,o),R=Te.getTileBounds(a,P,O,!0),_=Te.tileExists(a,P,O),I=Te.getTileUrl(a,P,O),X=Te.getTilePostData(a,P,O),this.loadTilesWithAjax?(Y=Te.getTileAjaxHeaders(a,P,O),e.isPlainObject(this.ajaxHeaders)&&(Y=e.extend({},this.ajaxHeaders,Y))):Y=null,ie=Te.getContext2D?Te.getContext2D(a,P,O):void 0,ue=new e.Tile(a,r,o,b,_,I,ie,this.loadTilesWithAjax,Y,R,X,Te.getTileHashKey(a,P,O,I,Y,X)),this.getFlip()?0===P&&(ue.isRightMost=!0):P===w.x-1&&(ue.isRightMost=!0),O===w.y-1&&(ue.isBottomMost=!0),ue.flipped=this.flipped,l[a][r][o]=ue),(ue=l[a][r][o]).lastTouchTime=p,ue},_loadTile:function(r,o){var a=this;r.loading=!0,this._imageLoader.addJob({src:r.url,postData:r.postData,loadWithAjax:r.loadWithAjax,ajaxHeaders:r.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(p,w,x){a._onTileLoad(r,o,p,w,x)},abort:function(){r.loading=!1}})},_onTileLoad:function(r,o,a,p,w){if(!a)return e.console.error("Tile %s failed to load: %s - error: %s",r,r.url,p),this.viewer.raiseEvent("tile-load-failed",{tile:r,tiledImage:this,time:o,message:p,tileRequest:w}),r.loading=!1,void(r.exists=!1);if(o<this.lastResetTime)return e.console.warn("Ignoring tile %s loaded before reset: %s",r,r.url),void(r.loading=!1);var x=this,A=function(){var O=x.source.getClosestLevel();x._setTileLoaded(r,a,O,w)};this._midDraw?window.setTimeout(A,1):A()},_setTileLoaded:function(r,o,a,p){var w=0,x=this;function A(){return w++,P}function P(){0==--w&&(r.loading=!1,r.loaded=!0,r.context2D||x._tileCache.cacheTile({image:o,tile:r,cutoff:a,tiledImage:x}),x._needsDraw=!0)}this.viewer.raiseEvent("tile-loaded",{tile:r,tiledImage:this,tileRequest:p,image:o,getCompletionCallback:A}),A()()},_positionTile:function(r,o,a,p,w){var x=r.bounds.getTopLeft();x.x*=this._scaleSpring.current.value,x.y*=this._scaleSpring.current.value,x.x+=this._xSpring.current.value,x.y+=this._ySpring.current.value;var A=r.bounds.getSize();A.x*=this._scaleSpring.current.value,A.y*=this._scaleSpring.current.value;var P=a.pixelFromPointNoRotate(x,!0),O=a.pixelFromPointNoRotate(x,!1),b=a.deltaPixelsFromPointsNoRotate(A,!0),R=a.deltaPixelsFromPointsNoRotate(A,!1),_=O.plus(R.divide(2)),I=p.squaredDistanceTo(_);o||(b=b.plus(new e.Point(1,1))),r.isRightMost&&this.wrapHorizontal&&(b.x+=.75),r.isBottomMost&&this.wrapVertical&&(b.y+=.75),r.position=P,r.size=b,r.squaredDistance=I,r.visibility=w},_blendTile:function(r,o,a,p,w,x){var P,O,A=1e3*this.blendTime;if(r.blendStart||(r.blendStart=x),P=x-r.blendStart,O=A?Math.min(1,P/A):1,this.alwaysBlend&&(O*=w),r.opacity=O,this.lastDrawn.push(r),1===O)this._setCoverage(this.coverage,p,o,a,!0),this._hasOpaqueTile=!0;else if(P<A)return!0;return!1},_compareTiles:function(r,o){return!r||o.visibility>r.visibility||o.visibility===r.visibility&&o.squaredDistance<r.squaredDistance?o:r},_drawTiles:function(r){if(0!==this.opacity&&(0!==r.length||this.placeholderFillStyle)){var a,o=r[0];o&&(a=this.opacity<1||this.compositeOperation&&"source-over"!==this.compositeOperation||!this._isBottomItem()&&o._hasTransparencyChannel());var p,w,P,x=this.viewport.getZoom(!0),A=this.viewportToImageZoom(x);r.length>1&&A>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360==0&&e.supportsCanvas&&this.viewer.useCanvas&&(a=!0,p=o.getScaleForEdgeSmoothing(),w=o.getTranslationForEdgeSmoothing(p,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0))),a&&(p||(P=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(0!==this.viewport.degrees||this.getRotation(!0)%360!=0)&&(P.x=this._drawer.viewer.container.clientWidth-(P.x+P.width)),P=P.times(e.pixelDensityRatio)),this._drawer._clear(!0,P)),p||(0!==this.viewport.degrees&&this._drawer._offsetForRotation({degrees:this.viewport.degrees,useSketch:a}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:a}),0===this.viewport.degrees&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var O=!1;if(this._clip){this._drawer.saveContext(a);var b=this.imageToViewportRectangle(this._clip,!0);b=b.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var R=this._drawer.viewportToDrawerRectangle(b);p&&(R=R.times(p)),w&&(R=R.translate(w)),this._drawer.setClip(R,a),O=!0}if(this._croppingPolygons){this._drawer.saveContext(a);try{var _=this._croppingPolygons.map(function(Te){return Te.map(function(ge){var Fe=this.imageToViewportCoordinates(ge.x,ge.y,!0).rotate(-this.getRotation(!0),this._getRotationPoint(!0)),Ue=this._drawer.viewportCoordToDrawerCoord(Fe);return p&&(Ue=Ue.times(p)),Ue})});this._drawer.clipWithPolygons(_,a)}catch(Te){e.console.error(Te)}O=!0}if(this.placeholderFillStyle&&!1===this._hasOpaqueTile){var I=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));p&&(I=I.times(p)),w&&(I=I.translate(w));var X;X="function"==typeof this.placeholderFillStyle?this.placeholderFillStyle(this,this._drawer.context):this.placeholderFillStyle,this._drawer.drawRectangle(I,X,a)}var Y=function d(r){if("number"==typeof r)return h(r);if(!r||!e.Browser)return i;var o=r[e.Browser.vendor];return s(o)&&(o=r["*"]),h(o)}(this.subPixelRoundingForTransparency),ie=!1;Y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?ie=!0:Y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(ie=!(this.viewer&&this.viewer.isAnimating()));for(var l=r.length-1;l>=0;l--)this._drawer.drawTile(o=r[l],this._drawingHandler,a,p,w,ie),o.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:o});O&&this._drawer.restoreContext(a),p||(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(a),0!==this.viewport.degrees&&this._drawer._restoreRotationChanges(a)),a&&(p&&(0!==this.viewport.degrees&&this._drawer._offsetForRotation({degrees:this.viewport.degrees,useSketch:!1}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:p,translate:w,compositeOperation:this.compositeOperation,bounds:P}),p&&(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(!1),0!==this.viewport.degrees&&this._drawer._restoreRotationChanges(!1))),p||0===this.viewport.degrees&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(r)}},_drawDebugInfo:function(r){if(this.debugMode)for(var o=r.length-1;o>=0;o--){var a=r[o];try{this._drawer.drawDebugInfo(a,r.length,o,this)}catch(p){e.console.error(p)}}},_providesCoverage:function(r,o,a,p){var w,x,A,P;if(!r[o])return!1;if(void 0===a||void 0===p){for(A in w=r[o])if(Object.prototype.hasOwnProperty.call(w,A))for(P in x=w[A])if(Object.prototype.hasOwnProperty.call(x,P)&&!x[P])return!1;return!0}return void 0===r[o][a]||void 0===r[o][a][p]||!0===r[o][a][p]},_isCovered:function(r,o,a,p){return void 0===a||void 0===p?this._providesCoverage(r,o+1):this._providesCoverage(r,o+1,2*a,2*p)&&this._providesCoverage(r,o+1,2*a,2*p+1)&&this._providesCoverage(r,o+1,2*a+1,2*p)&&this._providesCoverage(r,o+1,2*a+1,2*p+1)},_setCoverage:function(r,o,a,p,w){r[o]?(r[o][a]||(r[o][a]={}),r[o][a][p]=w):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",o)},_resetCoverage:function(r,o){r[o]={}}});var i=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function s(r){return r!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&r!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&r!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function h(r){return s(r)?i:r}}(OpenSeadragon),function(e){var i=function(h){e.console.assert(h,"[TileCache.cacheTile] options is required"),e.console.assert(h.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(h.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=h.tile,this.tiledImage=h.tiledImage},s=function(h){e.console.assert(h,"[ImageRecord] options is required"),e.console.assert(h.image,"[ImageRecord] options.image is required"),this._image=h.image,this._tiles=[]};s.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var h=document.createElement("canvas");h.width=this._image.width,h.height=this._image.height,this._renderedContext=h.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(h){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=h},addTile:function(h){e.console.assert(h,"[ImageRecord.addTile] tile is required"),this._tiles.push(h)},removeTile:function(h){for(var d=0;d<this._tiles.length;d++)if(this._tiles[d]===h)return void this._tiles.splice(d,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",h)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(h){this._maxImageCacheCount=(h=h||{}).maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(h){e.console.assert(h,"[TileCache.cacheTile] options is required"),e.console.assert(h.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(h.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(h.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var d=h.cutoff||0,r=this._tilesLoaded.length,o=this._imagesLoaded[h.tile.cacheKey];if(o||(e.console.assert(h.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),o=this._imagesLoaded[h.tile.cacheKey]=new s({image:h.image}),this._imagesLoadedCount++),o.addTile(h.tile),h.tile.cacheImageRecord=o,this._imagesLoadedCount>this._maxImageCacheCount){for(var x,A,O,R,a=null,p=-1,w=null,_=this._tilesLoaded.length-1;_>=0;_--)if(!((x=(R=this._tilesLoaded[_]).tile).level<=d||x.beingDrawn)){if(!a){a=x,p=_,w=R;continue}((O=x.lastTouchTime)<(A=a.lastTouchTime)||O===A&&x.level>a.level)&&(a=x,p=_,w=R)}a&&p>=0&&(this._unloadTile(w),r=p)}this._tilesLoaded[r]=new i({tile:h.tile,tiledImage:h.tiledImage})},clearTilesFor:function(h){e.console.assert(h,"[TileCache.clearTilesFor] tiledImage is required");for(var d,r=0;r<this._tilesLoaded.length;++r)(d=this._tilesLoaded[r]).tiledImage===h&&(this._unloadTile(d),this._tilesLoaded.splice(r,1),r--)},getImageRecord:function(h){return e.console.assert(h,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[h]},_unloadTile:function(h){e.console.assert(h,"[TileCache._unloadTile] tileRecord is required");var d=h.tile,r=h.tiledImage;d.unload(),d.cacheImageRecord=null;var o=this._imagesLoaded[d.cacheKey];o.removeTile(d),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[d.cacheKey],this._imagesLoadedCount--),r.viewer.raiseEvent("tile-unloaded",{tile:d,tiledImage:r})}}}(OpenSeadragon),function(e){e.World=function(i){var s=this;e.console.assert(i.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=i.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(h){s._autoRefigureSizes?s._figureSizes():s._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(i,s){if(e.console.assert(i,"[World.addItem] item is required"),e.console.assert(i instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(s=s||{}).index){var h=Math.max(0,Math.min(this._items.length,s.index));this._items.splice(h,0,i)}else this._items.push(i);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,i.addHandler("bounds-change",this._delegatedFigureSizes),i.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:i})},getItemAt:function(i){return e.console.assert(void 0!==i,"[World.getItemAt] index is required"),this._items[i]},getIndexOfItem:function(i){return e.console.assert(i,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,i)},getItemCount:function(){return this._items.length},setItemIndex:function(i,s){e.console.assert(i,"[World.setItemIndex] item is required"),e.console.assert(void 0!==s,"[World.setItemIndex] index is required");var h=this.getIndexOfItem(i);if(s>=this._items.length)throw new Error("Index bigger than number of layers.");s===h||-1===h||(this._items.splice(h,1),this._items.splice(s,0,i),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:i,previousIndex:h,newIndex:s}))},removeItem:function(i){e.console.assert(i,"[World.removeItem] item is required");var s=e.indexOf(this._items,i);-1!==s&&(i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy(),this._items.splice(s,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(i))},removeAll:function(){var i,s;for(this.viewer._cancelPendingImages(),s=0;s<this._items.length;s++)(i=this._items[s]).removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy();var h=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,s=0;s<h.length;s++)this._raiseRemoveItem(i=h[s])},resetItems:function(){for(var i=0;i<this._items.length;i++)this._items[i].reset()},update:function(){for(var i=!1,s=0;s<this._items.length;s++)i=this._items[s].update()||i;return i},draw:function(){for(var i=0;i<this._items.length;i++)this._items[i].draw();this._needsDraw=!1},needsDraw:function(){for(var i=0;i<this._items.length;i++)if(this._items[i].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(i){this._autoRefigureSizes=i,i&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(i){var w,s=(i=i||{}).immediately||!1,h=i.layout||e.DEFAULT_SETTINGS.collectionLayout,r=i.columns||e.DEFAULT_SETTINGS.collectionColumns,o=i.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,p=o+(i.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);w=!i.rows&&r?r:Math.ceil(this._items.length/(i.rows||e.DEFAULT_SETTINGS.collectionRows));var P,O,b,_,x=0,A=0;this.setAutoRefigureSizes(!1);for(var I=0;I<this._items.length;I++)I&&I%w==0&&("horizontal"===h?(A+=p,x=0):(x+=p,A=0)),O=(P=this._items[I]).getBounds(),_=new e.Point(x+(o-(b=O.width>O.height?o:o*(O.width/O.height)))/2,A+(o-b*(O.height/O.width))/2),P.setPosition(_,s),P.setWidth(b,s),"horizontal"===h?x+=p:A+=p;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var i=this._homeBounds?this._homeBounds.clone():null,s=this._contentSize?this._contentSize.clone():null,h=this._contentFactor||0;if(this._items.length){var d=this._items[0],r=d.getBounds();this._contentFactor=d.getContentSize().x/r.width;for(var o=d.getClippedBounds().getBoundingBox(),a=o.x,p=o.y,w=o.x+o.width,x=o.y+o.height,A=1;A<this._items.length;A++)r=(d=this._items[A]).getBounds(),this._contentFactor=Math.max(this._contentFactor,d.getContentSize().x/r.width),o=d.getClippedBounds().getBoundingBox(),a=Math.min(a,o.x),p=Math.min(p,o.y),w=Math.max(w,o.x+o.width),x=Math.max(x,o.y+o.height);this._homeBounds=new e.Rect(a,p,w-a,x-p),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;(this._contentFactor!==h||!this._homeBounds.equals(i)||!this._contentSize.equals(s))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(i){this.raiseEvent("remove-item",{item:i})}})}(OpenSeadragon);var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(e){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,h={},d={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function R(_){return _ instanceof r?new r(_.type,R(_.content),_.alias):Array.isArray(_)?_.map(R):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(R){return Object.prototype.toString.call(R).slice(8,-1)},objId:function(R){return R.__id||Object.defineProperty(R,"__id",{value:++s}),R.__id},clone:function R(_,I){var X,Y;switch(I=I||{},d.util.type(_)){case"Object":if(Y=d.util.objId(_),I[Y])return I[Y];for(var ie in I[Y]=X={},_)_.hasOwnProperty(ie)&&(X[ie]=R(_[ie],I));return X;case"Array":return Y=d.util.objId(_),I[Y]?I[Y]:(I[Y]=X=[],_.forEach(function(ue,l){X[l]=R(ue,I)}),X);default:return _}},getLanguage:function(R){for(;R;){var _=i.exec(R.className);if(_)return _[1].toLowerCase();R=R.parentElement}return"none"},setLanguage:function(R,_){R.className=R.className.replace(RegExp(i,"gi"),""),R.classList.add("language-"+_)},currentScript:function(){if("undefined"==typeof document)return null;if(document.currentScript&&"SCRIPT"===document.currentScript.tagName)return document.currentScript;try{throw new Error}catch(X){var R=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(R){var _=document.getElementsByTagName("script");for(var I in _)if(_[I].src==R)return _[I]}return null}},isActive:function(R,_,I){for(var X="no-"+_;R;){var Y=R.classList;if(Y.contains(_))return!0;if(Y.contains(X))return!1;R=R.parentElement}return!!I}},languages:{plain:h,plaintext:h,text:h,txt:h,extend:function(R,_){var I=d.util.clone(d.languages[R]);for(var X in _)I[X]=_[X];return I},insertBefore:function(R,_,I,X){var Y=(X=X||d.languages)[R],ie={};for(var ue in Y)if(Y.hasOwnProperty(ue)){if(ue==_)for(var l in I)I.hasOwnProperty(l)&&(ie[l]=I[l]);I.hasOwnProperty(ue)||(ie[ue]=Y[ue])}var Te=X[R];return X[R]=ie,d.languages.DFS(d.languages,function(ge,Fe){Fe===Te&&ge!=R&&(this[ge]=ie)}),ie},DFS:function R(_,I,X,Y){Y=Y||{};var ie=d.util.objId;for(var ue in _)if(_.hasOwnProperty(ue)){I.call(_,ue,_[ue],X||ue);var l=_[ue],Te=d.util.type(l);"Object"!==Te||Y[ie(l)]?"Array"===Te&&!Y[ie(l)]&&(Y[ie(l)]=!0,R(l,I,ue,Y)):(Y[ie(l)]=!0,R(l,I,null,Y))}}},plugins:{},highlightAll:function(R,_){d.highlightAllUnder(document,R,_)},highlightAllUnder:function(R,_,I){var X={callback:I,container:R,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),d.hooks.run("before-all-elements-highlight",X);for(var ie,Y=0;ie=X.elements[Y++];)d.highlightElement(ie,!0===_,X.callback)},highlightElement:function(R,_,I){var X=d.util.getLanguage(R),Y=d.languages[X];d.util.setLanguage(R,X);var ie=R.parentElement;ie&&"pre"===ie.nodeName.toLowerCase()&&d.util.setLanguage(ie,X);var l={element:R,language:X,grammar:Y,code:R.textContent};function Te(Fe){l.highlightedCode=Fe,d.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,d.hooks.run("after-highlight",l),d.hooks.run("complete",l),I&&I.call(l.element)}if(d.hooks.run("before-sanity-check",l),(ie=l.element.parentElement)&&"pre"===ie.nodeName.toLowerCase()&&!ie.hasAttribute("tabindex")&&ie.setAttribute("tabindex","0"),!l.code)return d.hooks.run("complete",l),void(I&&I.call(l.element));if(d.hooks.run("before-highlight",l),l.grammar)if(_&&e.Worker){var ge=new Worker(d.filename);ge.onmessage=function(Fe){Te(Fe.data)},ge.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else Te(d.highlight(l.code,l.grammar,l.language));else Te(d.util.encode(l.code))},highlight:function(R,_,I){var X={code:R,grammar:_,language:I};if(d.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=d.tokenize(X.code,X.grammar),d.hooks.run("after-tokenize",X),r.stringify(d.util.encode(X.tokens),X.language)},tokenize:function(R,_){var I=_.rest;if(I){for(var X in I)_[X]=I[X];delete _.rest}var Y=new p;return w(Y,Y.head,R),a(R,Y,_,Y.head,0),function A(R){for(var _=[],I=R.head.next;I!==R.tail;)_.push(I.value),I=I.next;return _}(Y)},hooks:{all:{},add:function(R,_){var I=d.hooks.all;I[R]=I[R]||[],I[R].push(_)},run:function(R,_){var I=d.hooks.all[R];if(I&&I.length)for(var Y,X=0;Y=I[X++];)Y(_)}},Token:r};function r(R,_,I,X){this.type=R,this.content=_,this.alias=I,this.length=0|(X||"").length}function o(R,_,I,X){R.lastIndex=_;var Y=R.exec(I);if(Y&&X&&Y[1]){var ie=Y[1].length;Y.index+=ie,Y[0]=Y[0].slice(ie)}return Y}function a(R,_,I,X,Y,ie){for(var ue in I)if(I.hasOwnProperty(ue)&&I[ue]){var l=I[ue];l=Array.isArray(l)?l:[l];for(var Te=0;Te<l.length;++Te){if(ie&&ie.cause==ue+","+Te)return;var ge=l[Te],Fe=ge.inside,Ue=!!ge.lookbehind,at=!!ge.greedy,be=ge.alias;if(at&&!ge.pattern.global){var Pt=ge.pattern.toString().match(/[imsuy]*$/)[0];ge.pattern=RegExp(ge.pattern.source,Pt+"g")}for(var ft=ge.pattern||ge,Ve=X.next,Xe=Y;Ve!==_.tail&&!(ie&&Xe>=ie.reach);Xe+=Ve.value.length,Ve=Ve.next){var Et=Ve.value;if(_.length>R.length)return;if(!(Et instanceof r)){var mt,ye=1;if(at){if(!(mt=o(ft,Xe,R,Ue))||mt.index>=R.length)break;var Mt=mt.index,Qt=mt.index+mt[0].length,At=Xe;for(At+=Ve.value.length;Mt>=At;)At+=(Ve=Ve.next).value.length;if(Xe=At-=Ve.value.length,Ve.value instanceof r)continue;for(var Ct=Ve;Ct!==_.tail&&(At<Qt||"string"==typeof Ct.value);Ct=Ct.next)ye++,At+=Ct.value.length;ye--,Et=R.slice(Xe,At),mt.index-=Xe}else if(!(mt=o(ft,0,Et,Ue)))continue;var Bt=mt[0],Xt=Et.slice(0,Mt=mt.index),$t=Et.slice(Mt+Bt.length),pt=Xe+Et.length;ie&&pt>ie.reach&&(ie.reach=pt);var ot=Ve.prev;if(Xt&&(ot=w(_,ot,Xt),Xe+=Xt.length),x(_,ot,ye),Ve=w(_,ot,new r(ue,Fe?d.tokenize(Bt,Fe):Bt,be,Bt)),$t&&w(_,Ve,$t),ye>1){var Ht={cause:ue+","+Te,reach:pt};a(R,_,I,Ve.prev,Xe,Ht),ie&&Ht.reach>ie.reach&&(ie.reach=Ht.reach)}}}}}}function p(){var R={value:null,prev:null,next:null},_={value:null,prev:R,next:null};R.next=_,this.head=R,this.tail=_,this.length=0}function w(R,_,I){var X=_.next,Y={value:I,prev:_,next:X};return _.next=Y,X.prev=Y,R.length++,Y}function x(R,_,I){for(var X=_.next,Y=0;Y<I&&X!==R.tail;Y++)X=X.next;_.next=X,X.prev=_,R.length-=Y}if(e.Prism=d,r.stringify=function R(_,I){if("string"==typeof _)return _;if(Array.isArray(_)){var X="";return _.forEach(function(Te){X+=R(Te,I)}),X}var Y={type:_.type,content:R(_.content,I),tag:"span",classes:["token",_.type],attributes:{},language:I},ie=_.alias;ie&&(Array.isArray(ie)?Array.prototype.push.apply(Y.classes,ie):Y.classes.push(ie)),d.hooks.run("wrap",Y);var ue="";for(var l in Y.attributes)ue+=" "+l+'="'+(Y.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+Y.tag+' class="'+Y.classes.join(" ")+'"'+ue+">"+Y.content+"</"+Y.tag+">"},!e.document)return e.addEventListener&&(d.disableWorkerMessageHandler||e.addEventListener("message",function(R){var _=JSON.parse(R.data),I=_.language,Y=_.immediateClose;e.postMessage(d.highlight(_.code,d.languages[I],I)),Y&&e.close()},!1)),d;var P=d.util.currentScript();function O(){d.manual||d.highlightAll()}if(P&&(d.filename=P.src,P.hasAttribute("data-manual")&&(d.manual=!0)),!d.manual){var b=document.readyState;"loading"===b||"interactive"===b&&P&&P.defer?document.addEventListener("DOMContentLoaded",O):window.requestAnimationFrame?window.requestAnimationFrame(O):window.setTimeout(O,16)}return d}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(i,s){var h={};h["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},h.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:h}};d["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};var r={};r[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:d},Prism.languages.insertBefore("markup","cdata",r)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,i){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:Prism.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(e){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var s=e.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,function(){if(void 0!==Prism&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var h={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",r="loading",o="loaded",p="pre[data-src]:not(["+d+'="'+o+'"]):not(['+d+'="'+r+'"])';Prism.hooks.add("before-highlightall",function(P){P.selector+=", "+p}),Prism.hooks.add("before-sanity-check",function(P){var O=P.element;if(O.matches(p)){P.code="",O.setAttribute(d,r);var b=O.appendChild(document.createElement("CODE"));b.textContent="Loading\u2026";var R=O.getAttribute("data-src"),_=P.language;if("none"===_){var I=(/\.(\w+)$/.exec(R)||[,"none"])[1];_=h[I]||I}Prism.util.setLanguage(b,_),Prism.util.setLanguage(O,_);var X=Prism.plugins.autoloader;X&&X.loadLanguages(_),function w(P,O,b){var R=new XMLHttpRequest;R.open("GET",P,!0),R.onreadystatechange=function(){4==R.readyState&&(R.status<400&&R.responseText?O(R.responseText):b(R.status>=400?function(P,O){return"\u2716 Error "+P+" while fetching file: "+O}(R.status,R.statusText):"\u2716 Error: File does not exist or is empty"))},R.send(null)}(R,function(Y){O.setAttribute(d,o);var ie=function x(P){var O=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(P||"");if(O){var b=Number(O[1]),_=O[3];return O[2]?_?[b,Number(_)]:[b,void 0]:[b,b]}}(O.getAttribute("data-range"));if(ie){var ue=Y.split(/\r\n?|\n/g),l=ie[0],Te=null==ie[1]?ue.length:ie[1];l<0&&(l+=ue.length),l=Math.max(0,Math.min(l-1,ue.length)),Te<0&&(Te+=ue.length),Te=Math.max(0,Math.min(Te,ue.length)),Y=ue.slice(l,Te).join("\n"),O.hasAttribute("data-start")||O.setAttribute("data-start",String(l+1))}b.textContent=Y,Prism.highlightElement(b)},function(Y){O.setAttribute(d,"failed"),b.textContent=Y})}}),Prism.plugins.fileHighlight={highlight:function(O){for(var _,b=(O||document).querySelectorAll(p),R=0;_=b[R++];)Prism.highlightElement(_)}};var A=!1;Prism.fileHighlight=function(){A||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),A=!0),Prism.plugins.fileHighlight.highlight.apply(this,arguments)}}}();